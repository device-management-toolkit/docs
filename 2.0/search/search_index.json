{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Overview \u00b6 Open Active Management Technology Cloud Toolkit ( Open AMT Cloud Toolkit ) provides open-source, modular microservices and libraries for integration of Intel\u00ae Active Management Technology ( Intel\u00ae AMT ). As an open source implementation, the toolkit makes it easier for IT departments and independent software vendors (ISVs) to adopt, integrate, and customize Out-of-band Management ( OOB Management ) solutions for Intel vPro\u00ae Platforms. Figure 1: Open AMT Cloud Toolkit features OOB Management . Intel\u00ae AMT supports remote manageability with: OOB Management : This hardware-based remote management solution operates below the operating system. Call Home : This capability enables administrators to control, update, and modify remote clients with OOB Management . Goals \u00b6 The toolkit guide provides instructions to: Deploy the Management Presence Server ( MPS ) and Remote Provisioning Server ( RPS ) on the development system. Build and run Remote Provisioning Client ( RPC ) on the managed device. Connect the managed device (edge device). Additional sections provide guidance on the reference implementation UI Toolkit , REST API usage, asset security, and more. Figure 2: High-level architecture consists of four major software components. As shown in Figure 2, Open AMT Cloud Toolkit high-level architecture consists of five components: MPS - A microservice that uses an Intel vPro\u00ae Platform feature, Client Initiated Remote Access ( CIRA ), for enabling edge, cloud devices to maintain a persistent connection for out-of-band manageability features, such as power control or Keyboard, Video, Mouse ( KVM ) control. RPS - A microservice that activates Intel\u00ae AMT platforms using predefined profiles and connects them to the MPS for manageability use cases. RPC - A lightweight client application that communicates with the RPS server to activate Intel\u00ae AMT . UI Toolkit - A toolkit that includes prebuilt React components and a reference implementation web console. The React-based snippets simplify the task of adding complex manageability-related UI controls, such as the KVM , to a console. Sample Web UI - A web based UI that demonstrates how to use the UI-Toolkit. It also provides a way to interact with the microservices and to help provide context as to how each microservice is used. Integrate the Open AMT Cloud Toolkit into new and existing management consoles, software solutions, and more. Toolkit Setup \u00b6 Microservices as Containers \u00b6 Set up microservices quickly as Docker containers with this recommended method. Get Started Now Estimated completion time: Approximately 30 minutes Additional Setup Options \u00b6 Microservices on the Cloud \u00b6 Experienced Docker users may choose to deploy microservices straight to the cloud. Get Started with Microservices on the Cloud . Additional Intel\u00ae AMT Resources \u00b6 For additional information about Intel\u00ae AMT , see the following links: Intel vPro\u00ae Platform Overview Video Link Detailed Setup document","title":"Overview"},{"location":"#overview","text":"Open Active Management Technology Cloud Toolkit ( Open AMT Cloud Toolkit ) provides open-source, modular microservices and libraries for integration of Intel\u00ae Active Management Technology ( Intel\u00ae AMT ). As an open source implementation, the toolkit makes it easier for IT departments and independent software vendors (ISVs) to adopt, integrate, and customize Out-of-band Management ( OOB Management ) solutions for Intel vPro\u00ae Platforms. Figure 1: Open AMT Cloud Toolkit features OOB Management . Intel\u00ae AMT supports remote manageability with: OOB Management : This hardware-based remote management solution operates below the operating system. Call Home : This capability enables administrators to control, update, and modify remote clients with OOB Management .","title":"Overview"},{"location":"#goals","text":"The toolkit guide provides instructions to: Deploy the Management Presence Server ( MPS ) and Remote Provisioning Server ( RPS ) on the development system. Build and run Remote Provisioning Client ( RPC ) on the managed device. Connect the managed device (edge device). Additional sections provide guidance on the reference implementation UI Toolkit , REST API usage, asset security, and more. Figure 2: High-level architecture consists of four major software components. As shown in Figure 2, Open AMT Cloud Toolkit high-level architecture consists of five components: MPS - A microservice that uses an Intel vPro\u00ae Platform feature, Client Initiated Remote Access ( CIRA ), for enabling edge, cloud devices to maintain a persistent connection for out-of-band manageability features, such as power control or Keyboard, Video, Mouse ( KVM ) control. RPS - A microservice that activates Intel\u00ae AMT platforms using predefined profiles and connects them to the MPS for manageability use cases. RPC - A lightweight client application that communicates with the RPS server to activate Intel\u00ae AMT . UI Toolkit - A toolkit that includes prebuilt React components and a reference implementation web console. The React-based snippets simplify the task of adding complex manageability-related UI controls, such as the KVM , to a console. Sample Web UI - A web based UI that demonstrates how to use the UI-Toolkit. It also provides a way to interact with the microservices and to help provide context as to how each microservice is used. Integrate the Open AMT Cloud Toolkit into new and existing management consoles, software solutions, and more.","title":"Goals"},{"location":"#toolkit-setup","text":"","title":"Toolkit Setup"},{"location":"#microservices-as-containers","text":"Set up microservices quickly as Docker containers with this recommended method. Get Started Now Estimated completion time: Approximately 30 minutes","title":"Microservices as Containers"},{"location":"#additional-setup-options","text":"","title":"Additional Setup Options"},{"location":"#microservices-on-the-cloud","text":"Experienced Docker users may choose to deploy microservices straight to the cloud. Get Started with Microservices on the Cloud .","title":"Microservices on the Cloud"},{"location":"#additional-intel-amt-resources","text":"For additional information about Intel\u00ae AMT , see the following links: Intel vPro\u00ae Platform Overview Video Link Detailed Setup document","title":"Additional Intel\u00ae AMT Resources"},{"location":"Glossary/","text":"Glossary \u00b6 Open Active Management Technology (Open AMT) Cloud Toolkit, also referred to as (OAMTCT) Related Terminology, Technologies, and Acronyms A | B | C | D | E | F | G | H | I | J | K | L | M | N | O | P | Q | R | S | T | U | V | W | X | Y | Z A \u00b6 admin control mode (ACM): A mode of provisioning Intel\u00ae AMT that requires a purchased provisioning certificate from a Certificate Authority (CA), the creation of a domain, and the creation of a profile in the Remote Provisioning Server (RPS) application. ACM achieves a higher level of trust than client control mode (CCM). This is the required mode for Keyboard, Video, Mouse (KVM) or Redirection without user consent. See also CCM and provisioning . ACM Activation: The act of loading a purchased certificate and associating it with an OAMTCT profile. allowlist: A list permitting access to a privilege, service, network, etc. B \u00b6 Basic Input/Output System (BIOS): Firmware that performs hardware initialization and configuration upon startup. See MEBX . C \u00b6 certificate (provisioning): A digitally signed document used in the provisioning of an edge device featuring Intel\u00ae AMT. The Intel\u00ae AMT firmware is pre-loaded with Transport Layer Security (TLS) certificate thumbprints of different certificate vendors. A digital certificate binds the identity of the certificate holder to vendor-specific thumbprints. To provision an edge device, users must purchase a certificate from an approved vendor. Client Initiated Remote Access (CIRA): An out-of-band (OOB) management communication protocol that network clients can use to initiate a secure connection with a server. Client Control Mode (CCM): An alternative to ACM provisioning mode that does not require a purchased certificate. Use this mode to set up OAMTCT software features quickly. Container (Docker*): The instantiation, or running instance, of a Docker image. D \u00b6 development system: The system on which Management Presence Server (MPS) and Remote Provision Server (RPS) are installed. Docker*: A platform that employs the idea of containerization, isolating a unit of software, such as an application, from its environment. Containerization creates applications as lightweight, discrete processes that can be deployed to the cloud as services. See Docker for more information. Domain Name System (DNS) suffix: A suffix appended to the hostname of a DNS name. domain suffix: The top-level portion or end of a domain name (i.e., com, net, org). E \u00b6 Edge Devices: A device or piece of hardware that serves as an entry point into an enterprise or service provider network. Edge devices include those related to banking, retail, hospitality, point-of-sale, etc. G \u00b6 Globally Unique Identifier (GUID): A 128-bit integer used to identify a system resource. I \u00b6 Intel\u00ae Active Management Technology (Intel\u00ae AMT): A technology that provides out-of-band management and security features on an Intel vPro\u00ae Platform. See general overview of features. Intel vPro\u00ae Platform: An Intel\u00ae platform created for business environments. Intel vPro\u00ae technology features Intel\u00ae Core\u2122 i5, Intel\u00ae Core\u2122 i7, and Intel\u00ae Core\u2122 i9 vPro\u00ae processors, built-in security features, and out-of-band manageability using Intel\u00ae AMT. See more about the platform. Images (Docker*): a set of instructions that determine the creation of an instantiated container on a Docker platform. K \u00b6 Keyboard, Video, Mouse (KVM): A technology, often a device, that allows a user to control multiple computers from a single keyboard, mouse, and video source. L \u00b6 lights-out management (LOM): See out-of-band management . M \u00b6 managed (edge) device: An Intel vPro\u00ae Platform that features Intel\u00ae AMT and functions as an edge device. Manageability Engine BIOS Extensions (MEBX): A BIOS extension that enables the configuration of the Intel\u00ae AMT. Management Presence Server (MPS): A microservice that resides on the development system and enables platforms featuring featuring Intel\u00ae AMT. The MPS receives CIRA requests from the managed device. microservice: A software unit or module of a microservice architecture. In OAMTCT architecture, MPS and RPS are microservices residing on the development system. microservice architecture: An architecture in which the component parts are broken into discrete services, called microservices, that perform specific, limited functions. N \u00b6 Node.js*: An open source JavaScript* runtime created for asynchronous, event-driven backend network applications. See more about node.js. Node Package Manager (npm): a command line utility in node.js. The utility enables the management of packages, versions, and dependencies in node projects. O \u00b6 Open Active Management Technology (Open AMT) Cloud Toolkit: An open source software architecture consisting of modular microservices and libraries for integration of out-of-band manageability into existing network infrastructures. The software enables network administrators and independent software vendors (ISVs) to explore key Intel\u00ae AMT features. See more about Open AMT Cloud Toolkit features. out-of-band (OOB) manageability: A remote management technology that allows administrators to perform actions on network assets or devices using a secure alternative to LAN-based communication protocols. Actions include reboot, power up, power down, system updates, and more. As long as the network device or asset is connected to power, OAMTCT software can perform remote management, including powering up a system that is currently powered down. P \u00b6 profile : A set of configuration information, including a password and provisioning method, provided to Intel\u00ae AMT firmware during the activation process. provision or provisioning: The act of setting up a remote client, system, or device, on a network using a digitally signed certificate as a security credential. Q \u00b6 R \u00b6 Remote Provision Client (RPC): A lightweight client application that resides on the managed device. The RPC communicates with the Manageability Engine Interface (MEI) in the Management Engine (ME) driver to activate Intel\u00ae AMT. Remote Provision Server (RPS): A node.js-based microservice that works with the Remote Provision Client (RPC) to activate Intel\u00ae AMT using a pre-defined profile. REpresentational State Transfer (REST) API : An architectural style or set of rules describing constraints that allow administrators and developers to take advantage of various Web services. In the context of OAMTCT, administrators can construct REST API calls and run them with node, use provided REST code snippets to expand the reference implementation console, and use provided REST code snippets as a springboard for developing and expanding custom consoles. S \u00b6 Sample Web UI: A reference UI implementation serving as a demo vehicle and utilizing components of the UI toolkit. T \u00b6 U \u00b6 UI Toolkit: A modular, REST-based API consisting of code snippets developers can use to implement AMT features and services to their manageability console. V \u00b6 vcpkg : A command-line application that helps manage package creation and C and C++ libraries on Windows , Linux , and MacOS*. Vault storage : A service that manages encryption and storage of infrastructure secrets. W \u00b6 WebSocket*: A communication protocol that enables persistent connections and full-duplex communication between clients and servers. Web Service Management (WS-MAN): A SOAP-based protocol for exchanging management data between network devices. X \u00b6 Y \u00b6 Z \u00b6","title":"Glossary"},{"location":"Glossary/#glossary","text":"Open Active Management Technology (Open AMT) Cloud Toolkit, also referred to as (OAMTCT) Related Terminology, Technologies, and Acronyms A | B | C | D | E | F | G | H | I | J | K | L | M | N | O | P | Q | R | S | T | U | V | W | X | Y | Z","title":"Glossary"},{"location":"Glossary/#a","text":"admin control mode (ACM): A mode of provisioning Intel\u00ae AMT that requires a purchased provisioning certificate from a Certificate Authority (CA), the creation of a domain, and the creation of a profile in the Remote Provisioning Server (RPS) application. ACM achieves a higher level of trust than client control mode (CCM). This is the required mode for Keyboard, Video, Mouse (KVM) or Redirection without user consent. See also CCM and provisioning . ACM Activation: The act of loading a purchased certificate and associating it with an OAMTCT profile. allowlist: A list permitting access to a privilege, service, network, etc.","title":"A"},{"location":"Glossary/#b","text":"Basic Input/Output System (BIOS): Firmware that performs hardware initialization and configuration upon startup. See MEBX .","title":"B"},{"location":"Glossary/#c","text":"certificate (provisioning): A digitally signed document used in the provisioning of an edge device featuring Intel\u00ae AMT. The Intel\u00ae AMT firmware is pre-loaded with Transport Layer Security (TLS) certificate thumbprints of different certificate vendors. A digital certificate binds the identity of the certificate holder to vendor-specific thumbprints. To provision an edge device, users must purchase a certificate from an approved vendor. Client Initiated Remote Access (CIRA): An out-of-band (OOB) management communication protocol that network clients can use to initiate a secure connection with a server. Client Control Mode (CCM): An alternative to ACM provisioning mode that does not require a purchased certificate. Use this mode to set up OAMTCT software features quickly. Container (Docker*): The instantiation, or running instance, of a Docker image.","title":"C"},{"location":"Glossary/#d","text":"development system: The system on which Management Presence Server (MPS) and Remote Provision Server (RPS) are installed. Docker*: A platform that employs the idea of containerization, isolating a unit of software, such as an application, from its environment. Containerization creates applications as lightweight, discrete processes that can be deployed to the cloud as services. See Docker for more information. Domain Name System (DNS) suffix: A suffix appended to the hostname of a DNS name. domain suffix: The top-level portion or end of a domain name (i.e., com, net, org).","title":"D"},{"location":"Glossary/#e","text":"Edge Devices: A device or piece of hardware that serves as an entry point into an enterprise or service provider network. Edge devices include those related to banking, retail, hospitality, point-of-sale, etc.","title":"E"},{"location":"Glossary/#g","text":"Globally Unique Identifier (GUID): A 128-bit integer used to identify a system resource.","title":"G"},{"location":"Glossary/#i","text":"Intel\u00ae Active Management Technology (Intel\u00ae AMT): A technology that provides out-of-band management and security features on an Intel vPro\u00ae Platform. See general overview of features. Intel vPro\u00ae Platform: An Intel\u00ae platform created for business environments. Intel vPro\u00ae technology features Intel\u00ae Core\u2122 i5, Intel\u00ae Core\u2122 i7, and Intel\u00ae Core\u2122 i9 vPro\u00ae processors, built-in security features, and out-of-band manageability using Intel\u00ae AMT. See more about the platform. Images (Docker*): a set of instructions that determine the creation of an instantiated container on a Docker platform.","title":"I"},{"location":"Glossary/#k","text":"Keyboard, Video, Mouse (KVM): A technology, often a device, that allows a user to control multiple computers from a single keyboard, mouse, and video source.","title":"K"},{"location":"Glossary/#l","text":"lights-out management (LOM): See out-of-band management .","title":"L"},{"location":"Glossary/#m","text":"managed (edge) device: An Intel vPro\u00ae Platform that features Intel\u00ae AMT and functions as an edge device. Manageability Engine BIOS Extensions (MEBX): A BIOS extension that enables the configuration of the Intel\u00ae AMT. Management Presence Server (MPS): A microservice that resides on the development system and enables platforms featuring featuring Intel\u00ae AMT. The MPS receives CIRA requests from the managed device. microservice: A software unit or module of a microservice architecture. In OAMTCT architecture, MPS and RPS are microservices residing on the development system. microservice architecture: An architecture in which the component parts are broken into discrete services, called microservices, that perform specific, limited functions.","title":"M"},{"location":"Glossary/#n","text":"Node.js*: An open source JavaScript* runtime created for asynchronous, event-driven backend network applications. See more about node.js. Node Package Manager (npm): a command line utility in node.js. The utility enables the management of packages, versions, and dependencies in node projects.","title":"N"},{"location":"Glossary/#o","text":"Open Active Management Technology (Open AMT) Cloud Toolkit: An open source software architecture consisting of modular microservices and libraries for integration of out-of-band manageability into existing network infrastructures. The software enables network administrators and independent software vendors (ISVs) to explore key Intel\u00ae AMT features. See more about Open AMT Cloud Toolkit features. out-of-band (OOB) manageability: A remote management technology that allows administrators to perform actions on network assets or devices using a secure alternative to LAN-based communication protocols. Actions include reboot, power up, power down, system updates, and more. As long as the network device or asset is connected to power, OAMTCT software can perform remote management, including powering up a system that is currently powered down.","title":"O"},{"location":"Glossary/#p","text":"profile : A set of configuration information, including a password and provisioning method, provided to Intel\u00ae AMT firmware during the activation process. provision or provisioning: The act of setting up a remote client, system, or device, on a network using a digitally signed certificate as a security credential.","title":"P"},{"location":"Glossary/#q","text":"","title":"Q"},{"location":"Glossary/#r","text":"Remote Provision Client (RPC): A lightweight client application that resides on the managed device. The RPC communicates with the Manageability Engine Interface (MEI) in the Management Engine (ME) driver to activate Intel\u00ae AMT. Remote Provision Server (RPS): A node.js-based microservice that works with the Remote Provision Client (RPC) to activate Intel\u00ae AMT using a pre-defined profile. REpresentational State Transfer (REST) API : An architectural style or set of rules describing constraints that allow administrators and developers to take advantage of various Web services. In the context of OAMTCT, administrators can construct REST API calls and run them with node, use provided REST code snippets to expand the reference implementation console, and use provided REST code snippets as a springboard for developing and expanding custom consoles.","title":"R"},{"location":"Glossary/#s","text":"Sample Web UI: A reference UI implementation serving as a demo vehicle and utilizing components of the UI toolkit.","title":"S"},{"location":"Glossary/#t","text":"","title":"T"},{"location":"Glossary/#u","text":"UI Toolkit: A modular, REST-based API consisting of code snippets developers can use to implement AMT features and services to their manageability console.","title":"U"},{"location":"Glossary/#v","text":"vcpkg : A command-line application that helps manage package creation and C and C++ libraries on Windows , Linux , and MacOS*. Vault storage : A service that manages encryption and storage of infrastructure secrets.","title":"V"},{"location":"Glossary/#w","text":"WebSocket*: A communication protocol that enables persistent connections and full-duplex communication between clients and servers. Web Service Management (WS-MAN): A SOAP-based protocol for exchanging management data between network devices.","title":"W"},{"location":"Glossary/#x","text":"","title":"X"},{"location":"Glossary/#y","text":"","title":"Y"},{"location":"Glossary/#z","text":"","title":"Z"},{"location":"license/","text":"License \u00b6 Apache License Version 2.0, January 2004 http://www.apache.org/licenses/ TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION Definitions. \"License\" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document. \"Licensor\" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License. \"Legal Entity\" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \"control\" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity. \"You\" (or \"Your\") shall mean an individual or Legal Entity exercising permissions granted by this License. \"Source\" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files. \"Object\" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types. \"Work\" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below). \"Derivative Works\" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof. \"Contribution\" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \"submitted\" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \"Not a Contribution.\" \"Contributor\" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions: (a) You must give any other recipients of the Work or Derivative Works a copy of this License; and (b) You must cause any modified files to carry prominent notices stating that You changed the files; and (c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and (d) If the Work includes a \"NOTICE\" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License. You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability. END OF TERMS AND CONDITIONS APPENDIX: How to apply the Apache License to your work. To apply the Apache License to your work, attach the following boilerplate notice, with the fields enclosed by brackets \"[]\" replaced with your own identifying information. (Don't include the brackets!) The text should be enclosed in the appropriate comment syntax for the file format. We also recommend that a file or class name and description of purpose be included on the same \"printed page\" as the copyright notice for easier identification within third-party archives. Copyright 2019 Intel Corporation Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.","title":"License"},{"location":"license/#license","text":"Apache License Version 2.0, January 2004 http://www.apache.org/licenses/ TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION Definitions. \"License\" shall mean the terms and conditions for use, reproduction, and distribution as defined by Sections 1 through 9 of this document. \"Licensor\" shall mean the copyright owner or entity authorized by the copyright owner that is granting the License. \"Legal Entity\" shall mean the union of the acting entity and all other entities that control, are controlled by, or are under common control with that entity. For the purposes of this definition, \"control\" means (i) the power, direct or indirect, to cause the direction or management of such entity, whether by contract or otherwise, or (ii) ownership of fifty percent (50%) or more of the outstanding shares, or (iii) beneficial ownership of such entity. \"You\" (or \"Your\") shall mean an individual or Legal Entity exercising permissions granted by this License. \"Source\" form shall mean the preferred form for making modifications, including but not limited to software source code, documentation source, and configuration files. \"Object\" form shall mean any form resulting from mechanical transformation or translation of a Source form, including but not limited to compiled object code, generated documentation, and conversions to other media types. \"Work\" shall mean the work of authorship, whether in Source or Object form, made available under the License, as indicated by a copyright notice that is included in or attached to the work (an example is provided in the Appendix below). \"Derivative Works\" shall mean any work, whether in Source or Object form, that is based on (or derived from) the Work and for which the editorial revisions, annotations, elaborations, or other modifications represent, as a whole, an original work of authorship. For the purposes of this License, Derivative Works shall not include works that remain separable from, or merely link (or bind by name) to the interfaces of, the Work and Derivative Works thereof. \"Contribution\" shall mean any work of authorship, including the original version of the Work and any modifications or additions to that Work or Derivative Works thereof, that is intentionally submitted to Licensor for inclusion in the Work by the copyright owner or by an individual or Legal Entity authorized to submit on behalf of the copyright owner. For the purposes of this definition, \"submitted\" means any form of electronic, verbal, or written communication sent to the Licensor or its representatives, including but not limited to communication on electronic mailing lists, source code control systems, and issue tracking systems that are managed by, or on behalf of, the Licensor for the purpose of discussing and improving the Work, but excluding communication that is conspicuously marked or otherwise designated in writing by the copyright owner as \"Not a Contribution.\" \"Contributor\" shall mean Licensor and any individual or Legal Entity on behalf of whom a Contribution has been received by Licensor and subsequently incorporated within the Work. Grant of Copyright License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare Derivative Works of, publicly display, publicly perform, sublicense, and distribute the Work and such Derivative Works in Source or Object form. Grant of Patent License. Subject to the terms and conditions of this License, each Contributor hereby grants to You a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable (except as stated in this section) patent license to make, have made, use, offer to sell, sell, import, and otherwise transfer the Work, where such license applies only to those patent claims licensable by such Contributor that are necessarily infringed by their Contribution(s) alone or by combination of their Contribution(s) with the Work to which such Contribution(s) was submitted. If You institute patent litigation against any entity (including a cross-claim or counterclaim in a lawsuit) alleging that the Work or a Contribution incorporated within the Work constitutes direct or contributory patent infringement, then any patent licenses granted to You under this License for that Work shall terminate as of the date such litigation is filed. Redistribution. You may reproduce and distribute copies of the Work or Derivative Works thereof in any medium, with or without modifications, and in Source or Object form, provided that You meet the following conditions: (a) You must give any other recipients of the Work or Derivative Works a copy of this License; and (b) You must cause any modified files to carry prominent notices stating that You changed the files; and (c) You must retain, in the Source form of any Derivative Works that You distribute, all copyright, patent, trademark, and attribution notices from the Source form of the Work, excluding those notices that do not pertain to any part of the Derivative Works; and (d) If the Work includes a \"NOTICE\" text file as part of its distribution, then any Derivative Works that You distribute must include a readable copy of the attribution notices contained within such NOTICE file, excluding those notices that do not pertain to any part of the Derivative Works, in at least one of the following places: within a NOTICE text file distributed as part of the Derivative Works; within the Source form or documentation, if provided along with the Derivative Works; or, within a display generated by the Derivative Works, if and wherever such third-party notices normally appear. The contents of the NOTICE file are for informational purposes only and do not modify the License. You may add Your own attribution notices within Derivative Works that You distribute, alongside or as an addendum to the NOTICE text from the Work, provided that such additional attribution notices cannot be construed as modifying the License. You may add Your own copyright statement to Your modifications and may provide additional or different license terms and conditions for use, reproduction, or distribution of Your modifications, or for any such Derivative Works as a whole, provided Your use, reproduction, and distribution of the Work otherwise complies with the conditions stated in this License. Submission of Contributions. Unless You explicitly state otherwise, any Contribution intentionally submitted for inclusion in the Work by You to the Licensor shall be under the terms and conditions of this License, without any additional terms or conditions. Notwithstanding the above, nothing herein shall supersede or modify the terms of any separate license agreement you may have executed with Licensor regarding such Contributions. Trademarks. This License does not grant permission to use the trade names, trademarks, service marks, or product names of the Licensor, except as required for reasonable and customary use in describing the origin of the Work and reproducing the content of the NOTICE file. Disclaimer of Warranty. Unless required by applicable law or agreed to in writing, Licensor provides the Work (and each Contributor provides its Contributions) on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. You are solely responsible for determining the appropriateness of using or redistributing the Work and assume any risks associated with Your exercise of permissions under this License. Limitation of Liability. In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall any Contributor be liable to You for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising as a result of this License or out of the use or inability to use the Work (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if such Contributor has been advised of the possibility of such damages. Accepting Warranty or Additional Liability. While redistributing the Work or Derivative Works thereof, You may choose to offer, and charge a fee for, acceptance of support, warranty, indemnity, or other liability obligations and/or rights consistent with this License. However, in accepting such obligations, You may act only on Your own behalf and on Your sole responsibility, not on behalf of any other Contributor, and only if You agree to indemnify, defend, and hold each Contributor harmless for any liability incurred by, or claims asserted against, such Contributor by reason of your accepting any such warranty or additional liability. END OF TERMS AND CONDITIONS APPENDIX: How to apply the Apache License to your work. To apply the Apache License to your work, attach the following boilerplate notice, with the fields enclosed by brackets \"[]\" replaced with your own identifying information. (Don't include the brackets!) The text should be enclosed in the appropriate comment syntax for the file format. We also recommend that a file or class name and description of purpose be included on the same \"printed page\" as the copyright notice for easier identification within third-party archives. Copyright 2019 Intel Corporation Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.","title":"License"},{"location":"release-notes/","text":"Release Notes \u00b6 Announcements \u00b6 Long Term Support Release \u00b6 The Long Term Support (LTS) release of Open AMT Cloud Toolkit is official and is planned for September 2021. With the release of LTS, the version of Open AMT Cloud Toolkit and all of the components will be moving to 2.0.0. Why the major version change? During the 1.X development period, we made many breaking changes as we were improving our external interfaces, database schemas, and communication protocols. Starting with 2.0, we will no longer be introducing breaking changes in minor version releases. This means that any 2.X component will be compatible with other 2.X components. With this adherence to semantic versioning our goal is to allow our customers the flexibility to upgrade versions with confidence and clarity of compatibility. RPC 1.3 release delayed \u00b6 We are working on updating the version of CPPRestSDK used in RPC which will update the version of OpenSSL as a sub-dependency of CPPRestSDK. The next version of RPC will be released with our 2.0 LTS release. Key Feature Changes for 1.5 \u00b6 This section outlines key features changes between versions 1.4 and 1.5 for Open AMT Cloud Toolkit . Breaking Changes \u00b6 Removed configuration_script column from profiles DB Additions \u00b6 Open AMT Cloud Toolkit \u00b6 MQTT address configuration: To support the service events feature, we have add an option to the .env.template to configure the mqtt address. Vault route added to Kong: We added a Vault route in the API Gateway. This facilitates direct calls to the secure key storage to retrieve data stored in Vault. RPS and MPS will not return any of the information that is stored in Vault in our REST API responses (security measure). However, there are certain times in which an ISV may want to retrieve this information. Vault has its own APIs and authentication model and calls using this route will need to implement per Vault's APIs. RPS \u00b6 Wireless Configuration: Added the capability to configure Intel\u00ae AMT with wireless profiles. This enables Intel\u00ae AMT to connect to a known wireless access point and establish a CIRA connection back to MPS . RPS has added a new Wireless Profile interface that allows adding and prioritizing multiple wireless profiles in the AMT Profile . These profiles are set during configuration of the Intel\u00ae AMT device. The new APIs are documented here RPS Events: Continuing to improve our server event messages, we have instrumented RPS to send events to the MQTT broker in this release. Some of the events you can expect to see are devices successfully being configured, failures in configuration, and new profiles being added. As this feature is still early release, we continue to appreciate feedback on how we can improve this feature. MPS & RPS \u00b6 API Paging support: We have added the ability to limit the response size to a specific number. This allows UIs making queries to MPS and RPS to scope responses to page size. UI Toolkit \u00b6 Split up Core, React, and Angular code into different repositories: We have had quite a few requests to have an option to just deliver the core functionality of the UI-Toolkit without being wrapped in the React framework. To support this, we have split out the UI-Toolkit into three repositories: Core, React, and Angular. Both the React and Angular repositories pull from the Core to build the components in the specific ui framework. Sample Web UI \u00b6 UI updated to handle Wireless configurations: The Sample Web UI has been updated to support the new Wireless profile feature. Modifications and Removals \u00b6 Open AMT Cloud Toolkit \u00b6 Removed postgresdb from helm charts: When deploying the Toolkit to Kubernetes, it is recommend to use a managed database service from the cloud service provider. With this in mind, we have removed the option to deploy the postgresdb container from our helm charts. RPS \u00b6 Profile API update: the ciraconfigname now accepts a null value now. This allows the removal of the CIRA config from a Profile . Sample Web UI \u00b6 Improvements: We have made some minor changes and improvements in the Sample Web UI to streamline profile creation and provide additional information on the devices page. The UI now sets the password length for new random passwords, removing the need for the password length field in the CIRA Config and Profiles. The REST APIs still support user defined values from 8 to 32 for password length. On the devices page, we have added the device hostname, GUID, and tags to help with easily finding this information for each device. An Add New Device button has been added that will provide the exact RPC command needed to activate a device. You can copy this command and input it onto the command line of the device you are activating. Resolved Issues in this release \u00b6 MPS \u00b6 MPS won't start when tls_offload is set to true or https is set to false Sample-Web-UI \u00b6 CIRA Config Name Smashed Logging out of Sample-Web-UI page while on an active KVM session does not take user back to login page Logging out of UI if user performs power actions on a device with invalid amt password Pages with multiple REST calls won't populate any information if a single call fails Error message misleading when using KVM in CCM Mode Known Issues in 1.5 \u00b6 Intel\u00ae AMT \u00b6 Intel\u00ae AMT device fails to re-connect to MPS after MPS is not available for an extended period of time: UPDATE: There is a firmware fix available for this issue, however, we are still testing to ensure that it completely resolves this issue. We'll let you know once this issue is resolved. If the MPS goes down for more than 2 days, Intel\u00ae AMT devices will no longer attempt to connect to MPS . If this happens, there are two ways to prompt Intel\u00ae AMT to attempt to re-connect to MPS : Unplug and re-plug the network cable Reboot the Intel\u00ae AMT device Open AMT Cloud Toolkit \u00b6 Power policy should be selected at BIOS under Intel\u00aeME Power Control screen -Mobile: On in So, MEWake in S3, S4-5 \u2013Power Package 2 for performing device poweron/off operations : Documentation Scaling- KVM shows white screen : Known Issue Scaling- Connecting to SOL does not work correctly : Known Issue RPS \u00b6 Software Event Notifications : Enhancement RPS should support wildcard domain suffix : Enhancement Data shouldn't be added if vault calls fail : Bug AMT Wi-Fi Configuration not supported on non-Windows systems : Known Issue Wi-Fi config: Intel AMT system disconnects from mps stack after powering off the device : Known Issue MPS \u00b6 Direct Connection from MPS to AMT : Enhancement Should return error on additional KVM connections for a single device : Enhancement AMT 12 dropping CIRA when sending command while system is off : Bug MPS API /ciracert always reads from file AMT does not connect to MPS after configuration : Known Issue Audit Log calls never respond on specific versions of AMT : Known Issue UI-Toolkit \u00b6 KVM freeze intermittently: We have added a small delay in handling mouse interactions that prevents us from flooding the AMT channel. There are still a few occasions where KVM could still freeze. We are still root causing this new issue Sample-Web-UI \u00b6 AMT Responses should return status (i.e. NOT_READY) instead of \"Sent Succesfully\" : Enhancement Can't clear out CIRA config once selected in AMT Profile : Enhancement WiFi Profiles drop-down says \"No Wifi configs found\" before typing anything : Bug","title":"Release notes"},{"location":"release-notes/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/#announcements","text":"","title":"Announcements"},{"location":"release-notes/#long-term-support-release","text":"The Long Term Support (LTS) release of Open AMT Cloud Toolkit is official and is planned for September 2021. With the release of LTS, the version of Open AMT Cloud Toolkit and all of the components will be moving to 2.0.0. Why the major version change? During the 1.X development period, we made many breaking changes as we were improving our external interfaces, database schemas, and communication protocols. Starting with 2.0, we will no longer be introducing breaking changes in minor version releases. This means that any 2.X component will be compatible with other 2.X components. With this adherence to semantic versioning our goal is to allow our customers the flexibility to upgrade versions with confidence and clarity of compatibility.","title":"Long Term Support Release"},{"location":"release-notes/#rpc-13-release-delayed","text":"We are working on updating the version of CPPRestSDK used in RPC which will update the version of OpenSSL as a sub-dependency of CPPRestSDK. The next version of RPC will be released with our 2.0 LTS release.","title":"RPC 1.3 release delayed"},{"location":"release-notes/#key-feature-changes-for-15","text":"This section outlines key features changes between versions 1.4 and 1.5 for Open AMT Cloud Toolkit .","title":"Key Feature Changes for 1.5"},{"location":"release-notes/#breaking-changes","text":"Removed configuration_script column from profiles DB","title":"Breaking Changes"},{"location":"release-notes/#additions","text":"","title":"Additions"},{"location":"release-notes/#open-amt-cloud-toolkit","text":"MQTT address configuration: To support the service events feature, we have add an option to the .env.template to configure the mqtt address. Vault route added to Kong: We added a Vault route in the API Gateway. This facilitates direct calls to the secure key storage to retrieve data stored in Vault. RPS and MPS will not return any of the information that is stored in Vault in our REST API responses (security measure). However, there are certain times in which an ISV may want to retrieve this information. Vault has its own APIs and authentication model and calls using this route will need to implement per Vault's APIs.","title":"Open AMT Cloud Toolkit"},{"location":"release-notes/#rps","text":"Wireless Configuration: Added the capability to configure Intel\u00ae AMT with wireless profiles. This enables Intel\u00ae AMT to connect to a known wireless access point and establish a CIRA connection back to MPS . RPS has added a new Wireless Profile interface that allows adding and prioritizing multiple wireless profiles in the AMT Profile . These profiles are set during configuration of the Intel\u00ae AMT device. The new APIs are documented here RPS Events: Continuing to improve our server event messages, we have instrumented RPS to send events to the MQTT broker in this release. Some of the events you can expect to see are devices successfully being configured, failures in configuration, and new profiles being added. As this feature is still early release, we continue to appreciate feedback on how we can improve this feature.","title":"RPS"},{"location":"release-notes/#mps-rps","text":"API Paging support: We have added the ability to limit the response size to a specific number. This allows UIs making queries to MPS and RPS to scope responses to page size.","title":"MPS &amp; RPS"},{"location":"release-notes/#ui-toolkit","text":"Split up Core, React, and Angular code into different repositories: We have had quite a few requests to have an option to just deliver the core functionality of the UI-Toolkit without being wrapped in the React framework. To support this, we have split out the UI-Toolkit into three repositories: Core, React, and Angular. Both the React and Angular repositories pull from the Core to build the components in the specific ui framework.","title":"UI Toolkit"},{"location":"release-notes/#sample-web-ui","text":"UI updated to handle Wireless configurations: The Sample Web UI has been updated to support the new Wireless profile feature.","title":"Sample Web UI"},{"location":"release-notes/#modifications-and-removals","text":"","title":"Modifications and Removals"},{"location":"release-notes/#open-amt-cloud-toolkit_1","text":"Removed postgresdb from helm charts: When deploying the Toolkit to Kubernetes, it is recommend to use a managed database service from the cloud service provider. With this in mind, we have removed the option to deploy the postgresdb container from our helm charts.","title":"Open AMT Cloud Toolkit"},{"location":"release-notes/#rps_1","text":"Profile API update: the ciraconfigname now accepts a null value now. This allows the removal of the CIRA config from a Profile .","title":"RPS"},{"location":"release-notes/#sample-web-ui_1","text":"Improvements: We have made some minor changes and improvements in the Sample Web UI to streamline profile creation and provide additional information on the devices page. The UI now sets the password length for new random passwords, removing the need for the password length field in the CIRA Config and Profiles. The REST APIs still support user defined values from 8 to 32 for password length. On the devices page, we have added the device hostname, GUID, and tags to help with easily finding this information for each device. An Add New Device button has been added that will provide the exact RPC command needed to activate a device. You can copy this command and input it onto the command line of the device you are activating.","title":"Sample Web UI"},{"location":"release-notes/#resolved-issues-in-this-release","text":"","title":"Resolved Issues in this release"},{"location":"release-notes/#mps","text":"MPS won't start when tls_offload is set to true or https is set to false","title":"MPS"},{"location":"release-notes/#sample-web-ui_2","text":"CIRA Config Name Smashed Logging out of Sample-Web-UI page while on an active KVM session does not take user back to login page Logging out of UI if user performs power actions on a device with invalid amt password Pages with multiple REST calls won't populate any information if a single call fails Error message misleading when using KVM in CCM Mode","title":"Sample-Web-UI"},{"location":"release-notes/#known-issues-in-15","text":"","title":"Known Issues in 1.5"},{"location":"release-notes/#intel-amt","text":"Intel\u00ae AMT device fails to re-connect to MPS after MPS is not available for an extended period of time: UPDATE: There is a firmware fix available for this issue, however, we are still testing to ensure that it completely resolves this issue. We'll let you know once this issue is resolved. If the MPS goes down for more than 2 days, Intel\u00ae AMT devices will no longer attempt to connect to MPS . If this happens, there are two ways to prompt Intel\u00ae AMT to attempt to re-connect to MPS : Unplug and re-plug the network cable Reboot the Intel\u00ae AMT device","title":"Intel&reg; AMT"},{"location":"release-notes/#open-amt-cloud-toolkit_2","text":"Power policy should be selected at BIOS under Intel\u00aeME Power Control screen -Mobile: On in So, MEWake in S3, S4-5 \u2013Power Package 2 for performing device poweron/off operations : Documentation Scaling- KVM shows white screen : Known Issue Scaling- Connecting to SOL does not work correctly : Known Issue","title":"Open AMT Cloud Toolkit"},{"location":"release-notes/#rps_2","text":"Software Event Notifications : Enhancement RPS should support wildcard domain suffix : Enhancement Data shouldn't be added if vault calls fail : Bug AMT Wi-Fi Configuration not supported on non-Windows systems : Known Issue Wi-Fi config: Intel AMT system disconnects from mps stack after powering off the device : Known Issue","title":"RPS"},{"location":"release-notes/#mps_1","text":"Direct Connection from MPS to AMT : Enhancement Should return error on additional KVM connections for a single device : Enhancement AMT 12 dropping CIRA when sending command while system is off : Bug MPS API /ciracert always reads from file AMT does not connect to MPS after configuration : Known Issue Audit Log calls never respond on specific versions of AMT : Known Issue","title":"MPS"},{"location":"release-notes/#ui-toolkit_1","text":"KVM freeze intermittently: We have added a small delay in handling mouse interactions that prevents us from flooding the AMT channel. There are still a few occasions where KVM could still freeze. We are still root causing this new issue","title":"UI-Toolkit"},{"location":"release-notes/#sample-web-ui_3","text":"AMT Responses should return status (i.e. NOT_READY) instead of \"Sent Succesfully\" : Enhancement Can't clear out CIRA config once selected in AMT Profile : Enhancement WiFi Profiles drop-down says \"No Wifi configs found\" before typing anything : Bug","title":"Sample-Web-UI"},{"location":"APIs/indexMPS/","text":".md-typeset h1, .md-content__button { display: none; } const ui = SwaggerUIBundle({ url: 'https://api.swaggerhub.com/apis/rbheopenamt/mps/1.5.0', dom_id: '#swagger-ui', })","title":"Management Presence Server"},{"location":"APIs/indexRPS/","text":".md-typeset h1, .md-content__button { display: none; } const ui = SwaggerUIBundle({ url: 'https://api.swaggerhub.com/apis/rbheopenamt/rps/1.5.0', dom_id: '#swagger-ui', })","title":"Remote Provisioning Server"},{"location":"Docker/dockerCloud/","text":"Build Docker* Containers for MPS and RPS and Deploy to the Cloud \u00b6 The Open AMT Cloud Toolkit provides support for deploying Management Presence Server ( MPS ) and Remote Provisioning Server ( RPS ) microservices as Docker* containers to the cloud. What You'll Do \u00b6 This tutorial explains the steps to deploy MPS and RPS as Docker images to the cloud using Microsoft Azure*: Create a Microsoft Azure* subscription. Create a Docker Hub account. Supply it with a Docker ID which will be used later. Login to the accounts. Build and deploy to the cloud. What You'll Need \u00b6 Hardware \u00b6 Configure a network that includes: A development system running Windows\u00ae 10 or Ubuntu* 18.04 or newer At least one Intel vPro\u00ae platform to manage Software \u00b6 Before MPS and RPS installation, install or subscribe to the following software: Microsoft Azure Subscription and Login Microsoft Azure Configuration Details Create a subscription for Microsoft Azure. Download Microsoft Azure Command Line Interface (CLI) . Test the Microsoft Azure CLI login Docker Hub Account Docker Hub Account Configuration Details Creating an account on Docker Hub requires the creation of a unique Docker ID consisting of 4 to 30 lowercase letters and digits. This ID becomes the user namespace for hosted services. The password and Docker ID will be used in the deployment instructions. A Docker Hub account enables user access to Docker Hub repositories, forums, support and more. See detailed instructions for creating an account here . Docker Desktop on Windows Docker Configuration Details The Docker for Windows installer defaults to enabling and running all the required settings necessary for this tutorial. After successful installation, the Docker icon (whale), appears on the task bar. To troubleshoot the installation, see the troubleshooting guide . Login to the Accounts \u00b6 To login: 1. Login to Microsoft Azure with the Azure CLI using the az command. Type the command in a Windows Command Prompt or Azure PowerShell. az login This command will invoke the default browser, which displays a login screen. 2. Login to the Docker hub account with the Docker ID and password. docker login --username [your Docker ID] --password [your Docker Hub Password] Build the Repositories \u00b6 Build the MPS and RPS Docker images from their respective directories with the build -t command, giving the image a name and tag: docker build -t [name:tag] Create a name and tag with lowercase letters, digits, and separators (i.e., underscores, periods, and dashes). Do not end a name or tag with a separator. Tags contain up to 128 characters. Note Building a fresh Docker image may take several minutes. To build MPS : 1. Navigate to the MPS folder and build the Docker image. Execute a build and push for MPS . The docker push command with the -t or --tag option enables the naming and tagging of a build: docker push -t [docker-id][name:tag] cd parent directory\\mps docker build . -t f30911230045\\mps-microservice:v1 docker push f30911230045\\mps-microservice:v1 To build the RPS : 2. Navigate to the RPS folder and build the Docker image. Execute a build and push for RPS . cd ..\\rps docker build . -t f30911230032\\rps-microservice:v1 docker push f30911230032\\rps-microservice:v1 Deploy the Images \u00b6 To deploy to the cloud: 1. After building the new MPS and RPS images, navigate to mps\\scripts\\docker-compose folder and use xcopy to copy the .env.template file to .env . The environment file .env.template contains the MPS and RPS environment variables to pass to the Docker engine. cd mps\\scripts\\docker-compose xcopy /Y .env.template .env Note Always preserve the .env.template file by copying it to a new file. 2. Set the image-related environment variables within the .env file: MPS_IMAGE=[name:tag from the build step] RPS_IMAGE=[name:tag from the build step] MPS_IMAGE=mps-microservice:v1 RPS_IMAGE=rps-microservice:v2 3. Set the proper proxy values if behind a proxy. set HTTP_PROXY=http://[your-proxy-server]:[your-proxy-server-port] set HTTPS_PROXY=http://[your-proxy-server]:[your-proxy-server-port] set HTTP_PROXY=http://10.3.4.52:8080 set HTTPS_PROXY=http://10.3.4.52:8080 Note If using a private Docker hub, set the password variable: DOCKER_LOGIN_PASSWORD=[your-docker-login-password] 4. Run the oact-stack-azure-vm.bat file. This file: Installs the Docker on the Microsoft Azure VM Runs the docker-compose up command. Copies the .env-template file to .env. oact-stack-azure-vm.bat [your-solution-name] [region (e.g.,: westus)] [ MPS -IMAGE] [ RPS -IMAGE] cd scripts\\docker-compose oact-stack-azure-vm.bat vprodemo westus 5. Log into Sample Web UI : When running the stack in Azure, there are a few adjustments that need to be made to access the Sample Web UI that are different than the docker deployment. - https needs to be specified in the URL. If using a self-signed certificate, the first time you access the Sample Web UI , this certificate will need to be accepted. - Use the FQDN of the Azure instance for the URL instead of the IP address. - 8443 is the exposed port on the API gateway, so this needs to be appended to the URL. https://test-instance.westus.azurecontainer.io:8443/ 6. Creating CIRA profile: When creating the CIRA profile on an Azure deployment, use the FQDN option and fill in the FQDN of the Azure instance. --insert screenshot here--","title":"dockerCloud"},{"location":"Docker/dockerCloud/#build-docker-containers-for-mps-and-rps-and-deploy-to-the-cloud","text":"The Open AMT Cloud Toolkit provides support for deploying Management Presence Server ( MPS ) and Remote Provisioning Server ( RPS ) microservices as Docker* containers to the cloud.","title":"Build Docker* Containers for MPS and RPS and Deploy to the Cloud"},{"location":"Docker/dockerCloud/#what-youll-do","text":"This tutorial explains the steps to deploy MPS and RPS as Docker images to the cloud using Microsoft Azure*: Create a Microsoft Azure* subscription. Create a Docker Hub account. Supply it with a Docker ID which will be used later. Login to the accounts. Build and deploy to the cloud.","title":"What You'll Do"},{"location":"Docker/dockerCloud/#what-youll-need","text":"","title":"What You'll Need"},{"location":"Docker/dockerCloud/#hardware","text":"Configure a network that includes: A development system running Windows\u00ae 10 or Ubuntu* 18.04 or newer At least one Intel vPro\u00ae platform to manage","title":"Hardware"},{"location":"Docker/dockerCloud/#software","text":"Before MPS and RPS installation, install or subscribe to the following software: Microsoft Azure Subscription and Login Microsoft Azure Configuration Details Create a subscription for Microsoft Azure. Download Microsoft Azure Command Line Interface (CLI) . Test the Microsoft Azure CLI login Docker Hub Account Docker Hub Account Configuration Details Creating an account on Docker Hub requires the creation of a unique Docker ID consisting of 4 to 30 lowercase letters and digits. This ID becomes the user namespace for hosted services. The password and Docker ID will be used in the deployment instructions. A Docker Hub account enables user access to Docker Hub repositories, forums, support and more. See detailed instructions for creating an account here . Docker Desktop on Windows Docker Configuration Details The Docker for Windows installer defaults to enabling and running all the required settings necessary for this tutorial. After successful installation, the Docker icon (whale), appears on the task bar. To troubleshoot the installation, see the troubleshooting guide .","title":"Software"},{"location":"Docker/dockerCloud/#login-to-the-accounts","text":"To login: 1. Login to Microsoft Azure with the Azure CLI using the az command. Type the command in a Windows Command Prompt or Azure PowerShell. az login This command will invoke the default browser, which displays a login screen. 2. Login to the Docker hub account with the Docker ID and password. docker login --username [your Docker ID] --password [your Docker Hub Password]","title":"Login to the Accounts"},{"location":"Docker/dockerCloud/#build-the-repositories","text":"Build the MPS and RPS Docker images from their respective directories with the build -t command, giving the image a name and tag: docker build -t [name:tag] Create a name and tag with lowercase letters, digits, and separators (i.e., underscores, periods, and dashes). Do not end a name or tag with a separator. Tags contain up to 128 characters. Note Building a fresh Docker image may take several minutes. To build MPS : 1. Navigate to the MPS folder and build the Docker image. Execute a build and push for MPS . The docker push command with the -t or --tag option enables the naming and tagging of a build: docker push -t [docker-id][name:tag] cd parent directory\\mps docker build . -t f30911230045\\mps-microservice:v1 docker push f30911230045\\mps-microservice:v1 To build the RPS : 2. Navigate to the RPS folder and build the Docker image. Execute a build and push for RPS . cd ..\\rps docker build . -t f30911230032\\rps-microservice:v1 docker push f30911230032\\rps-microservice:v1","title":"Build the Repositories"},{"location":"Docker/dockerCloud/#deploy-the-images","text":"To deploy to the cloud: 1. After building the new MPS and RPS images, navigate to mps\\scripts\\docker-compose folder and use xcopy to copy the .env.template file to .env . The environment file .env.template contains the MPS and RPS environment variables to pass to the Docker engine. cd mps\\scripts\\docker-compose xcopy /Y .env.template .env Note Always preserve the .env.template file by copying it to a new file. 2. Set the image-related environment variables within the .env file: MPS_IMAGE=[name:tag from the build step] RPS_IMAGE=[name:tag from the build step] MPS_IMAGE=mps-microservice:v1 RPS_IMAGE=rps-microservice:v2 3. Set the proper proxy values if behind a proxy. set HTTP_PROXY=http://[your-proxy-server]:[your-proxy-server-port] set HTTPS_PROXY=http://[your-proxy-server]:[your-proxy-server-port] set HTTP_PROXY=http://10.3.4.52:8080 set HTTPS_PROXY=http://10.3.4.52:8080 Note If using a private Docker hub, set the password variable: DOCKER_LOGIN_PASSWORD=[your-docker-login-password] 4. Run the oact-stack-azure-vm.bat file. This file: Installs the Docker on the Microsoft Azure VM Runs the docker-compose up command. Copies the .env-template file to .env. oact-stack-azure-vm.bat [your-solution-name] [region (e.g.,: westus)] [ MPS -IMAGE] [ RPS -IMAGE] cd scripts\\docker-compose oact-stack-azure-vm.bat vprodemo westus 5. Log into Sample Web UI : When running the stack in Azure, there are a few adjustments that need to be made to access the Sample Web UI that are different than the docker deployment. - https needs to be specified in the URL. If using a self-signed certificate, the first time you access the Sample Web UI , this certificate will need to be accepted. - Use the FQDN of the Azure instance for the URL instead of the IP address. - 8443 is the exposed port on the API gateway, so this needs to be appended to the URL. https://test-instance.westus.azurecontainer.io:8443/ 6. Creating CIRA profile: When creating the CIRA profile on an Azure deployment, use the FQDN option and fill in the FQDN of the Azure instance. --insert screenshot here--","title":"Deploy the Images"},{"location":"Docker/dockerLocal/","text":"Express Setup \u00b6 This setup installs the MPS and RPS microservices as Docker* containers, standardized packages containing an application's source code, libraries, environment, and dependencies. Get the Toolkit \u00b6 To clone the repositories: Open a Terminal or Command Prompt and navigate to a directory of your choice for development: git clone --recursive https://github.com/open-amt-cloud-toolkit/open-amt-cloud-toolkit --branch v1.5.0 Change to the cloned open-amt-cloud-toolkit directory. cd open-amt-cloud-toolkit Set Environment Variables \u00b6 The .env.template file is used by docker to set environment variables. To set the environment variables: Copy the .env.template file to .env : Linux/Powershell cp .env.template .env Windows (Cmd Prompt) copy .env.template .env In a text editor or IDE of choice, open the new .env file to edit. Update the following fields for configuring the MPS and Sample Web UI . Save and keep track of the values you choose. Field Name Required Usage MPS_COMMON_NAME Development System IP Address. For connecting to MPS server via UI or APIs. WARNING: Do not use localhost. Use the development system IP Address. MPS_WEB_ADMIN_USER Username of your choice For logging into the Sample Web UI MPS_WEB_ADMIN_PASSWORD Strong password of your choice For logging into the Sample Web UI MPS_JWT_SECRET A strong secret of your choice (Example: A unique, random 256bit string. See another example in code snippet below ). Used when generating a JSON Web Token for authentication. This example implementation uses a symmetrical key and HS256 to create the signature. Learn more about JWT . Important - Using Strong Passwords The MPS_WEB_ADMIN_PASSWORD must meet standard, strong password requirements: 8 to 32 characters - One uppercase, one lowercase, one numerical digit, one special character \u00b6 Update the fields for setting up Vault. Field Name Required Usage RPS_VAULT_TOKEN String value of your choice. Must match MPS_VAULT_TOKEN . Root Token for accessing Vault. MPS_VAULT_TOKEN String value of your choice. Must match RPS_VAULT_TOKEN . Root Token for accessing Vault. Save the file. Set Kong JSON Web Token (JWT) \u00b6 Set the shared secret used in Kong for JWT authentication. Open the kong.yaml file. Update the secret field with your MPS_JWT_SECRET. jwt_secrets : - consumer : admin key : 9EmRJTbIiIb4bIeSsmgcWIjrR6HyETqc #sample key secret : \"Yq3t6w9z$C&E)H@McQfTjWnZr4u7x!A%\" #sample secret, DO NOT use for production Save and close the file. Build and Run the Docker Images \u00b6 Build the MPS , RPS , and Sample Web UI Docker images and launch the stack. Run docker-compose to start the containers from the ./open-amt-cloud-toolkit directory. Linux sudo docker-compose -f \"docker-compose.yml\" up -d --build Windows docker-compose -f \"docker-compose.yml\" up -d --build Important - For Windows* 10 While the docker-compose up command is running, you may see a number of pop-ups asking for permission for Docker Desktop Filesharing. You must select Share It for the docker-compose up command to execute successfully. If the pop-up expires, docker-compose up will fail. You must run docker-compose down -v and then rerun docker-compose up to successfully start the containers. Check that all of the containers are running. Linux sudo docker ps --format \"table {{.Image}}\\t{{.Status}}\\t{{.Names}}\" Windows docker ps --format \"table {{.Image}}\\t{{.Status}}\\t{{.Names}}\" Success IMAGE STATUS NAMES postgres Up 18 seconds open-amt-cloud-toolkit_db_1 kong:2.3 Up 17 seconds ( health: starting ) open-amt-cloud-toolkit_kong_1 eclipse-mosquitto Up 20 seconds open-amt-cloud-toolkit_mosquitto_1 webui:latest Up 23 seconds open-amt-cloud-toolkit_webui_1 rps:latest Up 24 seconds open-amt-cloud-toolkit_rps_1 vault Up 21 seconds open-amt-cloud-toolkit_vault_1 mpsrouter:latest Up 23 seconds open-amt-cloud-toolkit_mpsrouter_1 mps:latest Up 22 seconds open-amt-cloud-toolkit_mps_1 If any of the above containers are not running, walk through the steps again or file a GitHub issue here . Important Because the vault is running in a dev mode, stored secrets will be lost upon a restart, and profiles and configs must be recreated. They are not persistent in this mode. Be sure to run docker-compose down -v when bringing down the stack, which removes the volumes, and start fresh upon docker-compose up . To run vault in production mode, follow the guide here . Next up \u00b6 Login to Sample Web UI","title":"Set Up"},{"location":"Docker/dockerLocal/#express-setup","text":"This setup installs the MPS and RPS microservices as Docker* containers, standardized packages containing an application's source code, libraries, environment, and dependencies.","title":"Express Setup"},{"location":"Docker/dockerLocal/#get-the-toolkit","text":"To clone the repositories: Open a Terminal or Command Prompt and navigate to a directory of your choice for development: git clone --recursive https://github.com/open-amt-cloud-toolkit/open-amt-cloud-toolkit --branch v1.5.0 Change to the cloned open-amt-cloud-toolkit directory. cd open-amt-cloud-toolkit","title":"Get the Toolkit"},{"location":"Docker/dockerLocal/#set-environment-variables","text":"The .env.template file is used by docker to set environment variables. To set the environment variables: Copy the .env.template file to .env : Linux/Powershell cp .env.template .env Windows (Cmd Prompt) copy .env.template .env In a text editor or IDE of choice, open the new .env file to edit. Update the following fields for configuring the MPS and Sample Web UI . Save and keep track of the values you choose. Field Name Required Usage MPS_COMMON_NAME Development System IP Address. For connecting to MPS server via UI or APIs. WARNING: Do not use localhost. Use the development system IP Address. MPS_WEB_ADMIN_USER Username of your choice For logging into the Sample Web UI MPS_WEB_ADMIN_PASSWORD Strong password of your choice For logging into the Sample Web UI MPS_JWT_SECRET A strong secret of your choice (Example: A unique, random 256bit string. See another example in code snippet below ). Used when generating a JSON Web Token for authentication. This example implementation uses a symmetrical key and HS256 to create the signature. Learn more about JWT . Important - Using Strong Passwords The MPS_WEB_ADMIN_PASSWORD must meet standard, strong password requirements: 8 to 32 characters","title":"Set Environment Variables"},{"location":"Docker/dockerLocal/#-one-uppercase-one-lowercase-one-numerical-digit-one-special-character","text":"Update the fields for setting up Vault. Field Name Required Usage RPS_VAULT_TOKEN String value of your choice. Must match MPS_VAULT_TOKEN . Root Token for accessing Vault. MPS_VAULT_TOKEN String value of your choice. Must match RPS_VAULT_TOKEN . Root Token for accessing Vault. Save the file.","title":"- One uppercase, one lowercase, one numerical digit, one special character"},{"location":"Docker/dockerLocal/#set-kong-json-web-token-jwt","text":"Set the shared secret used in Kong for JWT authentication. Open the kong.yaml file. Update the secret field with your MPS_JWT_SECRET. jwt_secrets : - consumer : admin key : 9EmRJTbIiIb4bIeSsmgcWIjrR6HyETqc #sample key secret : \"Yq3t6w9z$C&E)H@McQfTjWnZr4u7x!A%\" #sample secret, DO NOT use for production Save and close the file.","title":"Set Kong JSON Web Token (JWT)"},{"location":"Docker/dockerLocal/#build-and-run-the-docker-images","text":"Build the MPS , RPS , and Sample Web UI Docker images and launch the stack. Run docker-compose to start the containers from the ./open-amt-cloud-toolkit directory. Linux sudo docker-compose -f \"docker-compose.yml\" up -d --build Windows docker-compose -f \"docker-compose.yml\" up -d --build Important - For Windows* 10 While the docker-compose up command is running, you may see a number of pop-ups asking for permission for Docker Desktop Filesharing. You must select Share It for the docker-compose up command to execute successfully. If the pop-up expires, docker-compose up will fail. You must run docker-compose down -v and then rerun docker-compose up to successfully start the containers. Check that all of the containers are running. Linux sudo docker ps --format \"table {{.Image}}\\t{{.Status}}\\t{{.Names}}\" Windows docker ps --format \"table {{.Image}}\\t{{.Status}}\\t{{.Names}}\" Success IMAGE STATUS NAMES postgres Up 18 seconds open-amt-cloud-toolkit_db_1 kong:2.3 Up 17 seconds ( health: starting ) open-amt-cloud-toolkit_kong_1 eclipse-mosquitto Up 20 seconds open-amt-cloud-toolkit_mosquitto_1 webui:latest Up 23 seconds open-amt-cloud-toolkit_webui_1 rps:latest Up 24 seconds open-amt-cloud-toolkit_rps_1 vault Up 21 seconds open-amt-cloud-toolkit_vault_1 mpsrouter:latest Up 23 seconds open-amt-cloud-toolkit_mpsrouter_1 mps:latest Up 22 seconds open-amt-cloud-toolkit_mps_1 If any of the above containers are not running, walk through the steps again or file a GitHub issue here . Important Because the vault is running in a dev mode, stored secrets will be lost upon a restart, and profiles and configs must be recreated. They are not persistent in this mode. Be sure to run docker-compose down -v when bringing down the stack, which removes the volumes, and start fresh upon docker-compose up . To run vault in production mode, follow the guide here .","title":"Build and Run the Docker Images"},{"location":"Docker/dockerLocal/#next-up","text":"Login to Sample Web UI","title":"Next up"},{"location":"Docker/dockerLocal_prodVault/","text":"Use Docker and Vault in Production Mode \u00b6 Introduction \u00b6 This document describes how to run MPS and RPS using vault in production server mode. The current local docker-compose file runs vault in development mode which makes experimenting with the services easier since static tokens can be used for access and unsealing vault is not required. The downside to this approach is all vault data is stored only in memory which is lost once the vault container is stopped. Running vault in production mode requires more steps but allows vault data to persist after container restarts. Update the vault section in the docker-compose file ( scripts\\docker-compose\\docker-compose.yaml ) with the section below: vault : image : vault container_name : prodvault environment : VAULT_ADDR : http://127.0.0.1:8200 ports : - \"8200:8200\" volumes : - private-volume:/vault/file:rw - ./vault:/vault/config:rw cap_add : - IPC_LOCK entrypoint : vault server -config=/vault/config/vault.json Create a folder named vault located in scripts\\docker-compose\\ and add a file named vault.json with the contents below: { \"backend\" :{ \"file\" :{ \"path\" : \"/vault/file\" } }, \"listener\" :{ \"tcp\" :{ \"address\" : \"0.0.0.0:8200\" , \"tls_disable\" : 1 } }, \"default_lease_ttl\" : \"168h\" , \"max_lease_ttl\" : \"0h\" , \"ui\" : true , \"log_level\" : \"Debug\" } Run docker command to start the stack: docker-compose up Run the following command to initialize the vault instance. docker exec -it prodvault vault operator init -n 1 -t 1 Make note of unseal key 1 and initial root token. Example Unseal Key 1: 0H8sK2QvVsqBKnUz6okBtDOqTVFSgJpdSKVe+colgXM= Initial Root Token: s.1glIfXnANPSnEmKLCzk4PQCO 5. Run the unseal command to decrypt the contents of the vault. Note: this step has to be performed each time the vault container is restarted. docker exec -it prodvault vault operator unseal [unseal key 1] Example docker exec -it prodvault vault operator unseal 0H8sK2QvVsqBKnUz6okBtDOqTVFSgJpdSKVe+colgXM= The response to the command should look similar to this: Key Value --- ----- Seal Type shamir Initialized true Sealed false Total Shares 1 Threshold 1 Version 1.6.0 Storage Type file Cluster Name vault-cluster-a39d7ef8 Cluster ID d1bc85f9-f405-44b3-0553-50f5e10b140e HA Enabled false 6. Login to vault with the following command using the initial root token: docker exec -it prodvault vault login [Initial Root Token] Example docker exec -it prodvault vault login s.1glIfXnANPSnEmKLCzk4PQCO 7. Enable the kv secrets engine docker exec -it prodvault vault secrets enable -version=2 kv 8. Update env variables located in scripts\\docker-compose\\.env a) Update vault tokens used in each service RPS_VAULT_TOKEN=[initial root token] MPS_VAULT_TOKEN=[initial root token] Example RPS_VAULT_TOKEN=s.1glIfXnANPSnEmKLCzk4PQCO MPS_VAULT_TOKEN=s.1glIfXnANPSnEmKLCzk4PQCO b) update secrets path MPS_SECRETS_PATH=kv/data/ RPS_SECRETS_PATH=kv/data/ 9. Press ctrl-c to stop the stack 10. Restart the stack using the command docker-compose up . 11. Rerun command in step 5 to unseal the vault.","title":"dockerLocal prodVault"},{"location":"Docker/dockerLocal_prodVault/#use-docker-and-vault-in-production-mode","text":"","title":"Use Docker and Vault in Production Mode"},{"location":"Docker/dockerLocal_prodVault/#introduction","text":"This document describes how to run MPS and RPS using vault in production server mode. The current local docker-compose file runs vault in development mode which makes experimenting with the services easier since static tokens can be used for access and unsealing vault is not required. The downside to this approach is all vault data is stored only in memory which is lost once the vault container is stopped. Running vault in production mode requires more steps but allows vault data to persist after container restarts. Update the vault section in the docker-compose file ( scripts\\docker-compose\\docker-compose.yaml ) with the section below: vault : image : vault container_name : prodvault environment : VAULT_ADDR : http://127.0.0.1:8200 ports : - \"8200:8200\" volumes : - private-volume:/vault/file:rw - ./vault:/vault/config:rw cap_add : - IPC_LOCK entrypoint : vault server -config=/vault/config/vault.json Create a folder named vault located in scripts\\docker-compose\\ and add a file named vault.json with the contents below: { \"backend\" :{ \"file\" :{ \"path\" : \"/vault/file\" } }, \"listener\" :{ \"tcp\" :{ \"address\" : \"0.0.0.0:8200\" , \"tls_disable\" : 1 } }, \"default_lease_ttl\" : \"168h\" , \"max_lease_ttl\" : \"0h\" , \"ui\" : true , \"log_level\" : \"Debug\" } Run docker command to start the stack: docker-compose up Run the following command to initialize the vault instance. docker exec -it prodvault vault operator init -n 1 -t 1 Make note of unseal key 1 and initial root token. Example Unseal Key 1: 0H8sK2QvVsqBKnUz6okBtDOqTVFSgJpdSKVe+colgXM= Initial Root Token: s.1glIfXnANPSnEmKLCzk4PQCO 5. Run the unseal command to decrypt the contents of the vault. Note: this step has to be performed each time the vault container is restarted. docker exec -it prodvault vault operator unseal [unseal key 1] Example docker exec -it prodvault vault operator unseal 0H8sK2QvVsqBKnUz6okBtDOqTVFSgJpdSKVe+colgXM= The response to the command should look similar to this: Key Value --- ----- Seal Type shamir Initialized true Sealed false Total Shares 1 Threshold 1 Version 1.6.0 Storage Type file Cluster Name vault-cluster-a39d7ef8 Cluster ID d1bc85f9-f405-44b3-0553-50f5e10b140e HA Enabled false 6. Login to vault with the following command using the initial root token: docker exec -it prodvault vault login [Initial Root Token] Example docker exec -it prodvault vault login s.1glIfXnANPSnEmKLCzk4PQCO 7. Enable the kv secrets engine docker exec -it prodvault vault secrets enable -version=2 kv 8. Update env variables located in scripts\\docker-compose\\.env a) Update vault tokens used in each service RPS_VAULT_TOKEN=[initial root token] MPS_VAULT_TOKEN=[initial root token] Example RPS_VAULT_TOKEN=s.1glIfXnANPSnEmKLCzk4PQCO MPS_VAULT_TOKEN=s.1glIfXnANPSnEmKLCzk4PQCO b) update secrets path MPS_SECRETS_PATH=kv/data/ RPS_SECRETS_PATH=kv/data/ 9. Press ctrl-c to stop the stack 10. Restart the stack using the command docker-compose up . 11. Rerun command in step 5 to unseal the vault.","title":"Introduction"},{"location":"Docker/overview/","text":"Prerequisites \u00b6 This section contains prerequisites for deploying Open AMT Cloud Toolkit 's MPS and RPS microservices on a local development system as Docker* containers. Figure 1: Deploy microservices on a local development system as Docker containers. What You'll Need \u00b6 Hardware \u00b6 Configure a network that includes: A development system At least one Intel vPro\u00ae Platform A flash drive or equivalent means to transfer files between Both systems must use a wired (i.e., cable) connection on the same network. Development System Software \u00b6 Before MPS and RPS installation, install the following software: Docker* Desktop for Windows or Linux Info Docker Configuration Details: (1) The Docker for Windows installer defaults to enable all the required settings for this tutorial. (2) After successful installation, the Docker icon (whale), will appear on the task bar. (3) To troubleshoot the installation, see the troubleshooting guide . git* What You'll Do \u00b6 To complete a deployment: Install the prerequisites. Run setup to build and deploy microservices with Docker. Login and configure RPS . Build RPC . Copy RPC to a managed device. To connect the managed device: Run RPC on a managed device. Manage the device with MPS . These sections include instructions for Windows and Linux* environments. Run instructions in a terminal window, the Windows Command Prompt in Administrator mode or the Linux shell/terminal. Why Docker*? \u00b6 A Docker container is the instantiation of a Docker image as a virtualized unit that separates the application from the environment. Docker containers start and run reliably, securely, and portably inside different environments, eliminating some of the problems that occur with software deployment on varying platforms. Docker streamlines installation to get you up and running faster. Get more information about Docker images and containers at Docker resources. Next up \u00b6 Setup - Build Docker* Images","title":"Prerequisites"},{"location":"Docker/overview/#prerequisites","text":"This section contains prerequisites for deploying Open AMT Cloud Toolkit 's MPS and RPS microservices on a local development system as Docker* containers. Figure 1: Deploy microservices on a local development system as Docker containers.","title":"Prerequisites"},{"location":"Docker/overview/#what-youll-need","text":"","title":"What You'll Need"},{"location":"Docker/overview/#hardware","text":"Configure a network that includes: A development system At least one Intel vPro\u00ae Platform A flash drive or equivalent means to transfer files between Both systems must use a wired (i.e., cable) connection on the same network.","title":"Hardware"},{"location":"Docker/overview/#development-system-software","text":"Before MPS and RPS installation, install the following software: Docker* Desktop for Windows or Linux Info Docker Configuration Details: (1) The Docker for Windows installer defaults to enable all the required settings for this tutorial. (2) After successful installation, the Docker icon (whale), will appear on the task bar. (3) To troubleshoot the installation, see the troubleshooting guide . git*","title":"Development System Software"},{"location":"Docker/overview/#what-youll-do","text":"To complete a deployment: Install the prerequisites. Run setup to build and deploy microservices with Docker. Login and configure RPS . Build RPC . Copy RPC to a managed device. To connect the managed device: Run RPC on a managed device. Manage the device with MPS . These sections include instructions for Windows and Linux* environments. Run instructions in a terminal window, the Windows Command Prompt in Administrator mode or the Linux shell/terminal.","title":"What You'll Do"},{"location":"Docker/overview/#why-docker","text":"A Docker container is the instantiation of a Docker image as a virtualized unit that separates the application from the environment. Docker containers start and run reliably, securely, and portably inside different environments, eliminating some of the problems that occur with software deployment on varying platforms. Docker streamlines installation to get you up and running faster. Get more information about Docker images and containers at Docker resources.","title":"Why Docker*?"},{"location":"Docker/overview/#next-up","text":"Setup - Build Docker* Images","title":"Next up"},{"location":"General/buildRPC/","text":"The Remote Provisioning Client ( RPC ), when executed on an Intel\u00ae Active Management Technology ( Intel\u00ae AMT ) device, works in concert with the Remote Provisioning Server ( RPS ) to setup the Intel\u00ae AMT firmware. Once properly configured, the remote device can call home to the Management Presence Server ( MPS ) by establishing a Client Initiated Remote Access ( CIRA ) connection with the MPS . After running the RPC , the Intel\u00ae AMT managed device can be managed remotely using the web interface! Production Environment In a production environment, RPC can be deployed with an in-band manageability agent to distribute it to the fleet of AMT devices. The in-band manageability agent can invoke RPC to run and activate the AMT devices. Figure 1: RPC Configuration Figure 1 Details The RPC on a managed device communicates with the Intel\u00ae Management Engine Interface (Intel\u00ae MEI, previously known as HECI) Driver and the Remote Provisioning Server ( RPS ) interfaces. The Driver uses the Intel\u00ae MEI to talk to Intel\u00ae AMT . The RPC activates Intel\u00ae AMT with an AMT profile, which is associated with a CIRA configuration (Step 3). The profile, which also distinguishes between Client Control Mode ( CCM ) or Admin Control Mode ( ACM ), and configuration were created in Create a CIRA Config or Create an AMT Profile . After running RPC with a profile, Intel\u00ae AMT will establish a CIRA connection with the MPS (Step 4) allowing MPS to manage the remote device and issue AMT commands (Step 5). Build RPC \u00b6 We leverage GitHub Actions as a means to build RPC automatically leveraging Github's CI/CD Infrastructure. This avoids having to deal with the challenges of getting your build environment just right on your local machine and allows you to get up and running much faster. However, if you wish to build and compile RPC locally, see Build & Run RPC (Manual) . Optionally, to build RPC with Docker, skip to Docker Build . Read more about GitHub Actions here . Github Actions \u00b6 To Build the RPC with Github Actions \u00b6 Create a fork of the repository. Choose your account to fork to. Fork rpc on github Click on the Actions tab at the top. Enable workflows by clicking I understand my workflows, go ahead and enable them . Type \"v\" to see the list of release branches from the Use workflow from dropdown. Select the v1.2.1 branch. By default, the Build Type should be release . Click the Run Workflow button. The build time ranges from 15 to 20 minutes. Once the download is complete, click the completed job which will feature a green checkmark. Download the appropriate RPC for your managed device's OS under the Artifacts section. Docker Build (For Linux Hosts) \u00b6 Keep in mind, the image created with this method is only suitable for Docker on a Linux host. To build RPC with Docker, use the following command from the open-amt-cloud-toolkit/rpc directory: docker build -f \"Dockerfile\" -t rpc:latest . Note If you wish to perform this docker build on Windows, ensure Use the WSL 2 based engine is enabled in Docker Desktop. Once the build is complete, you will need to get the built image to your Linux system running Docker. Run RPC to Activate and Connect the AMT Device \u00b6 To run the application and connect the managed device: After building the RPC , copy the executable to the managed device. On the managed device, open a Terminal (Linux) or Powershell/Command Prompt as Administrator (Windows). Navigate to the directory containing the RPC application. Run RPC with the following command to activate and configure Intel\u00ae AMT . It will take 1-2 minutes to finish provisioning the device. Replace [Development-IP-Address] with the development system's IP address, where the MPS and RPS servers are running. Replace [profile-name] with your created profile from the Web Server. The RPC application command line parameters are case sensitive. Linux sudo ./rpc -u wss:// [ Development-IP-Address ] /activate --nocertcheck -c \"-t activate --profile [profile-name]\" Docker (On Linux Host Only) sudo docker run --device = /dev/mei0 rpc:latest --url wss:// [ Development-IP-Address ] /activate --nocertcheck -c \"activate --profile [profile-name]\" Windows is not supported due to current limitations. See Devices in Containers on Windows for more information. Windows .\\rpc.exe -u wss://[Development-IP-Address]/activate --nocertcheck -c \"-t activate --profile [profile-name]\" Note - RPC Arguments Because we are using a self-signed certificate for easier development testing, we need to supply the nocertcheck flag. In production, you would opt for a CA signed certificate. Find out more information about the flag and other arguments . Success Example Output after Activating and Configuring a device into ACM : Troubleshooting Run into an issue? Try these troubleshooting steps . Next up \u00b6 Manage AMT Device","title":"Build & Run RPC"},{"location":"General/buildRPC/#build-rpc","text":"We leverage GitHub Actions as a means to build RPC automatically leveraging Github's CI/CD Infrastructure. This avoids having to deal with the challenges of getting your build environment just right on your local machine and allows you to get up and running much faster. However, if you wish to build and compile RPC locally, see Build & Run RPC (Manual) . Optionally, to build RPC with Docker, skip to Docker Build . Read more about GitHub Actions here .","title":"Build RPC"},{"location":"General/buildRPC/#github-actions","text":"","title":"Github Actions"},{"location":"General/buildRPC/#to-build-the-rpc-with-github-actions","text":"Create a fork of the repository. Choose your account to fork to. Fork rpc on github Click on the Actions tab at the top. Enable workflows by clicking I understand my workflows, go ahead and enable them . Type \"v\" to see the list of release branches from the Use workflow from dropdown. Select the v1.2.1 branch. By default, the Build Type should be release . Click the Run Workflow button. The build time ranges from 15 to 20 minutes. Once the download is complete, click the completed job which will feature a green checkmark. Download the appropriate RPC for your managed device's OS under the Artifacts section.","title":"To Build the RPC with Github Actions"},{"location":"General/buildRPC/#docker-build-for-linux-hosts","text":"Keep in mind, the image created with this method is only suitable for Docker on a Linux host. To build RPC with Docker, use the following command from the open-amt-cloud-toolkit/rpc directory: docker build -f \"Dockerfile\" -t rpc:latest . Note If you wish to perform this docker build on Windows, ensure Use the WSL 2 based engine is enabled in Docker Desktop. Once the build is complete, you will need to get the built image to your Linux system running Docker.","title":"Docker Build  (For Linux Hosts)"},{"location":"General/buildRPC/#run-rpc-to-activate-and-connect-the-amt-device","text":"To run the application and connect the managed device: After building the RPC , copy the executable to the managed device. On the managed device, open a Terminal (Linux) or Powershell/Command Prompt as Administrator (Windows). Navigate to the directory containing the RPC application. Run RPC with the following command to activate and configure Intel\u00ae AMT . It will take 1-2 minutes to finish provisioning the device. Replace [Development-IP-Address] with the development system's IP address, where the MPS and RPS servers are running. Replace [profile-name] with your created profile from the Web Server. The RPC application command line parameters are case sensitive. Linux sudo ./rpc -u wss:// [ Development-IP-Address ] /activate --nocertcheck -c \"-t activate --profile [profile-name]\" Docker (On Linux Host Only) sudo docker run --device = /dev/mei0 rpc:latest --url wss:// [ Development-IP-Address ] /activate --nocertcheck -c \"activate --profile [profile-name]\" Windows is not supported due to current limitations. See Devices in Containers on Windows for more information. Windows .\\rpc.exe -u wss://[Development-IP-Address]/activate --nocertcheck -c \"-t activate --profile [profile-name]\" Note - RPC Arguments Because we are using a self-signed certificate for easier development testing, we need to supply the nocertcheck flag. In production, you would opt for a CA signed certificate. Find out more information about the flag and other arguments . Success Example Output after Activating and Configuring a device into ACM : Troubleshooting Run into an issue? Try these troubleshooting steps .","title":"Run RPC to Activate and Connect the AMT Device"},{"location":"General/buildRPC/#next-up","text":"Manage AMT Device","title":"Next up"},{"location":"General/createCIRAConfig/","text":"Client Initiated Remote Access ( CIRA ) enables a CIRA -capable edge device to initiate and establish a persistent connection to the MPS . As long as the managed device is connected to the network and to a power source, it can maintain a persistent connection. Note - Wireless Activations This express setup assumes the managed device (i.e. AMT device) is on a wired connection for quickest setup. To learn more about a Wireless Setup, see the Wireless Activation Tutorial . To create a CIRA Config: Select the CIRA Configs tab from the left-hand menu. In the top-right corner, click Add New. Figure 1: Create a new CIRA Config. Specify a Config Name of your choice. Select IPv4 , and provide your development system's IP Address. Cert Common Name (CN=) should auto-populate. If not, provide your development system's IP Address. Leave Port as the default, 4433. Leave the Username as admin or choose your own. These credentials will be used when constructing API calls. Leave the slider set on Auto-load . Click Save. Example CIRA Config Figure 2: Example CIRA Config. Next up \u00b6 Profiles provide configuration information to the AMT Firmware during the activation process with the Remote Provisioning Client ( RPC ). Profiles also distinguish between activating in: Client Control Mode ( CCM ): This mode offers nearly all manageability features including, but not limited to, power control, audit logs, and hardware info. While Intel\u00ae AMT includes redirection features such as KVM while using user consent in CCM , the Open AMT Cloud Toolkit does not currently support doing so. Create a CCM Profile Admin Control Mode ( ACM ): ACM mode supports all manageability features without requiring user consent . This means it is not necessary to have a person on-site to remote in and manage an edge device. In most IoT use cases, edge devices such as digital signage or kiosks may not be easily accessible or have available employees nearby. ACM mode proves immensely helpful in these scenarios. Create an ACM Profile","title":"Create a CIRA Config"},{"location":"General/createCIRAConfig/#next-up","text":"Profiles provide configuration information to the AMT Firmware during the activation process with the Remote Provisioning Client ( RPC ). Profiles also distinguish between activating in: Client Control Mode ( CCM ): This mode offers nearly all manageability features including, but not limited to, power control, audit logs, and hardware info. While Intel\u00ae AMT includes redirection features such as KVM while using user consent in CCM , the Open AMT Cloud Toolkit does not currently support doing so. Create a CCM Profile Admin Control Mode ( ACM ): ACM mode supports all manageability features without requiring user consent . This means it is not necessary to have a person on-site to remote in and manage an edge device. In most IoT use cases, edge devices such as digital signage or kiosks may not be easily accessible or have available employees nearby. ACM mode proves immensely helpful in these scenarios. Create an ACM Profile","title":"Next up"},{"location":"General/createProfileACM/","text":"Admin Control Mode ( ACM ) provides full access to Intel\u00ae Active Management Technology ( Intel\u00ae AMT ) functionality. User consent is optional for redirection features. Figure 1: Set up configuration and profiles for N number of clients. What You'll Need \u00b6 Provisioning Certificate \u00b6 By purchasing a certificate, you'll be able to remotely activate an Intel\u00ae AMT device in ACM . This feature enables you to disable User Consent. Provisioning Certificates are available from four different Certificate Authorities: Comodo DigiCert Entrust GoDaddy Important For ACM in Open Active Management Technology (Open AMT) Cloud Toolkit, use only certificate vendors that support Intel\u00ae AMT . DNS Suffix \u00b6 The DNS suffix encompasses the domain suffix (e.g., .com) and follows the hostname. Consider the following DNS Name example: Example DNS Name: cb-vending1.burgerbusiness.com In this example, the hostname is cb-vending1 and the DNS suffix is burgerbusiness.com. To set the DNS suffix : Manually set it using MEBX on the managed device. Find instructions here Alternately, change the DHCP Option 15 to DNS suffix within the Router settings. To find the the DNS suffix , use the following command: Linux ifconfig Windows ipconfig /all Create a Profile \u00b6 A Profile provides configuration information to the AMT Firmware during the activation process with the Remote Provisioning Client ( RPC ). Production Environment In a production environment, devices are typically activated in ACM mode. ACM mode enables KVM access to devices without user consent. In most IoT use cases, edge devices such as digital signage or kiosks may not have immediate access to it or employees nearby. ACM mode proves immensely helpful in these scenarios. To create an ACM profile: Select the Profiles tab from the menu on the left. Under the Profiles tab, click Add New in the top-right corner to create a profile. Figure 1: Create a new profile. Specify a Profile Name of your choice. Under Activation , select Admin Control Mode from the dropdown menu. Provide or generate a strong AMT Password . AMT will verify this password when receiving a command from a MPS server. Tip The two buttons next to the password input are for toggling visibility and generating a new random password. Please note that if the Vault database is lost or corrupted, all credentials that aren't also stored somewhere else will be lost. There will be no way to login. The administrator will have to clear the CMOS battery on the managed devices! Provide or generate a strong MEBX Password . This password can be used to access Intel\u00ae Manageability Engine BIOS Extensions ( Intel\u00ae MEBX ) on the AMT device. Select DHCP as Network Configuration . Select the name of the CIRA Configuration you created previously from the drop-down menu. This express setup assumes the managed device (i.e. AMT device) is on a wired connection for quickest setup. To learn more about a Wireless Setup, see the Wireless Activation Tutorial . Optionally, add Tags to help in organizing and querying devices as your list of managed devices grow. Click Save. Example ACM Profile Figure 2: Example ACM profile. Create a Domain Profile \u00b6 In addition to a CIRA Config and an ACM Profile , ACM requires the creation of a Domain profile. Intel\u00ae AMT checks the network DNS suffix against the provisioning certificate as a security check. During provisioning, the trusted certificate chain is injected into the AMT firmware. AMT verifies that the certificate chain is complete and is signed by a trusted certificate authority. To create a domain: Select the Domains tab from the left-hand menu. In the top-right corner, click Add New. Figure 3: Create Domain. Specify a name of your choice for the Domain Profile for the Name field. This does not have to be the actual network Domain Name/Suffix. Provide your DNS suffix as the Domain Name . This is the actual DNS suffix of the network domain that is set in DHCP Option 15 or manually on the AMT device through MEBX. Click Choose File and select your purchased Provisioning Certificate. This certificate must contain the private key. Provide the Provisioning Certificate Password used to encrypt the .pfx file. Click Save. Example Domain Figure 4: Example Domain profile. Next Up \u00b6 Build & Run RPC","title":"Create a Profile with ACM"},{"location":"General/createProfileACM/#what-youll-need","text":"","title":"What You'll Need"},{"location":"General/createProfileACM/#provisioning-certificate","text":"By purchasing a certificate, you'll be able to remotely activate an Intel\u00ae AMT device in ACM . This feature enables you to disable User Consent. Provisioning Certificates are available from four different Certificate Authorities: Comodo DigiCert Entrust GoDaddy Important For ACM in Open Active Management Technology (Open AMT) Cloud Toolkit, use only certificate vendors that support Intel\u00ae AMT .","title":"Provisioning Certificate"},{"location":"General/createProfileACM/#dns-suffix","text":"The DNS suffix encompasses the domain suffix (e.g., .com) and follows the hostname. Consider the following DNS Name example: Example DNS Name: cb-vending1.burgerbusiness.com In this example, the hostname is cb-vending1 and the DNS suffix is burgerbusiness.com. To set the DNS suffix : Manually set it using MEBX on the managed device. Find instructions here Alternately, change the DHCP Option 15 to DNS suffix within the Router settings. To find the the DNS suffix , use the following command: Linux ifconfig Windows ipconfig /all","title":"DNS Suffix"},{"location":"General/createProfileACM/#create-a-profile","text":"A Profile provides configuration information to the AMT Firmware during the activation process with the Remote Provisioning Client ( RPC ). Production Environment In a production environment, devices are typically activated in ACM mode. ACM mode enables KVM access to devices without user consent. In most IoT use cases, edge devices such as digital signage or kiosks may not have immediate access to it or employees nearby. ACM mode proves immensely helpful in these scenarios. To create an ACM profile: Select the Profiles tab from the menu on the left. Under the Profiles tab, click Add New in the top-right corner to create a profile. Figure 1: Create a new profile. Specify a Profile Name of your choice. Under Activation , select Admin Control Mode from the dropdown menu. Provide or generate a strong AMT Password . AMT will verify this password when receiving a command from a MPS server. Tip The two buttons next to the password input are for toggling visibility and generating a new random password. Please note that if the Vault database is lost or corrupted, all credentials that aren't also stored somewhere else will be lost. There will be no way to login. The administrator will have to clear the CMOS battery on the managed devices! Provide or generate a strong MEBX Password . This password can be used to access Intel\u00ae Manageability Engine BIOS Extensions ( Intel\u00ae MEBX ) on the AMT device. Select DHCP as Network Configuration . Select the name of the CIRA Configuration you created previously from the drop-down menu. This express setup assumes the managed device (i.e. AMT device) is on a wired connection for quickest setup. To learn more about a Wireless Setup, see the Wireless Activation Tutorial . Optionally, add Tags to help in organizing and querying devices as your list of managed devices grow. Click Save. Example ACM Profile Figure 2: Example ACM profile.","title":"Create a Profile"},{"location":"General/createProfileACM/#create-a-domain-profile","text":"In addition to a CIRA Config and an ACM Profile , ACM requires the creation of a Domain profile. Intel\u00ae AMT checks the network DNS suffix against the provisioning certificate as a security check. During provisioning, the trusted certificate chain is injected into the AMT firmware. AMT verifies that the certificate chain is complete and is signed by a trusted certificate authority. To create a domain: Select the Domains tab from the left-hand menu. In the top-right corner, click Add New. Figure 3: Create Domain. Specify a name of your choice for the Domain Profile for the Name field. This does not have to be the actual network Domain Name/Suffix. Provide your DNS suffix as the Domain Name . This is the actual DNS suffix of the network domain that is set in DHCP Option 15 or manually on the AMT device through MEBX. Click Choose File and select your purchased Provisioning Certificate. This certificate must contain the private key. Provide the Provisioning Certificate Password used to encrypt the .pfx file. Click Save. Example Domain Figure 4: Example Domain profile.","title":"Create a Domain Profile"},{"location":"General/createProfileACM/#next-up","text":"Build & Run RPC","title":"Next Up"},{"location":"General/createProfileCCM/","text":"Client Control Mode ( CCM ) provides full access to features of Intel\u00ae Active Management Technology ( Intel\u00ae AMT ), but it does require user consent for all redirection features. While Intel\u00ae AMT includes the ability to use the features listed below with user consent in CCM , the Open AMT Cloud Toolkit does not currently support it. These features require user consent: Keyboard, Video, Mouse ( KVM ) Control IDE-Redirection for sharing and mounting images remotely Serial-over-LAN ( SOL ) Figure 1: Set up configuration and profiles for N number of clients. Create a Profile \u00b6 Profiles provide configuration information to the firmware on platforms featuring Intel\u00ae AMT during the activation process with the Remote Provisioning Client ( RPC ). To create a CCM profile: Select the Profiles tab from the menu on the left. Under the Profiles tab, click New in the top-right corner to create a profile. Figure 1: Create a new profile. Specify a Profile Name of your choice. Under Activation Mode , select Client Control Mode from the dropdown menu. Provide or generate a strong AMT Password . AMT will verify this password when receiving a command from a MPS server. Tip The two buttons next to the password input are for toggling visibility and generating a new random password. Please note that if the Vault database is lost or corrupted, all credentials that aren't also stored somewhere else will be lost. There will be no way to login. The administrator will have to clear the CMOS battery on the managed devices! The MEBX Password field is disabled, as the password for Intel\u00ae Manageability Engine BIOS Extensions ( Intel\u00ae MEBX ) cannot be set when activating in CCM due to the lower level of trust when compared to ACM . Select DHCP as Network Configuration . Select the name of the CIRA Configuration you created previously from the drop-down menu. This express setup assumes the managed device (i.e. AMT device) is on a wired connection for quickest setup. To learn more about a Wireless Setup, see the Wireless Activation Tutorial . Optionally, add Tags to help in organizing and querying devices as your list of managed devices grow. Click Save. Example CCM Profile Figure 2: Example CCM profile. Next up \u00b6 Build & Run RPC","title":"Create a Profile with CCM"},{"location":"General/createProfileCCM/#create-a-profile","text":"Profiles provide configuration information to the firmware on platforms featuring Intel\u00ae AMT during the activation process with the Remote Provisioning Client ( RPC ). To create a CCM profile: Select the Profiles tab from the menu on the left. Under the Profiles tab, click New in the top-right corner to create a profile. Figure 1: Create a new profile. Specify a Profile Name of your choice. Under Activation Mode , select Client Control Mode from the dropdown menu. Provide or generate a strong AMT Password . AMT will verify this password when receiving a command from a MPS server. Tip The two buttons next to the password input are for toggling visibility and generating a new random password. Please note that if the Vault database is lost or corrupted, all credentials that aren't also stored somewhere else will be lost. There will be no way to login. The administrator will have to clear the CMOS battery on the managed devices! The MEBX Password field is disabled, as the password for Intel\u00ae Manageability Engine BIOS Extensions ( Intel\u00ae MEBX ) cannot be set when activating in CCM due to the lower level of trust when compared to ACM . Select DHCP as Network Configuration . Select the name of the CIRA Configuration you created previously from the drop-down menu. This express setup assumes the managed device (i.e. AMT device) is on a wired connection for quickest setup. To learn more about a Wireless Setup, see the Wireless Activation Tutorial . Optionally, add Tags to help in organizing and querying devices as your list of managed devices grow. Click Save. Example CCM Profile Figure 2: Example CCM profile.","title":"Create a Profile"},{"location":"General/createProfileCCM/#next-up","text":"Build & Run RPC","title":"Next up"},{"location":"General/createWiFiConfig/","text":"Important - Windows 10 Supported Only This feature is currently only supported for systems on Windows 10 operating systems. After activation and configuration of an AMT device with a wireless profile, remote devices can be managed wirelessly. For devices to be activated in Client Control Mode ( CCM ) : The managed, AMT device can be activated and configured on a wireless connection. For devices to be activated in Admin Control Mode ( ACM ) : The managed, AMT device MUST have a wired connection during the activation of AMT. After activation, devices are then able to be managed over the wireless network rather than a wired connection. Find if a Device Support Wireless \u00b6 RPC can pull information to help determine if your current device supports wireless functionality. See Build RPC for steps on how to obtain the binary. Run RPC with the --amtinfo all argument. Linux sudo ./rpc --amtinfo all \" Windows .\\rpc.exe --amtinfo all\" Look at the output for the LAN Interface section as highlighted below. If RPC does NOT return a section for wireless , then the AMT device does not support wireless functionality. Version : 15.0.10 Build Number : 1447 SKU : 16392 UUID : 4c4b4568-195a-4260-8097-a4c14f566733 Control Mode : pre-provisioning state DNS Suffix : vprodemo.com DNS Suffix (OS) : FQDN : Hostname (OS) : DESKTOP-3YM6MPN RAS Network : outside enterprise RAS Remote Status : not connected RAS Trigger : user initiated RAS MPS Hostname : LAN Inteface : wired DHCP Enabled : true DHCP Mode : passive Link Status : up IP Address : 0.0.0.0 MAC Address : 80:c4:a8:58:df:e9 LAN Inteface : wireless DHCP Enabled : true DHCP Mode : passive Link Status : down IP Address : 0.0.0.0 MAC Address : 00:00:00:00:00:00 Certificate Hashes : ... Create a WiFi Config \u00b6 Select the Wireless tab from the left-hand menu. In the top-right corner, click Add New. Figure 1: Create a new WiFi Config. Specify a Wireless Profile Name of your choice. Under Authentication Method , select WPA PSK or WPA2 PSK . Under Encryption Method , select TKIP or CCMP . Specify a SSID . This is the name of your wireless network. Provide a strong PSK Passphrase . This is the password to the WiFi Network. Click Save. Example Wireless Profile Figure 2: Example Wireless Profile . Important : After saving, continue on to create either a CCM or ACM profile. When prompted, search for and select your new Wireless Profile from the drop-down menu. The selected Wi-Fi Profiles will be shown under Associated Wireless Profiles and can be re-ordered by dragging them to give priority. Example - Select Wireless Profile Figure 3: Selection of Wireless Profile in CCM / ACM Profile Next up \u00b6 Profiles provide configuration information to the AMT Firmware during the activation process with the Remote Provisioning Client ( RPC ). Profiles also distinguish between activating in: Client Control Mode ( CCM ): This mode offers nearly all manageability features including, but not limited to, power control, audit logs, and hardware info. While Intel\u00ae AMT includes redirection features such as KVM while using user consent in CCM , the Open AMT Cloud Toolkit does not currently support doing so. Create a CCM Profile Admin Control Mode ( ACM ): ACM mode supports all manageability features without requiring user consent . This means it is not necessary to have a person on-site to remote in and manage an edge device. In most IoT use cases, edge devices such as digital signage or kiosks may not be easily accessible or have available employees nearby. ACM mode proves immensely helpful in these scenarios. Create an ACM Profile","title":"Wireless Activation"},{"location":"General/createWiFiConfig/#find-if-a-device-support-wireless","text":"RPC can pull information to help determine if your current device supports wireless functionality. See Build RPC for steps on how to obtain the binary. Run RPC with the --amtinfo all argument. Linux sudo ./rpc --amtinfo all \" Windows .\\rpc.exe --amtinfo all\" Look at the output for the LAN Interface section as highlighted below. If RPC does NOT return a section for wireless , then the AMT device does not support wireless functionality. Version : 15.0.10 Build Number : 1447 SKU : 16392 UUID : 4c4b4568-195a-4260-8097-a4c14f566733 Control Mode : pre-provisioning state DNS Suffix : vprodemo.com DNS Suffix (OS) : FQDN : Hostname (OS) : DESKTOP-3YM6MPN RAS Network : outside enterprise RAS Remote Status : not connected RAS Trigger : user initiated RAS MPS Hostname : LAN Inteface : wired DHCP Enabled : true DHCP Mode : passive Link Status : up IP Address : 0.0.0.0 MAC Address : 80:c4:a8:58:df:e9 LAN Inteface : wireless DHCP Enabled : true DHCP Mode : passive Link Status : down IP Address : 0.0.0.0 MAC Address : 00:00:00:00:00:00 Certificate Hashes : ...","title":"Find if a Device Support Wireless"},{"location":"General/createWiFiConfig/#create-a-wifi-config","text":"Select the Wireless tab from the left-hand menu. In the top-right corner, click Add New. Figure 1: Create a new WiFi Config. Specify a Wireless Profile Name of your choice. Under Authentication Method , select WPA PSK or WPA2 PSK . Under Encryption Method , select TKIP or CCMP . Specify a SSID . This is the name of your wireless network. Provide a strong PSK Passphrase . This is the password to the WiFi Network. Click Save. Example Wireless Profile Figure 2: Example Wireless Profile . Important : After saving, continue on to create either a CCM or ACM profile. When prompted, search for and select your new Wireless Profile from the drop-down menu. The selected Wi-Fi Profiles will be shown under Associated Wireless Profiles and can be re-ordered by dragging them to give priority. Example - Select Wireless Profile Figure 3: Selection of Wireless Profile in CCM / ACM Profile","title":"Create a WiFi Config"},{"location":"General/createWiFiConfig/#next-up","text":"Profiles provide configuration information to the AMT Firmware during the activation process with the Remote Provisioning Client ( RPC ). Profiles also distinguish between activating in: Client Control Mode ( CCM ): This mode offers nearly all manageability features including, but not limited to, power control, audit logs, and hardware info. While Intel\u00ae AMT includes redirection features such as KVM while using user consent in CCM , the Open AMT Cloud Toolkit does not currently support doing so. Create a CCM Profile Admin Control Mode ( ACM ): ACM mode supports all manageability features without requiring user consent . This means it is not necessary to have a person on-site to remote in and manage an edge device. In most IoT use cases, edge devices such as digital signage or kiosks may not be easily accessible or have available employees nearby. ACM mode proves immensely helpful in these scenarios. Create an ACM Profile","title":"Next up"},{"location":"General/loginToRPS/","text":"The web portal is available for login after the deployment of the MPS , RPS , and Sample Web UI . Make sure all three are successfully running before attempting to login. Example Passwords Open AMT Cloud Toolkit increases security with multiple passwords. Find an explanation of toolkit passwords in Components -> Overview . Log In \u00b6 Open any modern web browser and navigate to the following link. https://<Development-IP-Address> Important - URL of Sample Web UI You must use the development system's IP address in the URL. Localhost or 127.0.0.1 will NOT work . Read more about Kong API Gateway to find out why . The development system's IP address is where the Docker containers are running. A warning screen will prompt because the MPS Server is using self-signed certificates for testing. Click Advanced and then Proceed to continue to connect to the Sample Web UI . Example - Chrome* Browser Warning Screen Log in to the web portal with the login credentials set for the environment variables MPS_WEB_ADMIN_USER and MPS_WEB_ADMIN_PASSWORD in the .env file. The home page is shown below in Figure 1. Example - Sample Web UI Home Page Next up \u00b6 Create a CIRA Config","title":"Login to Sample Web UI"},{"location":"General/loginToRPS/#log-in","text":"Open any modern web browser and navigate to the following link. https://<Development-IP-Address> Important - URL of Sample Web UI You must use the development system's IP address in the URL. Localhost or 127.0.0.1 will NOT work . Read more about Kong API Gateway to find out why . The development system's IP address is where the Docker containers are running. A warning screen will prompt because the MPS Server is using self-signed certificates for testing. Click Advanced and then Proceed to continue to connect to the Sample Web UI . Example - Chrome* Browser Warning Screen Log in to the web portal with the login credentials set for the environment variables MPS_WEB_ADMIN_USER and MPS_WEB_ADMIN_PASSWORD in the .env file. The home page is shown below in Figure 1. Example - Sample Web UI Home Page","title":"Log In"},{"location":"General/loginToRPS/#next-up","text":"Create a CIRA Config","title":"Next up"},{"location":"General/manageDevice/","text":"Go back to the Sample Web UI on your development system. Click the Devices tab from the menu on the left. Troubleshooting If the activated device is not listed or if it is listed as unconnected, try restarting the AMT device. After successfully restarting the device, refresh the Sample Web UI to see if the Status changes to connected . Click on your connected device. Select an action to perform from the options in the top-right. Note If activated into Client Control Mode( CCM ), the KVM and SOL features will not function in the current release. To use KVM / SOL , follow the ACM Activation Tutorial to see how to configure a device into Admin Control Mode. Note Activated in Admin Control Mode already? Try out the Keyboard, Video, Mouse ( KVM ) feature to remotely view and control the AMT device. Issue a Reset to BIOS command and be able to view and make live changes to BIOS settings. Next steps \u00b6 After successfully deploying the Open AMT Cloud Toolkit microservices and client, explore other tools and topics in the Open AMT Cloud Toolkit architecture: REST API Calls \u00b6 Use the REST API tutorial to construct an Authorize API call to get a JWT Token as well as a Devices API call to see connected devices using node.js. Then, modify the template to create other MPS REST API calls. Get Started with REST API Calls UI Toolkit \u00b6 Explore the Open AMT Cloud Toolkit reference implementation console by adding manageability features with prebuilt React components, such as Keyboard, Video, and Mouse ( KVM ). Get Started with the UI Toolkit Security \u00b6 Learn how to use the Open AMT Cloud Toolkit architecture to secure assets. Topics include credentials, allowlisting, best known security methods, and more. Learn More about Security and Hardening","title":"Manage AMT Device"},{"location":"General/manageDevice/#next-steps","text":"After successfully deploying the Open AMT Cloud Toolkit microservices and client, explore other tools and topics in the Open AMT Cloud Toolkit architecture:","title":"Next steps"},{"location":"General/manageDevice/#rest-api-calls","text":"Use the REST API tutorial to construct an Authorize API call to get a JWT Token as well as a Devices API call to see connected devices using node.js. Then, modify the template to create other MPS REST API calls. Get Started with REST API Calls","title":"REST API Calls"},{"location":"General/manageDevice/#ui-toolkit","text":"Explore the Open AMT Cloud Toolkit reference implementation console by adding manageability features with prebuilt React components, such as Keyboard, Video, and Mouse ( KVM ). Get Started with the UI Toolkit","title":"UI Toolkit"},{"location":"General/manageDevice/#security","text":"Learn how to use the Open AMT Cloud Toolkit architecture to secure assets. Topics include credentials, allowlisting, best known security methods, and more. Learn More about Security and Hardening","title":"Security"},{"location":"Kubernetes/deployingk8s-aks/","text":"Azure Kubernetes Service ( AKS ) \u00b6 This tutorial demonstrates how to deploy the Open AMT Cloud Toolkit on a Kubernetes cluster using AKS . Alternatively, you can also perform a simpler, test deployment using a single-node cluster locally. See Kubernetes (K8s) . Azure Kubernetes Service ( AKS ) offers serverless Kubernetes, an integrated continuous integration and continuous delivery (CI/CD) experience, and enterprise-grade security and governance. Learn more about AKS here . Prerequisites \u00b6 Docker Desktop kubectl Azure CLI (v2.24.0+) Helm CLI (v3.5+) Create SSH Key \u00b6 This key is required by Azure to create VMs that use SSH keys for authentication. For more details, see Detailed steps: Create and manage SSH keys . Create a new ssh key. ssh-keygen -t rsa -b 2048 Take note of the location it was saved at. You will need the public key ( .pub file) in a following step. Deploy AKS \u00b6 Login to Azure. az login Additionally, you can verify the correct subscription is set. az account show Provide a name to create a new resource group. az group create --name <your-resource-group-name> --location eastus Provide the name of your new resource group from the last step and start a deployment at that resource group based on aks.json . az deployment group create --resource-group <your-resource-group-name> --template-file aks.json After running the previous command, you will be prompted for 3 different strings. After the final prompt, it will take about 5 minutes to finish running. Provide a name for the AKS Cluster. Provide a name (e.g. your name) for the linux user admin name. Provide the string of the ssh key from the .pub file. Take note of the fqdnSuffix in the outputs section of the JSON response (e.g. eastus.cloudapp.azure.com ) \"outputs\" : { \"controlPlaneFQDN\" : { \"type\" : \"String\" , \"value\" : \"bwcluster-9c68035a.hcp.westus.azmk8s.io\" }, \"fqdnSuffix\" : { \"type\" : \"String\" , \"value\" : \"eastus.cloudapp.azure.com\" } }, Connect to AKS Instance \u00b6 Ensure your kubectl is connected to the Kubernetes cluster you wish to deploy/manage. Provide your resource group name and cluster name, respectively. az aks get-credentials --resource-group <your-resource-group-name> --name <your-cluster-name> Create Secrets \u00b6 1. Private Docker Registry Credentials \u00b6 If you are using a private docker registry, you'll need to provide your credentials to K8S. kubectl create secret docker-registry registrycredentials --docker-server = <your-registry-server> --docker-username = <your-username> --docker-password = <your-password> Where: <your-registry-server> is your Private Docker Registry FQDN. <your-username> is your Docker username. <your-password> is your Docker password. 2. MPS /KONG JWT \u00b6 This is the secret used for generating and verifying JWTs. kubectl create secret generic open-amt-admin-jwt --from-literal=kongCredType=jwt --from-literal=key=\"admin-issuer\" --from-literal=algorithm=HS256 --from-literal=secret=\"<your-secret>\" Where: <your-secret> is your chosen strong secret. 3. KONG ACL for JWT \u00b6 This configures KONG with an Access Control List (ACL) to allow an admin user open-amt-admin to access endpoints using the JWT retrieved when logging in. kubectl create secret generic open-amt-admin-acl --from-literal=kongCredType=acl --from-literal=group=open-amt-admin 4. MPS Web Username and Password \u00b6 This is the username and password that is used for requesting a JWT. These credentials are also used for logging into the Sample Web UI . kubectl create secret generic mpsweb --from-literal=user=<your-username> --from-literal=password=<your-password> Where: <your-username> is a username of your choice. <your-password> is a strong password of your choice. Important The password must meet standard, strong password requirements: 8 to 32 characters One uppercase, one lowercase, one numerical digit, one special character 5. Azure Storage Account Key \u00b6 Currently, we leverage Azure Storage Accounts for persistent storage of MPS certificates that can be shared by multiple instances of MPS . This creates the secret to access the provisioned Azure Storage account for use in a persistent volume (PV). Note This will likely change in a future release kubectl create secret generic azure-secret --from-literal=azurestorageaccountname=<your-cluster-name>stg --from-literal=azurestorageaccountkey=<your-storage-key> Where: <your-cluster-name> is the cluster name chosen in Deploy AKS . <your-storage-key> is one of the generated access keys of the storage account. Important - Finding Access Keys An access key can be found by either: Run az storage account keys list --account-name <your-cluster-name>stg to view access keys. Navigate to Home > Storage accounts > cluster-name > Access keys using Microsoft Azure via online. Update Configuration \u00b6 Open the values.yaml file in ./open-amt-cloud-toolkit/kubernetes/charts/ . Update the service.beta.kubernetes.io/azure-dns-label-name key in the kong: section with the desired DNS name you would like for your cluster (i.e. myopenamtk8s). kong : proxy : annotations : service.beta.kubernetes.io/azure-dns-label-name : \"<your-domain-name>\" Update the mps , rps , webui , and mpsrouter keys to point to your own container registries. images : mps : \"vprodemo.azurecr.io/mps:latest\" rps : \"vprodemo.azurecr.io/rps:latest\" webui : \"vprodemo.azurecr.io/webui:latest\" mpsrouter : \"vprodemo.azurecr.io/mpsrouter:latest\" postgresdb : \"postgres:13\" Update the following keys in the mps section. Key Name Update to Description commonName FQDN for your cluster For AKS , the format is <your-domain-name>.<location>.cloudapp.azure.com . This is the fqdnSuffix provided in the outputs section when you Deploy AKS . storageAccessMode ReadWriteMany Must set to ReadWriteMany to scale. The default access mode for storage ( storageAccessMode ) is set to ReadWriteOnce . This only works with a one node cluster. mps : commonName : \"<your-domain-name>.<location>.cloudapp.azure.com\" # storageClassName: \"\" storageAccessMode : \"ReadWriteOnce\" #Change to ReadWriteMany replicaCount : 1 logLevel : \"silly\" connectionString : \"postgresql://postgresadmin:admin123@postgres:5432/mpsdb\" jwtExpiration : 1440 Save and close the file. Provide a PersistentVolume that can match the PersisentVolumeClaim for MPS . For an AKS deployment, you can use the following example YAML. It is provided in ./kubernetes/charts/volumes/azure.yaml . Note Changing storageAccessMode will update the PersistentVolumeClaim to request ReadWriteMany , this means you'll need to provide a PersistentVolume that can match that claim. The Azure deployment performed in Deploy AKS creates a Storage Account that can be used. Use the following yaml to provision the volume for the cluster. Provided azure.yaml Example apiVersion : v1 kind : PersistentVolume metadata : name : mps-certs spec : capacity : storage : 1Gi accessModes : - ReadWriteMany azureFile : secretName : azure-secret secretNamespace : default shareName : mps-certs readOnly : false mountOptions : - dir_mode=0755 - file_mode=0755 - uid=1000 - gid=1000 - mfsymlinks - nobrl Apply it to your cluster. kubectl apply -f ./kubernetes/charts/volumes/azure.yaml Deploy Open AMT Cloud Toolkit using Helm \u00b6 Deploy using Helm. helm install openamtstack ./kubernetes/charts Success NAME: openamtstack LAST DEPLOYED: Thu Jul 15 11:17:38 2021 NAMESPACE: default STATUS: deployed REVISION: 1 TEST SUITE: None View the pods. You might notice mps , rps , and openamtstack-vault-0 are not ready. This will change after we initialize and unseal Vault. All others should be Ready and Running. kubectl get pods Success NAME READY STATUS RESTARTS AGE mps-69786bfb47-92mpc 0/1 CreateContainerConfigError 0 2m6s mpsrouter-9b9bc499b-2tkb2 1/1 Running 0 2m6s oactdb-697b55f885-g6l58 1/1 Running 0 2m6s openamtstack-kong-68d6c84bcc-fp8dl 2/2 Running 0 2m6s openamtstack-vault-0 0/1 Running 0 2m6s openamtstack-vault-agent-injector-6b564845db-zss78 1/1 Running 0 2m6s rps-79877bf5c5-dsg5p 0/1 CreateContainerConfigError 0 2m6s webui-6cc48f4d68-6r8b5 1/1 Running 0 2m6s Initialize and Unseal Vault \u00b6 Please refer to HashiCorp documentation on how to Initialize and unseal Vault . Important Make sure you download your credentials and save them in a secure location. Note - Finding the Vault UI External IP Address The external IP of your Vault UI service can be found by either: Run kubectl get services and view under the openamtstack-vault-ui service. Navigate to Home > Kubernetes services > cluster-name > Services and ingresses using Microsoft Azure via online. After initializing and unsealing the vault, you need to enable the Key Value engine: Click \"Enable New Engine +\". Choose \"KV\". Click \"Next\". Leave the default path and choose version 2 from the drop down. Click \"Enable Engine\". Vault Token Secret \u00b6 Add the root token as a secret to the k8s cluster so that the services can access Vault. kubectl create secret generic vault --from-literal=vaultKey=<your-root-token> Where: <your-root-token> is your root_token generated by Vault. View the pods. All pods should now be Ready and Running. kubectl get pods Success NAME READY STATUS RESTARTS AGE mps-69786bfb47-92mpc 1/1 Running 0 4m5s mpsrouter-9b9bc499b-2tkb2 1/1 Running 0 4m5s oactdb-697b55f885-g6l58 1/1 Running 0 4m5s openamtstack-kong-68d6c84bcc-fp8dl 2/2 Running 0 4m5s openamtstack-vault-0 1/1 Running 0 4m5s openamtstack-vault-agent-injector-6b564845db-zss78 1/1 Running 0 4m5s rps-79877bf5c5-dsg5p 1/1 Running 0 4m5s webui-6cc48f4d68-6r8b5 1/1 Running 0 4m5s Next Steps \u00b6 Visit the Sample Web UI using the FQDN name and Continue from the Get Started steps","title":"AKS"},{"location":"Kubernetes/deployingk8s-aks/#azure-kubernetes-service-aks","text":"This tutorial demonstrates how to deploy the Open AMT Cloud Toolkit on a Kubernetes cluster using AKS . Alternatively, you can also perform a simpler, test deployment using a single-node cluster locally. See Kubernetes (K8s) . Azure Kubernetes Service ( AKS ) offers serverless Kubernetes, an integrated continuous integration and continuous delivery (CI/CD) experience, and enterprise-grade security and governance. Learn more about AKS here .","title":"Azure Kubernetes Service (AKS)"},{"location":"Kubernetes/deployingk8s-aks/#prerequisites","text":"Docker Desktop kubectl Azure CLI (v2.24.0+) Helm CLI (v3.5+)","title":"Prerequisites"},{"location":"Kubernetes/deployingk8s-aks/#create-ssh-key","text":"This key is required by Azure to create VMs that use SSH keys for authentication. For more details, see Detailed steps: Create and manage SSH keys . Create a new ssh key. ssh-keygen -t rsa -b 2048 Take note of the location it was saved at. You will need the public key ( .pub file) in a following step.","title":"Create SSH Key"},{"location":"Kubernetes/deployingk8s-aks/#deploy-aks","text":"Login to Azure. az login Additionally, you can verify the correct subscription is set. az account show Provide a name to create a new resource group. az group create --name <your-resource-group-name> --location eastus Provide the name of your new resource group from the last step and start a deployment at that resource group based on aks.json . az deployment group create --resource-group <your-resource-group-name> --template-file aks.json After running the previous command, you will be prompted for 3 different strings. After the final prompt, it will take about 5 minutes to finish running. Provide a name for the AKS Cluster. Provide a name (e.g. your name) for the linux user admin name. Provide the string of the ssh key from the .pub file. Take note of the fqdnSuffix in the outputs section of the JSON response (e.g. eastus.cloudapp.azure.com ) \"outputs\" : { \"controlPlaneFQDN\" : { \"type\" : \"String\" , \"value\" : \"bwcluster-9c68035a.hcp.westus.azmk8s.io\" }, \"fqdnSuffix\" : { \"type\" : \"String\" , \"value\" : \"eastus.cloudapp.azure.com\" } },","title":"Deploy AKS"},{"location":"Kubernetes/deployingk8s-aks/#connect-to-aks-instance","text":"Ensure your kubectl is connected to the Kubernetes cluster you wish to deploy/manage. Provide your resource group name and cluster name, respectively. az aks get-credentials --resource-group <your-resource-group-name> --name <your-cluster-name>","title":"Connect to AKS Instance"},{"location":"Kubernetes/deployingk8s-aks/#create-secrets","text":"","title":"Create Secrets"},{"location":"Kubernetes/deployingk8s-aks/#1-private-docker-registry-credentials","text":"If you are using a private docker registry, you'll need to provide your credentials to K8S. kubectl create secret docker-registry registrycredentials --docker-server = <your-registry-server> --docker-username = <your-username> --docker-password = <your-password> Where: <your-registry-server> is your Private Docker Registry FQDN. <your-username> is your Docker username. <your-password> is your Docker password.","title":"1. Private Docker Registry Credentials"},{"location":"Kubernetes/deployingk8s-aks/#2-mpskong-jwt","text":"This is the secret used for generating and verifying JWTs. kubectl create secret generic open-amt-admin-jwt --from-literal=kongCredType=jwt --from-literal=key=\"admin-issuer\" --from-literal=algorithm=HS256 --from-literal=secret=\"<your-secret>\" Where: <your-secret> is your chosen strong secret.","title":"2. MPS/KONG JWT"},{"location":"Kubernetes/deployingk8s-aks/#3-kong-acl-for-jwt","text":"This configures KONG with an Access Control List (ACL) to allow an admin user open-amt-admin to access endpoints using the JWT retrieved when logging in. kubectl create secret generic open-amt-admin-acl --from-literal=kongCredType=acl --from-literal=group=open-amt-admin","title":"3. KONG ACL for JWT"},{"location":"Kubernetes/deployingk8s-aks/#4-mps-web-username-and-password","text":"This is the username and password that is used for requesting a JWT. These credentials are also used for logging into the Sample Web UI . kubectl create secret generic mpsweb --from-literal=user=<your-username> --from-literal=password=<your-password> Where: <your-username> is a username of your choice. <your-password> is a strong password of your choice. Important The password must meet standard, strong password requirements: 8 to 32 characters One uppercase, one lowercase, one numerical digit, one special character","title":"4. MPS Web Username and Password"},{"location":"Kubernetes/deployingk8s-aks/#5-azure-storage-account-key","text":"Currently, we leverage Azure Storage Accounts for persistent storage of MPS certificates that can be shared by multiple instances of MPS . This creates the secret to access the provisioned Azure Storage account for use in a persistent volume (PV). Note This will likely change in a future release kubectl create secret generic azure-secret --from-literal=azurestorageaccountname=<your-cluster-name>stg --from-literal=azurestorageaccountkey=<your-storage-key> Where: <your-cluster-name> is the cluster name chosen in Deploy AKS . <your-storage-key> is one of the generated access keys of the storage account. Important - Finding Access Keys An access key can be found by either: Run az storage account keys list --account-name <your-cluster-name>stg to view access keys. Navigate to Home > Storage accounts > cluster-name > Access keys using Microsoft Azure via online.","title":"5. Azure Storage Account Key"},{"location":"Kubernetes/deployingk8s-aks/#update-configuration","text":"Open the values.yaml file in ./open-amt-cloud-toolkit/kubernetes/charts/ . Update the service.beta.kubernetes.io/azure-dns-label-name key in the kong: section with the desired DNS name you would like for your cluster (i.e. myopenamtk8s). kong : proxy : annotations : service.beta.kubernetes.io/azure-dns-label-name : \"<your-domain-name>\" Update the mps , rps , webui , and mpsrouter keys to point to your own container registries. images : mps : \"vprodemo.azurecr.io/mps:latest\" rps : \"vprodemo.azurecr.io/rps:latest\" webui : \"vprodemo.azurecr.io/webui:latest\" mpsrouter : \"vprodemo.azurecr.io/mpsrouter:latest\" postgresdb : \"postgres:13\" Update the following keys in the mps section. Key Name Update to Description commonName FQDN for your cluster For AKS , the format is <your-domain-name>.<location>.cloudapp.azure.com . This is the fqdnSuffix provided in the outputs section when you Deploy AKS . storageAccessMode ReadWriteMany Must set to ReadWriteMany to scale. The default access mode for storage ( storageAccessMode ) is set to ReadWriteOnce . This only works with a one node cluster. mps : commonName : \"<your-domain-name>.<location>.cloudapp.azure.com\" # storageClassName: \"\" storageAccessMode : \"ReadWriteOnce\" #Change to ReadWriteMany replicaCount : 1 logLevel : \"silly\" connectionString : \"postgresql://postgresadmin:admin123@postgres:5432/mpsdb\" jwtExpiration : 1440 Save and close the file. Provide a PersistentVolume that can match the PersisentVolumeClaim for MPS . For an AKS deployment, you can use the following example YAML. It is provided in ./kubernetes/charts/volumes/azure.yaml . Note Changing storageAccessMode will update the PersistentVolumeClaim to request ReadWriteMany , this means you'll need to provide a PersistentVolume that can match that claim. The Azure deployment performed in Deploy AKS creates a Storage Account that can be used. Use the following yaml to provision the volume for the cluster. Provided azure.yaml Example apiVersion : v1 kind : PersistentVolume metadata : name : mps-certs spec : capacity : storage : 1Gi accessModes : - ReadWriteMany azureFile : secretName : azure-secret secretNamespace : default shareName : mps-certs readOnly : false mountOptions : - dir_mode=0755 - file_mode=0755 - uid=1000 - gid=1000 - mfsymlinks - nobrl Apply it to your cluster. kubectl apply -f ./kubernetes/charts/volumes/azure.yaml","title":"Update Configuration"},{"location":"Kubernetes/deployingk8s-aks/#deploy-open-amt-cloud-toolkit-using-helm","text":"Deploy using Helm. helm install openamtstack ./kubernetes/charts Success NAME: openamtstack LAST DEPLOYED: Thu Jul 15 11:17:38 2021 NAMESPACE: default STATUS: deployed REVISION: 1 TEST SUITE: None View the pods. You might notice mps , rps , and openamtstack-vault-0 are not ready. This will change after we initialize and unseal Vault. All others should be Ready and Running. kubectl get pods Success NAME READY STATUS RESTARTS AGE mps-69786bfb47-92mpc 0/1 CreateContainerConfigError 0 2m6s mpsrouter-9b9bc499b-2tkb2 1/1 Running 0 2m6s oactdb-697b55f885-g6l58 1/1 Running 0 2m6s openamtstack-kong-68d6c84bcc-fp8dl 2/2 Running 0 2m6s openamtstack-vault-0 0/1 Running 0 2m6s openamtstack-vault-agent-injector-6b564845db-zss78 1/1 Running 0 2m6s rps-79877bf5c5-dsg5p 0/1 CreateContainerConfigError 0 2m6s webui-6cc48f4d68-6r8b5 1/1 Running 0 2m6s","title":"Deploy Open AMT Cloud Toolkit using Helm"},{"location":"Kubernetes/deployingk8s-aks/#initialize-and-unseal-vault","text":"Please refer to HashiCorp documentation on how to Initialize and unseal Vault . Important Make sure you download your credentials and save them in a secure location. Note - Finding the Vault UI External IP Address The external IP of your Vault UI service can be found by either: Run kubectl get services and view under the openamtstack-vault-ui service. Navigate to Home > Kubernetes services > cluster-name > Services and ingresses using Microsoft Azure via online. After initializing and unsealing the vault, you need to enable the Key Value engine: Click \"Enable New Engine +\". Choose \"KV\". Click \"Next\". Leave the default path and choose version 2 from the drop down. Click \"Enable Engine\".","title":"Initialize and Unseal Vault"},{"location":"Kubernetes/deployingk8s-aks/#vault-token-secret","text":"Add the root token as a secret to the k8s cluster so that the services can access Vault. kubectl create secret generic vault --from-literal=vaultKey=<your-root-token> Where: <your-root-token> is your root_token generated by Vault. View the pods. All pods should now be Ready and Running. kubectl get pods Success NAME READY STATUS RESTARTS AGE mps-69786bfb47-92mpc 1/1 Running 0 4m5s mpsrouter-9b9bc499b-2tkb2 1/1 Running 0 4m5s oactdb-697b55f885-g6l58 1/1 Running 0 4m5s openamtstack-kong-68d6c84bcc-fp8dl 2/2 Running 0 4m5s openamtstack-vault-0 1/1 Running 0 4m5s openamtstack-vault-agent-injector-6b564845db-zss78 1/1 Running 0 4m5s rps-79877bf5c5-dsg5p 1/1 Running 0 4m5s webui-6cc48f4d68-6r8b5 1/1 Running 0 4m5s","title":"Vault Token Secret"},{"location":"Kubernetes/deployingk8s-aks/#next-steps","text":"Visit the Sample Web UI using the FQDN name and Continue from the Get Started steps","title":"Next Steps"},{"location":"Kubernetes/deployingk8s/","text":"This tutorial demonstrates how to deploy the Open AMT Cloud Toolkit on a local Kubernetes single-node cluster. Alternatively, you can also deploy using a managed service through a Cloud Service Provider such as Azure Kubernetes Service ( AKS ). See AKS . Kubernetes, also known as K8s, is an open-source system for automating deployment, scaling, and management of containerized applications. Learn more about Kubernetes here . Prerequisites \u00b6 Docker Desktop with Kubernetes Enabled kubectl Helm CLI (v3.5+) Important - For Linux If deploying on a Linux machine, Docker Desktop is not available. You must use Docker Engine alongside a local Kubernetes cluster tool such as minikube or kubeadm . Create Kubernetes Secrets \u00b6 1. Private Docker Registry Credentials \u00b6 If you are using a private docker registry, you'll need to provide your credentials to K8S. kubectl create secret docker-registry regcred --docker-server = <your-registry-server> --docker-username = <your-username> --docker-password = <your-password> Where: <your-registry-server> is your Private Docker Registry FQDN. <your-username> is your Docker username. <your-password> is your Docker password. 2. MPS /KONG JWT \u00b6 This is the secret used for generating and verifying JWTs. kubectl create secret generic open-amt-admin-jwt --from-literal=kongCredType=jwt --from-literal=key=\"admin-issuer\" --from-literal=algorithm=HS256 --from-literal=secret=\"<your-secret>\" Where: <your-secret> is your chosen strong secret. 3. KONG ACL for JWT \u00b6 This configures KONG with an Access Control List (ACL) to allow an admin user open-amt-admin to access endpoints using the JWT retrieved when logging in. kubectl create secret generic open-amt-admin-acl --from-literal=kongCredType=acl --from-literal=group=open-amt-admin 4. MPS Web Username and Password \u00b6 This is the username and password that is used for requesting a JWT. These credentials are also used for logging into the Sample Web UI . kubectl create secret generic mpsweb --from-literal=user=<your-username> --from-literal=password=<your-password> Where: <your-username> is a username of your choice. <your-password> is a strong password of your choice. Important The password must meet standard, strong password requirements: 8 to 32 characters One uppercase, one lowercase, one numerical digit, one special character Update Configuration \u00b6 Open the values.yaml file in ./open-amt-cloud-toolkit/kubernetes/charts/ . Update the mps , rps , webui , and mpsrouter keys to point to your own container registries. images : mps : \"vprodemo.azurecr.io/mps:latest\" rps : \"vprodemo.azurecr.io/rps:latest\" webui : \"vprodemo.azurecr.io/webui:latest\" mpsrouter : \"vprodemo.azurecr.io/mpsrouter:latest\" postgresdb : \"postgres:13\" Update the commonName key in the mps section with the IP Address of your machine. mps : commonName : \"<your-ip-address>\" # storageClassName: \"\" storageAccessMode : \"ReadWriteOnce\" replicaCount : 1 logLevel : \"silly\" connectionString : \"postgresql://postgresadmin:admin123@postgres:5432/mpsdb\" jwtExpiration : 1440 Save and close the file. Provide a PersistentVolume that can match the PersisentVolumeClaim for MPS . For a local, single-node cluster, you can use the following example YAML. It is provided in ./kubernetes/charts/volumes/local.yaml . Provided local.yaml Example apiVersion : v1 kind : PersistentVolume metadata : name : mps-certs labels : type : local spec : accessModes : - ReadWriteOnce capacity : storage : 1Gi hostPath : path : \"/mnt/data/mpscerts\" Apply it to your cluster. kubectl apply -f ./kubernetes/charts/volumes/local.yaml Deploy Open AMT Cloud Toolkit Using Helm \u00b6 Deploy using Helm. helm install openamtstack ./kubernetes/charts Success NAME: openamtstack LAST DEPLOYED: Wed Jul 14 12:59:29 2021 NAMESPACE: default STATUS: deployed REVISION: 1 TEST SUITE: None View the pods. You might notice openamtstack-vault-0 is not ready. This will change after we initialize and unseal Vault. All others should be Ready and Running. kubectl get pods Success NAME READY STATUS RESTARTS AGE mps-6984b7c69d-8d5gf 1/1 Running 0 5m mpsrouter-9b9bc499b-pwn9j 1/1 Running 0 5m oactdb-697b55f885-8mdmg 1/1 Running 0 5m openamtstack-kong-55b65d558c-gzv4d 2/2 Running 0 5m openamtstack-vault-0 0/1 Running 0 5m openamtstack-vault-agent-injector-7fb7dcfcbd-dlqqg 1/1 Running 0 5m rps-79877bf5c5-hnv8t 1/1 Running 0 5m webui-784cd49976-bj7z5 1/1 Running 0 5m Initialize and Unseal Vault \u00b6 Please refer to HashiCorp documentation on how to Initialize and unseal Vault . Important Make sure you download your credentials and save them in a secure location. After initializing and unsealing the vault, you need to enable the Key Value engine: Click \"Enable New Engine +\". Choose \"KV\". Click \"Next\". Leave the default path and choose version 2 from the drop down. Click \"Enable Engine\". Vault Token Secret \u00b6 Add the root token as a secret to the k8s cluster so that the services can access Vault. kubectl create secret generic vault --from-literal=vaultKey=<your-root-token> Where: <your-root-token> is your root_token generated by Vault. View the pods. All pods should now be Ready and Running. kubectl get pods Success NAME READY STATUS RESTARTS AGE mps-6984b7c69d-8d5gf 1/1 Running 0 7m mpsrouter-9b9bc499b-pwn9j 1/1 Running 0 7m oactdb-697b55f885-8mdmg 1/1 Running 0 7m openamtstack-kong-55b65d558c-gzv4d 2/2 Running 0 7m openamtstack-vault-0 1/1 Running 0 7m openamtstack-vault-agent-injector-7fb7dcfcbd-dlqqg 1/1 Running 0 7m rps-79877bf5c5-hnv8t 1/1 Running 0 7m webui-784cd49976-bj7z5 1/1 Running 0 7m Next Steps \u00b6 Continue from the Get Started steps","title":"Kubernetes (K8s)"},{"location":"Kubernetes/deployingk8s/#prerequisites","text":"Docker Desktop with Kubernetes Enabled kubectl Helm CLI (v3.5+) Important - For Linux If deploying on a Linux machine, Docker Desktop is not available. You must use Docker Engine alongside a local Kubernetes cluster tool such as minikube or kubeadm .","title":"Prerequisites"},{"location":"Kubernetes/deployingk8s/#create-kubernetes-secrets","text":"","title":"Create Kubernetes Secrets"},{"location":"Kubernetes/deployingk8s/#1-private-docker-registry-credentials","text":"If you are using a private docker registry, you'll need to provide your credentials to K8S. kubectl create secret docker-registry regcred --docker-server = <your-registry-server> --docker-username = <your-username> --docker-password = <your-password> Where: <your-registry-server> is your Private Docker Registry FQDN. <your-username> is your Docker username. <your-password> is your Docker password.","title":"1. Private Docker Registry Credentials"},{"location":"Kubernetes/deployingk8s/#2-mpskong-jwt","text":"This is the secret used for generating and verifying JWTs. kubectl create secret generic open-amt-admin-jwt --from-literal=kongCredType=jwt --from-literal=key=\"admin-issuer\" --from-literal=algorithm=HS256 --from-literal=secret=\"<your-secret>\" Where: <your-secret> is your chosen strong secret.","title":"2. MPS/KONG JWT"},{"location":"Kubernetes/deployingk8s/#3-kong-acl-for-jwt","text":"This configures KONG with an Access Control List (ACL) to allow an admin user open-amt-admin to access endpoints using the JWT retrieved when logging in. kubectl create secret generic open-amt-admin-acl --from-literal=kongCredType=acl --from-literal=group=open-amt-admin","title":"3. KONG ACL for JWT"},{"location":"Kubernetes/deployingk8s/#4-mps-web-username-and-password","text":"This is the username and password that is used for requesting a JWT. These credentials are also used for logging into the Sample Web UI . kubectl create secret generic mpsweb --from-literal=user=<your-username> --from-literal=password=<your-password> Where: <your-username> is a username of your choice. <your-password> is a strong password of your choice. Important The password must meet standard, strong password requirements: 8 to 32 characters One uppercase, one lowercase, one numerical digit, one special character","title":"4. MPS Web Username and Password"},{"location":"Kubernetes/deployingk8s/#update-configuration","text":"Open the values.yaml file in ./open-amt-cloud-toolkit/kubernetes/charts/ . Update the mps , rps , webui , and mpsrouter keys to point to your own container registries. images : mps : \"vprodemo.azurecr.io/mps:latest\" rps : \"vprodemo.azurecr.io/rps:latest\" webui : \"vprodemo.azurecr.io/webui:latest\" mpsrouter : \"vprodemo.azurecr.io/mpsrouter:latest\" postgresdb : \"postgres:13\" Update the commonName key in the mps section with the IP Address of your machine. mps : commonName : \"<your-ip-address>\" # storageClassName: \"\" storageAccessMode : \"ReadWriteOnce\" replicaCount : 1 logLevel : \"silly\" connectionString : \"postgresql://postgresadmin:admin123@postgres:5432/mpsdb\" jwtExpiration : 1440 Save and close the file. Provide a PersistentVolume that can match the PersisentVolumeClaim for MPS . For a local, single-node cluster, you can use the following example YAML. It is provided in ./kubernetes/charts/volumes/local.yaml . Provided local.yaml Example apiVersion : v1 kind : PersistentVolume metadata : name : mps-certs labels : type : local spec : accessModes : - ReadWriteOnce capacity : storage : 1Gi hostPath : path : \"/mnt/data/mpscerts\" Apply it to your cluster. kubectl apply -f ./kubernetes/charts/volumes/local.yaml","title":"Update Configuration"},{"location":"Kubernetes/deployingk8s/#deploy-open-amt-cloud-toolkit-using-helm","text":"Deploy using Helm. helm install openamtstack ./kubernetes/charts Success NAME: openamtstack LAST DEPLOYED: Wed Jul 14 12:59:29 2021 NAMESPACE: default STATUS: deployed REVISION: 1 TEST SUITE: None View the pods. You might notice openamtstack-vault-0 is not ready. This will change after we initialize and unseal Vault. All others should be Ready and Running. kubectl get pods Success NAME READY STATUS RESTARTS AGE mps-6984b7c69d-8d5gf 1/1 Running 0 5m mpsrouter-9b9bc499b-pwn9j 1/1 Running 0 5m oactdb-697b55f885-8mdmg 1/1 Running 0 5m openamtstack-kong-55b65d558c-gzv4d 2/2 Running 0 5m openamtstack-vault-0 0/1 Running 0 5m openamtstack-vault-agent-injector-7fb7dcfcbd-dlqqg 1/1 Running 0 5m rps-79877bf5c5-hnv8t 1/1 Running 0 5m webui-784cd49976-bj7z5 1/1 Running 0 5m","title":"Deploy Open AMT Cloud Toolkit Using Helm"},{"location":"Kubernetes/deployingk8s/#initialize-and-unseal-vault","text":"Please refer to HashiCorp documentation on how to Initialize and unseal Vault . Important Make sure you download your credentials and save them in a secure location. After initializing and unsealing the vault, you need to enable the Key Value engine: Click \"Enable New Engine +\". Choose \"KV\". Click \"Next\". Leave the default path and choose version 2 from the drop down. Click \"Enable Engine\".","title":"Initialize and Unseal Vault"},{"location":"Kubernetes/deployingk8s/#vault-token-secret","text":"Add the root token as a secret to the k8s cluster so that the services can access Vault. kubectl create secret generic vault --from-literal=vaultKey=<your-root-token> Where: <your-root-token> is your root_token generated by Vault. View the pods. All pods should now be Ready and Running. kubectl get pods Success NAME READY STATUS RESTARTS AGE mps-6984b7c69d-8d5gf 1/1 Running 0 7m mpsrouter-9b9bc499b-pwn9j 1/1 Running 0 7m oactdb-697b55f885-8mdmg 1/1 Running 0 7m openamtstack-kong-55b65d558c-gzv4d 2/2 Running 0 7m openamtstack-vault-0 1/1 Running 0 7m openamtstack-vault-agent-injector-7fb7dcfcbd-dlqqg 1/1 Running 0 7m rps-79877bf5c5-hnv8t 1/1 Running 0 7m webui-784cd49976-bj7z5 1/1 Running 0 7m","title":"Vault Token Secret"},{"location":"Kubernetes/deployingk8s/#next-steps","text":"Continue from the Get Started steps","title":"Next Steps"},{"location":"Microservices/overview/","text":"Figure 1 illustrates the high-level architecture of Open AMT Cloud Toolkit microservice architecture . Figure 1: Deploy Open AMT Cloud Toolkit Figure 1 illustrates the high-level steps for basic deployment: Deploy Microservices - Install the microservices on a development system as Docker* containers, which can run locally or on the cloud. Deploy RPC Architecture - Transfer the lightweight clients to managed devices. Configure AMT - Through the RPS , configure AMT by creating control mode profile(s). Connect AMT - Use the MPS to manage connectivity, as this microservice listens for the call home messaging of managed devices. Issue AMT Command - Send power commands (e.g., power off) through the MPS . Add AMT functionality - Explore the additional functionality provided by Open AMT Cloud Toolkit to develop your own web console or application. Out-of-band Management ( OOB Management ) \u00b6 Open AMT Cloud Toolkit uses remote management technology, also known as OOB Management , to allow administrators to perform actions on network assets or devices using a secure alternative to LAN-based communication protocols. Actions include reboot, power up, power down, system updates, and more. As long as the network device or asset is connected to power, Open AMT Cloud Toolkit software can perform remote management, including powering up as a system that is currently powered down. Remote management can offer potential cost-savings by decreasing the need for in-person technician visits to remote IT sites and reducing downtime. What's the difference between in-band and OOB Management ? \u00b6 Remote monitoring and management software solutions often require the managed devices to be in the powered on state. The IT administrator connects to and updates the managed device while it is in the powered on state. With out-of-band management, the administrator can connect to the device when it has been powered down or it is unresponsive. CIRA Configuration \u00b6 CIRA enables OOB connections between Intel\u00ae AMT platforms and administrative development systems running Open AMT on the same network. The following steps occur via a CIRA channel: A remote Intel vPro\u00ae Platform featuring Intel\u00ae AMT is activated and a CIRA configuration is applied. The remote platform is referred to as the managed device. The managed device connects to the MPS and establishes an encrypted connection using Transport Layer Security (TLS) The Intel vPro\u00ae Platform maintains a long standing connection with the MPS through the use of small keep-alive messages to the MPS . A management console sends a command to the MPS , via provided RESTful interfaces, with the command indicating the managed device should take some action. The MPS authenticates the RESTful command and proxies the command for the management console to the managed device. The MPS handles the authentication process with the managed device. Control Mode Profile \u00b6 Managed devices featuring Intel\u00ae AMT support two control modes: Admin Control Mode ( ACM ): In this mode, there are no limitations to Intel\u00ae AMT functionality. This reflects the higher level of trust associated with these setup methods. No user consent is required. Client Control Mode ( CCM ): This mode limits some of Intel\u00ae AMT functionality, reflecting the lower level of trust. Features requiring User Consent: Keyboard, Video, Mouse ( KVM ) Control IDE-Redirection for sharing and mounting images remotely Domains \u00b6 In addition to a CIRA Config and an ACM Profile , ACM requires the creation of a Domain Profile . Intel\u00ae AMT checks the network DNS suffix against the provisioning certificate as a security check. During provisioning, the trusted certificate chain is injected into the AMT firmware. Intel\u00ae AMT verifies that the certificate chain is complete and is signed by a trusted certificate authority. Power Control \u00b6 With the established CIRA channel, Open AMT Cloud Toolkit enables the administrator to manage remote devices and trigger power actions to: power up power down power up to BIOS reset reset to BIOS For more information about power states supported by the REST APIs, see Intel\u00ae AMT Implementation and Reference Guide for more details. Keyboard, Video, Mouse ( KVM ) Control \u00b6 Intel\u00ae AMT enables remote management of a device, even when the OS isn't running, through KVM over IP support. No additional equipment is needed for this feature. With KVM control, IT administrators can access and update PCs and devices as if they were onsite. It eliminates the need for remote KVM switches and other hardware. Passwords \u00b6 There are five levels of passwords: Intel\u00ae Manageability Engine BIOS Extensions (MEBX) Password: MEBX Password - Use this password to secure the local Intel\u00ae MEBX menu. This password is only used when physically accessing the managed device during system boot. Access the menu with Ctrl-P on most devices. Sample Web UI Password: MPS_WEB_ADMIN_PASSWORD - Use this password when logging into the Sample Web UI . The Sample Web UI Password uses this default MPS user authentication credential when it triggers MPS to issue a JWT (JSON Web Token). In most production environments, this default credential is replaced by a more rigorous authentication protocol. Examples include OAuth2, OpenID, or an authentication service that can issue an Auth Token to be validated by the API gateway. ACM & CCM Profiles: AMT Password - RPS uses this password to activate and configure Intel\u00ae AMT . When MPS requests an action of a managed device, such as a power action, it uses this password. Intel\u00ae AMT verifies this password when it gets a command from the MPS server. Provisioning Certificate Password - The AMT Provisioning certificate is a special certificate used by Intel\u00ae AMT devices to establish trust with the configuration service when activating in Admin Control Mode. RPS requires the .pfx version of this certificate along with the password used to export the .pfx certificate to perform ACM activation. MPS CIRA Credential: MPS_USER and MPS_PASSWORD - This CIRA credential is used by Intel\u00ae AMT managed devices to authenticate the MPS when establishing the CIRA connection. Multiple passwords enhance the security of Open AMT Cloud Toolkit . What Security Default Values Modify 1. Intel MEBX Password Prevention of Physical Security Violations admin In MEBX (Ctrl-P) 2. Sample Web UI Password Remote Role Management Username: standalone Password: G@ppm0ym .env file 3. ACM & CCM Profiles: AMT Password Authentication of MPS / RPS Access Not applicable. 1. Create a new profile. 2. Make an API call to update. 3. Update Vault. 4. Provisioning Certificate Password Signed Certificate Usage Not applicable. 1.Re-export certificate with another password. 2. Create a new profile. 3. Make an API call to update. 4. Update Vault. 5. MPS CIRA Credential MPS credential used by AMT Not applicable. 1. Create a new profile. 2. Make an API call to update. 3. Update Vault. Table 1: Summary of Open AMT Passwords Log Files \u00b6 Each microservice has an associated log file which can contain helpful debug information. Use docker logs to print log information to the terminal. Docker Logs \u00b6 To run docker log files in a terminal window as needed: Open a Terminal or Powershell/Command Prompt and run the command to list the containers: Linux sudo docker ps Windows (Powershell) docker ps Copy the first three digits of the container ID of interest. Run the docker logs command followed by the container ID: Linux sudo docker logs <container ID> Windows (Powershell) docker logs <container ID> See more help options for the docker logs command in Docker Documentation . Log Level \u00b6 Set the log levels in the .env file by altering the configuration levels, MPS_LOG_LEVEL and RPS_LOG_LEVEL . Find the log level descriptions in the tables contained in MPS Configuration and RPS Configuration .","title":"Overview"},{"location":"Microservices/overview/#out-of-band-management-oob-management","text":"Open AMT Cloud Toolkit uses remote management technology, also known as OOB Management , to allow administrators to perform actions on network assets or devices using a secure alternative to LAN-based communication protocols. Actions include reboot, power up, power down, system updates, and more. As long as the network device or asset is connected to power, Open AMT Cloud Toolkit software can perform remote management, including powering up as a system that is currently powered down. Remote management can offer potential cost-savings by decreasing the need for in-person technician visits to remote IT sites and reducing downtime.","title":"Out-of-band Management (OOB Management)"},{"location":"Microservices/overview/#whats-the-difference-between-in-band-and-oob-management","text":"Remote monitoring and management software solutions often require the managed devices to be in the powered on state. The IT administrator connects to and updates the managed device while it is in the powered on state. With out-of-band management, the administrator can connect to the device when it has been powered down or it is unresponsive.","title":"What's the difference between in-band and OOB Management?"},{"location":"Microservices/overview/#cira-configuration","text":"CIRA enables OOB connections between Intel\u00ae AMT platforms and administrative development systems running Open AMT on the same network. The following steps occur via a CIRA channel: A remote Intel vPro\u00ae Platform featuring Intel\u00ae AMT is activated and a CIRA configuration is applied. The remote platform is referred to as the managed device. The managed device connects to the MPS and establishes an encrypted connection using Transport Layer Security (TLS) The Intel vPro\u00ae Platform maintains a long standing connection with the MPS through the use of small keep-alive messages to the MPS . A management console sends a command to the MPS , via provided RESTful interfaces, with the command indicating the managed device should take some action. The MPS authenticates the RESTful command and proxies the command for the management console to the managed device. The MPS handles the authentication process with the managed device.","title":"CIRA Configuration"},{"location":"Microservices/overview/#control-mode-profile","text":"Managed devices featuring Intel\u00ae AMT support two control modes: Admin Control Mode ( ACM ): In this mode, there are no limitations to Intel\u00ae AMT functionality. This reflects the higher level of trust associated with these setup methods. No user consent is required. Client Control Mode ( CCM ): This mode limits some of Intel\u00ae AMT functionality, reflecting the lower level of trust. Features requiring User Consent: Keyboard, Video, Mouse ( KVM ) Control IDE-Redirection for sharing and mounting images remotely","title":"Control Mode Profile"},{"location":"Microservices/overview/#domains","text":"In addition to a CIRA Config and an ACM Profile , ACM requires the creation of a Domain Profile . Intel\u00ae AMT checks the network DNS suffix against the provisioning certificate as a security check. During provisioning, the trusted certificate chain is injected into the AMT firmware. Intel\u00ae AMT verifies that the certificate chain is complete and is signed by a trusted certificate authority.","title":"Domains"},{"location":"Microservices/overview/#power-control","text":"With the established CIRA channel, Open AMT Cloud Toolkit enables the administrator to manage remote devices and trigger power actions to: power up power down power up to BIOS reset reset to BIOS For more information about power states supported by the REST APIs, see Intel\u00ae AMT Implementation and Reference Guide for more details.","title":"Power Control"},{"location":"Microservices/overview/#keyboard-video-mouse-kvm-control","text":"Intel\u00ae AMT enables remote management of a device, even when the OS isn't running, through KVM over IP support. No additional equipment is needed for this feature. With KVM control, IT administrators can access and update PCs and devices as if they were onsite. It eliminates the need for remote KVM switches and other hardware.","title":"Keyboard, Video, Mouse (KVM) Control"},{"location":"Microservices/overview/#passwords","text":"There are five levels of passwords: Intel\u00ae Manageability Engine BIOS Extensions (MEBX) Password: MEBX Password - Use this password to secure the local Intel\u00ae MEBX menu. This password is only used when physically accessing the managed device during system boot. Access the menu with Ctrl-P on most devices. Sample Web UI Password: MPS_WEB_ADMIN_PASSWORD - Use this password when logging into the Sample Web UI . The Sample Web UI Password uses this default MPS user authentication credential when it triggers MPS to issue a JWT (JSON Web Token). In most production environments, this default credential is replaced by a more rigorous authentication protocol. Examples include OAuth2, OpenID, or an authentication service that can issue an Auth Token to be validated by the API gateway. ACM & CCM Profiles: AMT Password - RPS uses this password to activate and configure Intel\u00ae AMT . When MPS requests an action of a managed device, such as a power action, it uses this password. Intel\u00ae AMT verifies this password when it gets a command from the MPS server. Provisioning Certificate Password - The AMT Provisioning certificate is a special certificate used by Intel\u00ae AMT devices to establish trust with the configuration service when activating in Admin Control Mode. RPS requires the .pfx version of this certificate along with the password used to export the .pfx certificate to perform ACM activation. MPS CIRA Credential: MPS_USER and MPS_PASSWORD - This CIRA credential is used by Intel\u00ae AMT managed devices to authenticate the MPS when establishing the CIRA connection. Multiple passwords enhance the security of Open AMT Cloud Toolkit . What Security Default Values Modify 1. Intel MEBX Password Prevention of Physical Security Violations admin In MEBX (Ctrl-P) 2. Sample Web UI Password Remote Role Management Username: standalone Password: G@ppm0ym .env file 3. ACM & CCM Profiles: AMT Password Authentication of MPS / RPS Access Not applicable. 1. Create a new profile. 2. Make an API call to update. 3. Update Vault. 4. Provisioning Certificate Password Signed Certificate Usage Not applicable. 1.Re-export certificate with another password. 2. Create a new profile. 3. Make an API call to update. 4. Update Vault. 5. MPS CIRA Credential MPS credential used by AMT Not applicable. 1. Create a new profile. 2. Make an API call to update. 3. Update Vault. Table 1: Summary of Open AMT Passwords","title":"Passwords"},{"location":"Microservices/overview/#log-files","text":"Each microservice has an associated log file which can contain helpful debug information. Use docker logs to print log information to the terminal.","title":"Log Files"},{"location":"Microservices/overview/#docker-logs","text":"To run docker log files in a terminal window as needed: Open a Terminal or Powershell/Command Prompt and run the command to list the containers: Linux sudo docker ps Windows (Powershell) docker ps Copy the first three digits of the container ID of interest. Run the docker logs command followed by the container ID: Linux sudo docker logs <container ID> Windows (Powershell) docker logs <container ID> See more help options for the docker logs command in Docker Documentation .","title":"Docker Logs"},{"location":"Microservices/overview/#log-level","text":"Set the log levels in the .env file by altering the configuration levels, MPS_LOG_LEVEL and RPS_LOG_LEVEL . Find the log level descriptions in the tables contained in MPS Configuration and RPS Configuration .","title":"Log Level"},{"location":"Microservices/MPS/configuration/","text":"MPS Configuration Options \u00b6 Environment Variable Default Description MPS_IMAGE mps-microservice:v1 Only used when using docker-compose.yml. Specifies image to use for MPS MPS_USE_VAULT true Whether or not the vault should be used MPS_VAULT_ADDRESS http://vault:8200 Address of where the vault is hosted MPS_VAULT_TOKEN myroot Token used to access the vault MPS_SECRETS_PATH secret/data/ Path to where secrets are stored in the vault MPS_GENERATE_CERTS true Enables/Disables generation of self signed certificates based on MPS_COMMON_NAME MPS_COMMON_NAME localhost Development system's IP address. Note: For this guide, you cannot use localhost because the managed device would be unable to reach the MPS and RPS servers. MPS_PORT 4433 MPS_WEB_PORT 3000 MPS_WEB_ADMIN_USER n/a Specifies the username for API authentication MPS_WEB_ADMIN_PASSWORD n/a Specifies the password for API authentication MPS_HTTPS true Specifies whether or not to enable https MPS_TLS_OFFLOAD false MPS_LOG_LEVEL info Controls the level of logging provided in the service. Options are (in order of increasing detail): error , warn , info , verbose , debug , and silly . MPS_JWT_SECRET n/a Secret used for generating a JWT Token. IMPORTANT: This must match the secret in your Kong.yaml file for the jwt plugin configuration. MPS_JWT_ISSUER 9EmRJTbIiIb4bIeSsmgcWIjrR6HyETqc The issuer that will be populated in the token. This is a not considered a secret. IMPORTANT: This must match the key: property in the Kong.yaml file for the jwt plugin configuration. MPS_JWT_EXPIRATION 1440 The default expiration in minutes for the JWT Token. Default is 24 hours. MPS_MQTT_ADDRESS No Value Address of where the mqtt broker is hosted. Mqtt container is named mosquitto and is open to port 8883 . Thus unless setting are changed the value should be either empty (off) or mqtt://mosquitto:8883 (on) MPS_CONNECTION_STRING postgresql://postgresadmin@localhost:5432/mpsdb?sslmode=no-verify The database connection string","title":"Configuration"},{"location":"Microservices/MPS/configuration/#mps-configuration-options","text":"Environment Variable Default Description MPS_IMAGE mps-microservice:v1 Only used when using docker-compose.yml. Specifies image to use for MPS MPS_USE_VAULT true Whether or not the vault should be used MPS_VAULT_ADDRESS http://vault:8200 Address of where the vault is hosted MPS_VAULT_TOKEN myroot Token used to access the vault MPS_SECRETS_PATH secret/data/ Path to where secrets are stored in the vault MPS_GENERATE_CERTS true Enables/Disables generation of self signed certificates based on MPS_COMMON_NAME MPS_COMMON_NAME localhost Development system's IP address. Note: For this guide, you cannot use localhost because the managed device would be unable to reach the MPS and RPS servers. MPS_PORT 4433 MPS_WEB_PORT 3000 MPS_WEB_ADMIN_USER n/a Specifies the username for API authentication MPS_WEB_ADMIN_PASSWORD n/a Specifies the password for API authentication MPS_HTTPS true Specifies whether or not to enable https MPS_TLS_OFFLOAD false MPS_LOG_LEVEL info Controls the level of logging provided in the service. Options are (in order of increasing detail): error , warn , info , verbose , debug , and silly . MPS_JWT_SECRET n/a Secret used for generating a JWT Token. IMPORTANT: This must match the secret in your Kong.yaml file for the jwt plugin configuration. MPS_JWT_ISSUER 9EmRJTbIiIb4bIeSsmgcWIjrR6HyETqc The issuer that will be populated in the token. This is a not considered a secret. IMPORTANT: This must match the key: property in the Kong.yaml file for the jwt plugin configuration. MPS_JWT_EXPIRATION 1440 The default expiration in minutes for the JWT Token. Default is 24 hours. MPS_MQTT_ADDRESS No Value Address of where the mqtt broker is hosted. Mqtt container is named mosquitto and is open to port 8883 . Thus unless setting are changed the value should be either empty (off) or mqtt://mosquitto:8883 (on) MPS_CONNECTION_STRING postgresql://postgresadmin@localhost:5432/mpsdb?sslmode=no-verify The database connection string","title":"MPS Configuration Options"},{"location":"Microservices/MPS/securityMPS/","text":"MPS Security Considerations \u00b6 The cloud agnostic microservice Management Presence Server ( MPS ) enables platforms featuring Intel\u00ae AMT to connect over the internet securely to manageability consoles. Secrets are used to ensure the security of the MPS REST APIs. In a deployment environment, consider these security assets: Intel\u00ae AMT remote admin credentials Intel\u00ae AMT CIRA credentials Authorize API end point Server Configuration Web User Credentials In addition to the above assets, there are best practices that are recommended to help secure these assets as they are used within the system. The following sections will cover each asset and the recommended practices to use to protect the assets. Security Assets \u00b6 1. Intel\u00ae AMT remote admin credentials \u00b6 Intel\u00ae AMT remote admin credentials enable a user to remotely control a device featuring Intel\u00ae AMT. These credentials are configured in AMT Firmware by a configuration server (e.g., RPS ). When an administrator performs a REST API call, such as a power off action to the managed device, MPS fetches the corresponding credentials of that device from the configured secrets store (e.g., Vault). MPS uses the fetched secret as part of digest authentication with Intel\u00ae AMT. Intel discourages reuse of passwords among managed devices. Use a strong, unique password for each device to enhance security. 2. Intel\u00ae AMT CIRA credentials \u00b6 When a managed device attempts to establish a connection to the MPS , the MPS performs two checks prior to allowing the connection: 1. The Intel\u00ae AMT device's GUID: This GUID must be stored in the MPS database and is typically added by using the devices POST API. 2. MPS CIRA Credential: The Intel\u00ae AMT device needs to supply the correct credentials to MPS . These credentials are checked against the username, stored in the database, and password, stored in Vault. Use a strong, unique password for each device to enhance security. 3. Authorize API end point \u00b6 MPS supports basic user authentication to the REST APIs with an Authorize API endpoint for issuing a JSON Web Token (JWT). This eliminates the need to set up a full user authentication service before evaluating the software and enables developers to use the microservices right away. However, in a production deployment, use a robust user authentication service (e.g., OAuth2, OpenID, LDAP) and disable the Authorize API endpoint by leaving the MPS Web User credentials blank in the MPS configuration file. 4. Server Configuration \u00b6 To use secure protocols, MPS requires configured certificates and securely stored certificate keys. If the keys are compromised, an attacker will be able to decrypt messages that are encrypted with these certificates. For evaluation purposes, MPS will generate self-signed certificates used for encryption. For production deployment, purchase CA-signed certificates whose signatures can be independently verified. 5. Web User Credentials \u00b6 The Open AMT Cloud Toolkit is designed to operate behind an API gateway, such as Kong API Gateway. The API Gateway validates the Auth Tokens provided by an administrator who is requesting access to an API end point. Once verified, the API Gateway will forward the request to the appropriate microservice, MPS or RPS . To make evaluation easy, MPS has implemented an Authorize API end point that will issue a JWT when the proper web user credentials are provided. The Web User credentials are global credentials that are configured in the MPS configuration file and do not provide any fine-grain permissions. Integration with other user authentication models and fine-grain endpoint permissions are supported through Kong plug-ins and modification of the Kong API Gateway configuration file, respectively. Best Known Security Methods \u00b6 1. Enable TLS on Network Connections \u00b6 There are three potential places where TLS could be enabled to protect the security assets: HTTPS/WSS connection between Web UI and MPS (recommended) Connection between MPS and Vault - If communication between MPS and Vault is outside a secure container environment (not recommended deployment, see item 2 below) Connection between MPS and Intel\u00ae AMT device (required and done automatically by MPS ) Securing these communication routes will help prevent security assets being exposed through network based attacks intercepting messages between components. It is recommended that the most modern version of TLS be used when encrypting communication. 2. Secure and Isolate Execution Environment \u00b6 MPS holds several security assets in memory during execution. To protect these assets while in the memory of MPS , run MPS in a secure execution environment such as a dedicated container. Deploying into a secure container environment eases the burden of individually securing the assets while in memory or in transit between Open AMT Cloud Toolkit services. Running MPS , RPS , API Gateway, MPS Router, Vault, and Database all within the same secure container instance will help ensure that the communication between these services remains secure. 3. Use Vault for Storing Credentials \u00b6 Vault is a tool used to secure, store, and tightly control access to secrets. Utilizing Vault to store passwords used by MPS will greatly increase the security of these assets. 4. Use Kubernetes Secrets for Storing Dynamic Configuration Values \u00b6 Kubernetes Secrets help you to store and manage sensitive information like Tokens. Use Kubernetes secrets for storing environment variables required for configuring MPS rather than putting them in the image/pod. Vault token, Session secret key, and Server configuration assets required for MPS should be stored in Kubernetes secrets.","title":"Security Information"},{"location":"Microservices/MPS/securityMPS/#mps-security-considerations","text":"The cloud agnostic microservice Management Presence Server ( MPS ) enables platforms featuring Intel\u00ae AMT to connect over the internet securely to manageability consoles. Secrets are used to ensure the security of the MPS REST APIs. In a deployment environment, consider these security assets: Intel\u00ae AMT remote admin credentials Intel\u00ae AMT CIRA credentials Authorize API end point Server Configuration Web User Credentials In addition to the above assets, there are best practices that are recommended to help secure these assets as they are used within the system. The following sections will cover each asset and the recommended practices to use to protect the assets.","title":"MPS Security Considerations"},{"location":"Microservices/MPS/securityMPS/#security-assets","text":"","title":"Security Assets"},{"location":"Microservices/MPS/securityMPS/#1-intel-amt-remote-admin-credentials","text":"Intel\u00ae AMT remote admin credentials enable a user to remotely control a device featuring Intel\u00ae AMT. These credentials are configured in AMT Firmware by a configuration server (e.g., RPS ). When an administrator performs a REST API call, such as a power off action to the managed device, MPS fetches the corresponding credentials of that device from the configured secrets store (e.g., Vault). MPS uses the fetched secret as part of digest authentication with Intel\u00ae AMT. Intel discourages reuse of passwords among managed devices. Use a strong, unique password for each device to enhance security.","title":"1. Intel&reg; AMT remote admin credentials"},{"location":"Microservices/MPS/securityMPS/#2-intel-amt-cira-credentials","text":"When a managed device attempts to establish a connection to the MPS , the MPS performs two checks prior to allowing the connection: 1. The Intel\u00ae AMT device's GUID: This GUID must be stored in the MPS database and is typically added by using the devices POST API. 2. MPS CIRA Credential: The Intel\u00ae AMT device needs to supply the correct credentials to MPS . These credentials are checked against the username, stored in the database, and password, stored in Vault. Use a strong, unique password for each device to enhance security.","title":"2. Intel&reg; AMT CIRA credentials"},{"location":"Microservices/MPS/securityMPS/#3-authorize-api-end-point","text":"MPS supports basic user authentication to the REST APIs with an Authorize API endpoint for issuing a JSON Web Token (JWT). This eliminates the need to set up a full user authentication service before evaluating the software and enables developers to use the microservices right away. However, in a production deployment, use a robust user authentication service (e.g., OAuth2, OpenID, LDAP) and disable the Authorize API endpoint by leaving the MPS Web User credentials blank in the MPS configuration file.","title":"3. Authorize API end point"},{"location":"Microservices/MPS/securityMPS/#4-server-configuration","text":"To use secure protocols, MPS requires configured certificates and securely stored certificate keys. If the keys are compromised, an attacker will be able to decrypt messages that are encrypted with these certificates. For evaluation purposes, MPS will generate self-signed certificates used for encryption. For production deployment, purchase CA-signed certificates whose signatures can be independently verified.","title":"4. Server Configuration"},{"location":"Microservices/MPS/securityMPS/#5-web-user-credentials","text":"The Open AMT Cloud Toolkit is designed to operate behind an API gateway, such as Kong API Gateway. The API Gateway validates the Auth Tokens provided by an administrator who is requesting access to an API end point. Once verified, the API Gateway will forward the request to the appropriate microservice, MPS or RPS . To make evaluation easy, MPS has implemented an Authorize API end point that will issue a JWT when the proper web user credentials are provided. The Web User credentials are global credentials that are configured in the MPS configuration file and do not provide any fine-grain permissions. Integration with other user authentication models and fine-grain endpoint permissions are supported through Kong plug-ins and modification of the Kong API Gateway configuration file, respectively.","title":"5. Web User Credentials"},{"location":"Microservices/MPS/securityMPS/#best-known-security-methods","text":"","title":"Best Known Security Methods"},{"location":"Microservices/MPS/securityMPS/#1-enable-tls-on-network-connections","text":"There are three potential places where TLS could be enabled to protect the security assets: HTTPS/WSS connection between Web UI and MPS (recommended) Connection between MPS and Vault - If communication between MPS and Vault is outside a secure container environment (not recommended deployment, see item 2 below) Connection between MPS and Intel\u00ae AMT device (required and done automatically by MPS ) Securing these communication routes will help prevent security assets being exposed through network based attacks intercepting messages between components. It is recommended that the most modern version of TLS be used when encrypting communication.","title":"1. Enable TLS on Network Connections"},{"location":"Microservices/MPS/securityMPS/#2-secure-and-isolate-execution-environment","text":"MPS holds several security assets in memory during execution. To protect these assets while in the memory of MPS , run MPS in a secure execution environment such as a dedicated container. Deploying into a secure container environment eases the burden of individually securing the assets while in memory or in transit between Open AMT Cloud Toolkit services. Running MPS , RPS , API Gateway, MPS Router, Vault, and Database all within the same secure container instance will help ensure that the communication between these services remains secure.","title":"2. Secure and Isolate Execution Environment"},{"location":"Microservices/MPS/securityMPS/#3-use-vault-for-storing-credentials","text":"Vault is a tool used to secure, store, and tightly control access to secrets. Utilizing Vault to store passwords used by MPS will greatly increase the security of these assets.","title":"3. Use Vault for Storing Credentials"},{"location":"Microservices/MPS/securityMPS/#4-use-kubernetes-secrets-for-storing-dynamic-configuration-values","text":"Kubernetes Secrets help you to store and manage sensitive information like Tokens. Use Kubernetes secrets for storing environment variables required for configuring MPS rather than putting them in the image/pod. Vault token, Session secret key, and Server configuration assets required for MPS should be stored in Kubernetes secrets.","title":"4. Use Kubernetes Secrets for Storing Dynamic Configuration Values"},{"location":"Microservices/RPC/buildRPC_Manual/","text":"In addition to using GitHub Actions to obtain a binary, the RPC binary can also be manually built. The steps below walk through how to build RPC on Windows\u00ae 10, Ubuntu* (18.04 or 20.04), and CentOS 7/8. Required Software \u00b6 git Additionally, if using Windows\u00ae 10: Microsoft Visual Studio* : 2019 or newer version of Visual Studio Community/Professional Make sure to install the Desktop development with C++ package at time of installation or via the 'Get tools and extensions' menu within Microsoft Visual Studio*. The steps below assume the following directory structure where rpc is the clone of the rpc repository , vcpkg is a clone of the VCPKG tool source and build is the RPC build directory. Both vcpkg and build directories will be created in later steps. \\rpc |__vcpkg |__build Clone the Repository \u00b6 On your development system, navigate to a directory of your choice to clone and build RPC . Clone the RPC repository. git clone --branch v1.2.1 https://github.com/open-amt-cloud-toolkit/rpc.git && cd rpc Install Prerequisites and Build RPC \u00b6 Windows Open 'x64 Native Tools Command Prompt for VS 20XX' on your development system. This is NOT a regular Windows Command Prompt. This specific tool is used for compiling the RPC executable. Build VCPKG and C++ REST SDK In the rpc directory, clone the VCPKG repository. Vcpkg is a C/C++ Library Manager for Windows that was created by Microsoft. Find out more about it here . git clone --branch 2020 .11-1 https://github.com/microsoft/vcpkg.git && cd vcpkg Build vcpkg.exe using the following command. bootstrap-vcpkg.bat Install C++ REST SDK. This can take anywhere from 8 - 15 minutes depending on download speeds and installation times. vcpkg install cpprestsdk [ websockets ] :x64-windows-static Build RPC Return to the rpc directory and create a new build directory. cd .. && mkdir build && cd build Generate the CMake config. cmake -DVCPKG_TARGET_TRIPLET = x64-windows-static -DCMAKE_TOOLCHAIN_FILE = ../vcpkg/scripts/buildsystems/vcpkg.cmake .. Build the RPC executable. cmake --build . --config Release Note RPC can also be built in a non-production debug mode rather than release using the following command. The debug mode includes debug symbols. cmake --build . --config Debug Change to Release directory. cd Release Ubuntu/CentOS 8 The following steps are for Ubuntu 18.04, Ubuntu 20.04, or CentOS8. Build VCPKG and C++ REST SDK To install the required dependencies; enter the following command. Ubuntu sudo apt install git cmake build-essential curl zip unzip tar pkg-config CentOS8 sudo yum install cmake In the rpc directory, clone the Vcpkg repository. Vcpkg is a C/C++ Library Manager for Windows that was created by Microsoft. Find out more about it here . git clone --branch 2020 .11-1 https://github.com/microsoft/vcpkg.git && cd vcpkg Build vcpkg.exe using the following command. ./bootstrap-vcpkg.sh Install C++ REST SDK. This can take anywhere from 8 - 15 minutes depending on download speeds and installation times. ./vcpkg install cpprestsdk [ websockets ] Build RPC Return to the rpc directory and create a new 'build' directory. cd .. && mkdir build && cd build Generate the CMake config. cmake -DCMAKE_TOOLCHAIN_FILE = ../vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE = Release .. Note RPC can also be built in a non-production debug mode rather than release using the following command. The debug mode includes debug symbols. cmake -DCMAKE_TOOLCHAIN_FILE=../vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE=Debug .. Build the RPC executable. cmake --build . CentOS 7 Important All commands should be executed in the same Terminal. The \"export PATH=...\" (for CMake and Git), and \"scl enable devtoolset-7 bash\" (for GCC) are temporary changes which only affect the current Terminal session. Install Dependencies Download CMake. CMake 3.10.2 is recommended and can be downloaded from here . Other CMake binary versions are available here . ./cmake-3.10.2-Linux-x86_64.sh export PATH = /home/user/Downloads/cmake-3.10.2-Linux-x86_64/bin: $PATH Update GCC toolchain. sudo yum install centos-release-scl sudo yum install devtoolset-7 scl enable devtoolset-7 bash Build Git source control system. sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-develperl-CPAN perl-devel git clone https://github.com/git/git.git make configure make export PATH = /home/user/Downloads/git: $PATH Build VCPKG and C++ REST SDK In the rpc directory, clone the VCPKG repository. Vcpkg is a C/C++ Library Manager for Windows that was created by Microsoft. Find out more about it here . git clone --branch 2020 .11-1 https://github.com/microsoft/vcpkg.git && cd vcpkg Build vcpkg.exe using the following command. ./bootstrap-vcpkg.sh Install C++ REST SDK. This can take anywhere from 8 - 15 minutes depending on download speeds and installation times. ./vcpkg install cpprestsdk [ websockets ] Build RPC Return to the rpc directory and create a new 'build' directory. cd .. && mkdir build && cd build Generate the CMake config cmake -DCMAKE_TOOLCHAIN_FILE = ../vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE = Release -DNO_SELECT = ON .. Note RPC can also be built in a non-production debug mode rather than release using the following command. The debug mode includes debug symbols. cmake -DCMAKE_TOOLCHAIN_FILE=../vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE=Debug -DNO_SELECT=ON .. Build the RPC executable cmake --build . Run RPC \u00b6 For additional information on possible arguments when invoking RPC , see Command Examples . The following example command shows how to activate and configure an Intel\u00ae AMT device using a pre-defined profile on your local network. After building the RPC , copy the executable to the managed device. Run the RPC . Windows Important On a Windows\u00ae 10 system, the Command Prompt must be run as Adminstrator. rpc --url wss://localhost/activate --nocertcheck --cmd \"-t activate --profile profile1\" Linux sudo ./rpc --url wss://localhost/activate --nocertcheck --cmd \"-t activate --profile profile1\" Note The --nocertcheck flag allows for the use of self-signed certificates for development purposes. Find more information here Example Success Output:","title":"Build & Run RPC (Manual)"},{"location":"Microservices/RPC/buildRPC_Manual/#required-software","text":"git Additionally, if using Windows\u00ae 10: Microsoft Visual Studio* : 2019 or newer version of Visual Studio Community/Professional Make sure to install the Desktop development with C++ package at time of installation or via the 'Get tools and extensions' menu within Microsoft Visual Studio*. The steps below assume the following directory structure where rpc is the clone of the rpc repository , vcpkg is a clone of the VCPKG tool source and build is the RPC build directory. Both vcpkg and build directories will be created in later steps. \\rpc |__vcpkg |__build","title":"Required Software"},{"location":"Microservices/RPC/buildRPC_Manual/#clone-the-repository","text":"On your development system, navigate to a directory of your choice to clone and build RPC . Clone the RPC repository. git clone --branch v1.2.1 https://github.com/open-amt-cloud-toolkit/rpc.git && cd rpc","title":"Clone the Repository"},{"location":"Microservices/RPC/buildRPC_Manual/#install-prerequisites-and-build-rpc","text":"Windows Open 'x64 Native Tools Command Prompt for VS 20XX' on your development system. This is NOT a regular Windows Command Prompt. This specific tool is used for compiling the RPC executable. Build VCPKG and C++ REST SDK In the rpc directory, clone the VCPKG repository. Vcpkg is a C/C++ Library Manager for Windows that was created by Microsoft. Find out more about it here . git clone --branch 2020 .11-1 https://github.com/microsoft/vcpkg.git && cd vcpkg Build vcpkg.exe using the following command. bootstrap-vcpkg.bat Install C++ REST SDK. This can take anywhere from 8 - 15 minutes depending on download speeds and installation times. vcpkg install cpprestsdk [ websockets ] :x64-windows-static Build RPC Return to the rpc directory and create a new build directory. cd .. && mkdir build && cd build Generate the CMake config. cmake -DVCPKG_TARGET_TRIPLET = x64-windows-static -DCMAKE_TOOLCHAIN_FILE = ../vcpkg/scripts/buildsystems/vcpkg.cmake .. Build the RPC executable. cmake --build . --config Release Note RPC can also be built in a non-production debug mode rather than release using the following command. The debug mode includes debug symbols. cmake --build . --config Debug Change to Release directory. cd Release Ubuntu/CentOS 8 The following steps are for Ubuntu 18.04, Ubuntu 20.04, or CentOS8. Build VCPKG and C++ REST SDK To install the required dependencies; enter the following command. Ubuntu sudo apt install git cmake build-essential curl zip unzip tar pkg-config CentOS8 sudo yum install cmake In the rpc directory, clone the Vcpkg repository. Vcpkg is a C/C++ Library Manager for Windows that was created by Microsoft. Find out more about it here . git clone --branch 2020 .11-1 https://github.com/microsoft/vcpkg.git && cd vcpkg Build vcpkg.exe using the following command. ./bootstrap-vcpkg.sh Install C++ REST SDK. This can take anywhere from 8 - 15 minutes depending on download speeds and installation times. ./vcpkg install cpprestsdk [ websockets ] Build RPC Return to the rpc directory and create a new 'build' directory. cd .. && mkdir build && cd build Generate the CMake config. cmake -DCMAKE_TOOLCHAIN_FILE = ../vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE = Release .. Note RPC can also be built in a non-production debug mode rather than release using the following command. The debug mode includes debug symbols. cmake -DCMAKE_TOOLCHAIN_FILE=../vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE=Debug .. Build the RPC executable. cmake --build . CentOS 7 Important All commands should be executed in the same Terminal. The \"export PATH=...\" (for CMake and Git), and \"scl enable devtoolset-7 bash\" (for GCC) are temporary changes which only affect the current Terminal session. Install Dependencies Download CMake. CMake 3.10.2 is recommended and can be downloaded from here . Other CMake binary versions are available here . ./cmake-3.10.2-Linux-x86_64.sh export PATH = /home/user/Downloads/cmake-3.10.2-Linux-x86_64/bin: $PATH Update GCC toolchain. sudo yum install centos-release-scl sudo yum install devtoolset-7 scl enable devtoolset-7 bash Build Git source control system. sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-develperl-CPAN perl-devel git clone https://github.com/git/git.git make configure make export PATH = /home/user/Downloads/git: $PATH Build VCPKG and C++ REST SDK In the rpc directory, clone the VCPKG repository. Vcpkg is a C/C++ Library Manager for Windows that was created by Microsoft. Find out more about it here . git clone --branch 2020 .11-1 https://github.com/microsoft/vcpkg.git && cd vcpkg Build vcpkg.exe using the following command. ./bootstrap-vcpkg.sh Install C++ REST SDK. This can take anywhere from 8 - 15 minutes depending on download speeds and installation times. ./vcpkg install cpprestsdk [ websockets ] Build RPC Return to the rpc directory and create a new 'build' directory. cd .. && mkdir build && cd build Generate the CMake config cmake -DCMAKE_TOOLCHAIN_FILE = ../vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE = Release -DNO_SELECT = ON .. Note RPC can also be built in a non-production debug mode rather than release using the following command. The debug mode includes debug symbols. cmake -DCMAKE_TOOLCHAIN_FILE=../vcpkg/scripts/buildsystems/vcpkg.cmake -DCMAKE_BUILD_TYPE=Debug -DNO_SELECT=ON .. Build the RPC executable cmake --build .","title":"Install Prerequisites and Build RPC"},{"location":"Microservices/RPC/buildRPC_Manual/#run-rpc","text":"For additional information on possible arguments when invoking RPC , see Command Examples . The following example command shows how to activate and configure an Intel\u00ae AMT device using a pre-defined profile on your local network. After building the RPC , copy the executable to the managed device. Run the RPC . Windows Important On a Windows\u00ae 10 system, the Command Prompt must be run as Adminstrator. rpc --url wss://localhost/activate --nocertcheck --cmd \"-t activate --profile profile1\" Linux sudo ./rpc --url wss://localhost/activate --nocertcheck --cmd \"-t activate --profile profile1\" Note The --nocertcheck flag allows for the use of self-signed certificates for development purposes. Find more information here Example Success Output:","title":"Run RPC"},{"location":"Microservices/RPC/commandsRPC/","text":"RPC is primarily used for communicating with the Remote Provision Server ( RPS ) for activating and/or deactivating AMT devices. Optional arguments allow for things such as easier development testing or for use in network environments utilizing proxies. All currently available arguments and their definitions are listed below along with example commands. RPC Usage \u00b6 On Windows: rpc <required> [ optional ] rpc <informational> On Linux: sudo ./rpc <required> [ optional ] sudo ./rpc <informational> On Docker: sudo docker run --device = /dev/mei0 rpc:latest <required> [ optional ] sudo docker run --device = /dev/mei0 rpc:latest <informational> RPC Arguments \u00b6 Required \u00b6 Argument\u2003\u2003\u2003\u2003\u2003\u2003 Name \u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003 Description -c, --cmd <command> Server Command Activate or Deactivate command for AMT device. See example commands below. -u, --url <url> Websocket Server Address and Port of the RPS server, wss://localhost:8080. By default, RPS runs on port 8080. RPC Activate/Deactivate Examples \u00b6 Activate a Device: rpc --url wss://localhost/activate --cmd \"-t activate --profile profile1\" Deactivate a Device: rpc -u wss://localhost/activate -c \"-t deactivate --password P@ssw0rd\" Note The --password nested argument uses the AMT password set at the time of provisioning of the device based on the RPS Profile . This password should be able to be retrieved from Vault, if unknown. Deactivate a Device if Unknown by RPS (or Vault): rpc -u wss://localhost/activate -c \"-t deactivate --password -f\" Optional \u00b6 Argument\u2003\u2003\u2003\u2003 Name\u2003\u2003\u2003\u2003\u2003\u2003 Description -d, --dns <dns> DNS Suffix Override -n, --nocertcheck Certificate Verification Disable certificate verification. Allows for the use of self-signed certificates during development testing. Not valid for production. Otherwise, a TLS Certificate from a trusted Certificate Authority provider is required. -p, --proxy <addr> Proxy Address and Port Allow for connection through a network proxy, http://proxy.com:1000 -v, --verbose Verbose Output Display WSMan communication with RPS when executing RPC Examples \u00b6 Override DNS detection and Activate device: rpc --url wss://localhost/activate --cmd \"-t activate --profile profile1\" --dns corp.com Connect through proxy and Deactivate device: rpc -u wss://localhost/activate -c \"-t deactivate --password P@ssw0rd\" -p http://proxy.com:1000 Informational \u00b6 Argument Name Description --help Help text Display help menu in-line --version Version Current version of RPC --amtinfo <item> AMT info View available information Possible <item> Parameters: all - View all items ver - BIOS version bld - Build number sku - Product SKU uuid - Device's Unique Identifier mode - Current Control Mode, ACM or CCM dns - Domain Name Suffix from AMT and from OS fqdn - Fully aualified domain name and device hostname from OS cert - Certificate hashes ras - Remote access status lan - LAN settings, i.e. DHCP Enabled, Link Status, and IP/MAC Addresses Examples \u00b6 View All Information Items: rpc --amtinfo all Find Current Device's GUID: rpc --amtinfo uuid","title":"Command Examples"},{"location":"Microservices/RPC/commandsRPC/#rpc-usage","text":"On Windows: rpc <required> [ optional ] rpc <informational> On Linux: sudo ./rpc <required> [ optional ] sudo ./rpc <informational> On Docker: sudo docker run --device = /dev/mei0 rpc:latest <required> [ optional ] sudo docker run --device = /dev/mei0 rpc:latest <informational>","title":"RPC Usage"},{"location":"Microservices/RPC/commandsRPC/#rpc-arguments","text":"","title":"RPC Arguments"},{"location":"Microservices/RPC/commandsRPC/#required","text":"Argument\u2003\u2003\u2003\u2003\u2003\u2003 Name \u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003 Description -c, --cmd <command> Server Command Activate or Deactivate command for AMT device. See example commands below. -u, --url <url> Websocket Server Address and Port of the RPS server, wss://localhost:8080. By default, RPS runs on port 8080.","title":"Required"},{"location":"Microservices/RPC/commandsRPC/#rpc-activatedeactivate-examples","text":"Activate a Device: rpc --url wss://localhost/activate --cmd \"-t activate --profile profile1\" Deactivate a Device: rpc -u wss://localhost/activate -c \"-t deactivate --password P@ssw0rd\" Note The --password nested argument uses the AMT password set at the time of provisioning of the device based on the RPS Profile . This password should be able to be retrieved from Vault, if unknown. Deactivate a Device if Unknown by RPS (or Vault): rpc -u wss://localhost/activate -c \"-t deactivate --password -f\"","title":"RPC Activate/Deactivate Examples"},{"location":"Microservices/RPC/commandsRPC/#optional","text":"Argument\u2003\u2003\u2003\u2003 Name\u2003\u2003\u2003\u2003\u2003\u2003 Description -d, --dns <dns> DNS Suffix Override -n, --nocertcheck Certificate Verification Disable certificate verification. Allows for the use of self-signed certificates during development testing. Not valid for production. Otherwise, a TLS Certificate from a trusted Certificate Authority provider is required. -p, --proxy <addr> Proxy Address and Port Allow for connection through a network proxy, http://proxy.com:1000 -v, --verbose Verbose Output Display WSMan communication with RPS when executing RPC","title":"Optional "},{"location":"Microservices/RPC/commandsRPC/#examples","text":"Override DNS detection and Activate device: rpc --url wss://localhost/activate --cmd \"-t activate --profile profile1\" --dns corp.com Connect through proxy and Deactivate device: rpc -u wss://localhost/activate -c \"-t deactivate --password P@ssw0rd\" -p http://proxy.com:1000","title":"Examples"},{"location":"Microservices/RPC/commandsRPC/#informational","text":"Argument Name Description --help Help text Display help menu in-line --version Version Current version of RPC --amtinfo <item> AMT info View available information Possible <item> Parameters: all - View all items ver - BIOS version bld - Build number sku - Product SKU uuid - Device's Unique Identifier mode - Current Control Mode, ACM or CCM dns - Domain Name Suffix from AMT and from OS fqdn - Fully aualified domain name and device hostname from OS cert - Certificate hashes ras - Remote access status lan - LAN settings, i.e. DHCP Enabled, Link Status, and IP/MAC Addresses","title":"Informational"},{"location":"Microservices/RPC/commandsRPC/#examples_1","text":"View All Information Items: rpc --amtinfo all Find Current Device's GUID: rpc --amtinfo uuid","title":"Examples"},{"location":"Microservices/RPC/troubleshootingRPC/","text":"The sections below detail possible errors that may occur when activating or de-activating managed devices along with some potential solutions. MPS \u00b6 Error Issue or Message Possible Solutions Vault is empty in dev mode. Profiles and configs are not persistent in this mode. To run vault in production mode, follow the Use Docker and Vault in Production Mode . MPS is missing from list of running services. (1) Check for error messages in the logs. For details, see Docker Logs . (2) Verify that the .env file contains correct values in each field. RPS \u00b6 Error Issue or Message Possible Solutions Create a profile fails or information cannot be read from vault. Make sure Vault and PostGres are running. For details, see the docker ps command in Build and Run Docker Images . An error occurred during provisioning. (1) Verify that the correct certificate is being used. (2) Verify the Domain suffix. RPC \u00b6 Error Issue or Message Possible Solutions \"Decrypting provisioning certificate failed\" Double check the password is correct on the certificate loaded into the \"domains\" on the UI \"Exception reading from device\" If MPS and RPS are running in Docker, check to ensure Vault has been unsealed. \"Unable to connect to Local Management Service (LMS). Please ensure LMS is running\" Check to ensure no application has bound to port 16992 \"Unable to launch MicroLMS.\" Check that Intel ME is present, MEI Driver installed and run this executable as administrator Check to ensure no application has bound to port 16992 \"Device xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx activation failed. Error while adding the certificates to AMT.\" Unplug the device, from both network and power, let it sit for a while. If that doesn't work, file a github issue Device xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx activation failed. Missing DNS suffix . Run ./rpc --amtinfo all and ensure there is a DNS suffix . If it is blank, double check your router settings for DHCP. Alternatively, you can override the DNS suffix with --dns mycompany.com Error: amt password DOES NOT match stored version for Device 6c4243ba-334d-11ea-94b5-caba2a773d00 Ensure you have provided the --password flag for the --cmd/-c you are trying to execute, and that it is the password you used when provisioning the device. Unable to connect to websocket server. Please check url. After ensuring you can reach your server. Ensure that the certificate common name on the server matches the FQDN/IP of your host address. Error while activating the AMT in admin mode. Check the logs on the RPS server. The rpc.exe fails to connect. If a device has already been provisioned, unprovision it and then reprovision. To deactivate and reactivate devices, see the Mircoservices section for RPC , RPC Activate/Deactivate Examples UI Toolkit \u00b6 If you encounter an error during the installation, verify the prerequisites and version numbers, such as Node.js* LTS, by consulting the tutorial Add MPS UI Toolkit Controls to a WebUI . If adding a control results in an error, double-check the device ID, mpsServer IP address value, and authToken. General Troubleshooting Tips \u00b6 If a configuration becomes unworkable, it may be necessary to clean up the environment by: unprovisioning, also known as deactivating, the managed device stopping all Docker services Do all the above if it becomes necessary to reset your environment completely. See instructions below. Unprovision the Managed Device: Use rpc.exe to dectivate the managed device as described in RPC Activate/Deactivate Examples . The deactivate parameter executes a full unprovision of the managed device. It is also possible to implement a full unprovision via MEBX. See Unprovisioning . Shut down Docker Services: Use docker image prune and docker image rm to stop or remove all images, containers, and volumes, as described in Build and Run Docker Images . The best practice example below stops Docker and then prunes all volumes. Example: Stop Docker services. Linux sudo docker-compose down -v Windows docker-compose down -v Prune the volumes. Linux sudo docker system prune -a --volumes Windows docker system prune -a --volumes","title":"Troubleshooting"},{"location":"Microservices/RPC/troubleshootingRPC/#mps","text":"Error Issue or Message Possible Solutions Vault is empty in dev mode. Profiles and configs are not persistent in this mode. To run vault in production mode, follow the Use Docker and Vault in Production Mode . MPS is missing from list of running services. (1) Check for error messages in the logs. For details, see Docker Logs . (2) Verify that the .env file contains correct values in each field.","title":"MPS"},{"location":"Microservices/RPC/troubleshootingRPC/#rps","text":"Error Issue or Message Possible Solutions Create a profile fails or information cannot be read from vault. Make sure Vault and PostGres are running. For details, see the docker ps command in Build and Run Docker Images . An error occurred during provisioning. (1) Verify that the correct certificate is being used. (2) Verify the Domain suffix.","title":"RPS"},{"location":"Microservices/RPC/troubleshootingRPC/#rpc","text":"Error Issue or Message Possible Solutions \"Decrypting provisioning certificate failed\" Double check the password is correct on the certificate loaded into the \"domains\" on the UI \"Exception reading from device\" If MPS and RPS are running in Docker, check to ensure Vault has been unsealed. \"Unable to connect to Local Management Service (LMS). Please ensure LMS is running\" Check to ensure no application has bound to port 16992 \"Unable to launch MicroLMS.\" Check that Intel ME is present, MEI Driver installed and run this executable as administrator Check to ensure no application has bound to port 16992 \"Device xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx activation failed. Error while adding the certificates to AMT.\" Unplug the device, from both network and power, let it sit for a while. If that doesn't work, file a github issue Device xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx activation failed. Missing DNS suffix . Run ./rpc --amtinfo all and ensure there is a DNS suffix . If it is blank, double check your router settings for DHCP. Alternatively, you can override the DNS suffix with --dns mycompany.com Error: amt password DOES NOT match stored version for Device 6c4243ba-334d-11ea-94b5-caba2a773d00 Ensure you have provided the --password flag for the --cmd/-c you are trying to execute, and that it is the password you used when provisioning the device. Unable to connect to websocket server. Please check url. After ensuring you can reach your server. Ensure that the certificate common name on the server matches the FQDN/IP of your host address. Error while activating the AMT in admin mode. Check the logs on the RPS server. The rpc.exe fails to connect. If a device has already been provisioned, unprovision it and then reprovision. To deactivate and reactivate devices, see the Mircoservices section for RPC , RPC Activate/Deactivate Examples","title":"RPC"},{"location":"Microservices/RPC/troubleshootingRPC/#ui-toolkit","text":"If you encounter an error during the installation, verify the prerequisites and version numbers, such as Node.js* LTS, by consulting the tutorial Add MPS UI Toolkit Controls to a WebUI . If adding a control results in an error, double-check the device ID, mpsServer IP address value, and authToken.","title":"UI Toolkit"},{"location":"Microservices/RPC/troubleshootingRPC/#general-troubleshooting-tips","text":"If a configuration becomes unworkable, it may be necessary to clean up the environment by: unprovisioning, also known as deactivating, the managed device stopping all Docker services Do all the above if it becomes necessary to reset your environment completely. See instructions below. Unprovision the Managed Device: Use rpc.exe to dectivate the managed device as described in RPC Activate/Deactivate Examples . The deactivate parameter executes a full unprovision of the managed device. It is also possible to implement a full unprovision via MEBX. See Unprovisioning . Shut down Docker Services: Use docker image prune and docker image rm to stop or remove all images, containers, and volumes, as described in Build and Run Docker Images . The best practice example below stops Docker and then prunes all volumes. Example: Stop Docker services. Linux sudo docker-compose down -v Windows docker-compose down -v Prune the volumes. Linux sudo docker system prune -a --volumes Windows docker system prune -a --volumes","title":"General Troubleshooting Tips"},{"location":"Microservices/RPS/configuration/","text":"RPS Configuration \u00b6 Environment Variable Default Description RPS_IMAGE rps-microservice:v1 Only used when using docker-compose.yml. Specifies image to use for RPS RPS_CONNECTION_STRING postgresql://postgresadmin@localhost:5432/rpsdb?sslmode=no-verify The database connection string RPS_WEB_PORT 8081 Specifies the Web API port to listen on RPS_WEBSOCKETPORT 8080 Specifies the Websocket port to listen on RPS_VAULT_ADDRESS http://vault:8200 Address of where the vault is hosted RPS_VAULT_TOKEN myroot Token used to access the vault RPS_SECRETS_PATH secret/data/ Specifies the path for where secrets are stored in the vault RPS_LOG_LEVEL info Controls the level of logging provided in the service. Options are (in order of increasing detail): error , warn , info , verbose , debug , and silly RPS_MPS_SERVER http://localhost:3000 Specifies where the MPS is hosted -- required for metadata registration (i.e. hostname, and tags) RPS_DELAY_TIMER 12 Sets the number of seconds to wait after activation but before proceeding with final steps. By default it is set to 12 seconds. During this waiting period, RPS sends heartbeats to RPC to keep the connection alive. RPS_MQTT_ADDRESS No Value Address of where the mqtt broker is hosted. Mqtt container is named mosquitto and is open to port 8883 . Thus unless setting are changed the value should be either empty (off) or mqtt://mosquitto:8883 (on)","title":"Configuration"},{"location":"Microservices/RPS/configuration/#rps-configuration","text":"Environment Variable Default Description RPS_IMAGE rps-microservice:v1 Only used when using docker-compose.yml. Specifies image to use for RPS RPS_CONNECTION_STRING postgresql://postgresadmin@localhost:5432/rpsdb?sslmode=no-verify The database connection string RPS_WEB_PORT 8081 Specifies the Web API port to listen on RPS_WEBSOCKETPORT 8080 Specifies the Websocket port to listen on RPS_VAULT_ADDRESS http://vault:8200 Address of where the vault is hosted RPS_VAULT_TOKEN myroot Token used to access the vault RPS_SECRETS_PATH secret/data/ Specifies the path for where secrets are stored in the vault RPS_LOG_LEVEL info Controls the level of logging provided in the service. Options are (in order of increasing detail): error , warn , info , verbose , debug , and silly RPS_MPS_SERVER http://localhost:3000 Specifies where the MPS is hosted -- required for metadata registration (i.e. hostname, and tags) RPS_DELAY_TIMER 12 Sets the number of seconds to wait after activation but before proceeding with final steps. By default it is set to 12 seconds. During this waiting period, RPS sends heartbeats to RPC to keep the connection alive. RPS_MQTT_ADDRESS No Value Address of where the mqtt broker is hosted. Mqtt container is named mosquitto and is open to port 8883 . Thus unless setting are changed the value should be either empty (off) or mqtt://mosquitto:8883 (on)","title":"RPS Configuration"},{"location":"Microservices/RPS/networkConfig/","text":"Network Configuration profiles on the RPS server help to set the desired network on the AMT device. The AMT Ethernet Port Setting is the AMT API used to set the network settings in AMT by the RPS . RPS network profiles currently contain three boolean settings. DHCPEnabled - is a boolean. Indicates whether DHCP is in use. SharedStaticIp - is a boolean. Indicates whether the static host IP is shared with ME. IpSyncEnabled - is a boolean. Indicates whether the IP synchronization between host and ME is enabled. Predefined Profiles \u00b6 RPS currently supports two predefined network configurations, DHCP_Enabled and DHCP_Disabled, with the following settings. DHCP_Enabled Network Config: { \"ProfileName\" : \"dhcp_enabled\" , \"DHCPEnabled\" : true , \"StaticIPShared\" : false , \"IPSyncEnabled\" : true } DHCP_Disabled Network Config: { \"ProfileName\" : \"dhcp_disabled\" , \"DHCPEnabled\" : false , \"StaticIPShared\" : true , \"IPSyncEnabled\" : true } Example Scenarios \u00b6 The following are scenarios depicting the result of RPS attempting to set network settings in comparison to the set Host OS settings. Host OS RPS Network Profile Used Network Settings on Device \u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003 Result Static IP DHCP_Enabled \u2716 DHCP in Use \u2714 Shared Static IP \u2716 IP Sync RPS update the device settings as per the profile. Deletes SubnetMask, DefaultGateway, IPAddress, PrimaryDNS, and SecondaryDNS. Static IP DHCP_Disabled \u2714 DHCP in Use \u2716 Shared Static IP \u2716 IP Sync RPS update the device settings as per the profile. Deletes SubnetMask, DefaultGateway, IPAddress, PrimaryDNS, and SecondaryDNS. Note: Sets the same static IP address as host. Static IP DHCP_Disabled \u2716 DHCP in Use \u2714 Shared Static IP \u2716 IP Sync RPS updates the device settings as per the profile. Note: Sets the same static IP address as host as IP Sync is enabled. DHCP DHCP_Enabled \u2714 DHCP in Use \u2716 Shared Static IP \u2716 IP Sync RPS updates the device settings as per the profile. Deletes SubnetMask, DefaultGateway, IPAddress, PrimaryDNS, and SecondaryDNS. DHCP DHCP_Disabled \u2714 DHCP in Use \u2716 Shared Static IP \u2716 IP Sync RPS updates the device settings as per the profile. Set SubnetMask, DefaultGateway, IPAddress, PrimaryDNS, and SecondaryDNS.","title":"Network Profiles"},{"location":"Microservices/RPS/networkConfig/#predefined-profiles","text":"RPS currently supports two predefined network configurations, DHCP_Enabled and DHCP_Disabled, with the following settings. DHCP_Enabled Network Config: { \"ProfileName\" : \"dhcp_enabled\" , \"DHCPEnabled\" : true , \"StaticIPShared\" : false , \"IPSyncEnabled\" : true } DHCP_Disabled Network Config: { \"ProfileName\" : \"dhcp_disabled\" , \"DHCPEnabled\" : false , \"StaticIPShared\" : true , \"IPSyncEnabled\" : true }","title":"Predefined Profiles"},{"location":"Microservices/RPS/networkConfig/#example-scenarios","text":"The following are scenarios depicting the result of RPS attempting to set network settings in comparison to the set Host OS settings. Host OS RPS Network Profile Used Network Settings on Device \u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003\u2003 Result Static IP DHCP_Enabled \u2716 DHCP in Use \u2714 Shared Static IP \u2716 IP Sync RPS update the device settings as per the profile. Deletes SubnetMask, DefaultGateway, IPAddress, PrimaryDNS, and SecondaryDNS. Static IP DHCP_Disabled \u2714 DHCP in Use \u2716 Shared Static IP \u2716 IP Sync RPS update the device settings as per the profile. Deletes SubnetMask, DefaultGateway, IPAddress, PrimaryDNS, and SecondaryDNS. Note: Sets the same static IP address as host. Static IP DHCP_Disabled \u2716 DHCP in Use \u2714 Shared Static IP \u2716 IP Sync RPS updates the device settings as per the profile. Note: Sets the same static IP address as host as IP Sync is enabled. DHCP DHCP_Enabled \u2714 DHCP in Use \u2716 Shared Static IP \u2716 IP Sync RPS updates the device settings as per the profile. Deletes SubnetMask, DefaultGateway, IPAddress, PrimaryDNS, and SecondaryDNS. DHCP DHCP_Disabled \u2714 DHCP in Use \u2716 Shared Static IP \u2716 IP Sync RPS updates the device settings as per the profile. Set SubnetMask, DefaultGateway, IPAddress, PrimaryDNS, and SecondaryDNS.","title":"Example Scenarios"},{"location":"Microservices/RPS/securityRPS/","text":"RPS Security Considerations \u00b6 The microservice Remote Provision Service ( RPS ) plays a component role in a larger set of services that makes up the device management software suite. In this role, RPS uses and creates secrets that are required to be able to successfully activate and use Intel\u00ae AMT . There are six key assets that must be protected: Remote admin password for Intel\u00ae AMT MEBX password for Intel\u00ae AMT Provisioning Certificate for each supported domain Password used to encrypt each Provisioning Certificate Device configuration information sent to Intel\u00ae AMT device MPS CIRA login credentials In addition to the above assets, there are best practices that are recommended to help secure these assets as they are used within the system. The following sections will cover each asset and the recommended practices to use to protect the assets. Security Assets \u00b6 Remote Admin Password for Intel\u00ae AMT \u00b6 This password is what is configured in the Intel\u00ae AMT firmware that allows a remote user to remotely control the Intel\u00ae AMT device (power actions, remote desktop, remote terminal, etc). When RPS activates an Intel\u00ae AMT device, it sets this password in the Intel\u00ae AMT firmware. This password can either be statically set or can be randomly generated based on the profile defined by the user. It is highly recommended to use randomly generated passwords as this will make each Intel\u00ae AMT device more secure by using unique passwords per device. In a default docker or Kubernetes deployment, RPS will save the Remote Admin Password to the deployed Vault instance. MEBX Password for Intel\u00ae AMT \u00b6 The Management Engine BIOS Extension (MEBX) password is the password that protects the pre-boot menu option that provides access to Intel\u00ae AMT settings. To use this password a user needs to have physical access to the device. It is highly recommended to change this password from the factory default settings upon receiving a new Intel\u00ae AMT device. A RPS profile provides an option for either specifying a static password that is used for all devices configured with a given profile or a randomly generated password can be assigned uniquely per device. The MEBX password set in each device is saved in Vault. While a randomly generated password is more secure, in this case there is risk that if the Vault database is lost, access to the Intel\u00ae AMT device could be very difficult to recover. It is recommended to use the high availability and backup options provided by the Vault solution to ensure that these secrets are not lost. Provisioning Certificate for each supported domain \u00b6 This certificate is unique per owned domain where RPS needs to provision Intel\u00ae AMT devices. This certificate must be derived from a root certificate whose hash matches one of the trusted provisioning root certificate hashes that is listed in the Intel\u00ae AMT device firmware. Generally, the provisioning certificate is purchased from a trusted certificate authority (VeriSign, GoDaddy, Comodo, etc). The full list of supported CAs based on Intel\u00ae AMT version are listed here . This certificate must contain the leaf certificate, root certificate, and all of the intermediate certificates to form a complete certificate chain. Additionally, the certificate file must also include the private key for the certificate (.pfx format). The leaf certificate for the provisioning certificate must match the domain suffix that the Intel\u00ae AMT device is connected as specified by DHCP option 15 or the Trusted DNS suffix in the Management Engine BIOS Extensions (MEBX). Matching this is one of the ways in which the Intel\u00ae AMT firmware establishes trust with RPS . The provisioning certificate is provided by the user when defining an Intel\u00ae AMT profile. RPS fetches the Provisioning Certificate from Vault when it is needed to activate an Intel\u00ae AMT device. If users have provisioning certificates, they will need to understand which profile to use when configuring an Intel\u00ae AMT device based on the network to which the device is currently connected. Password used to encrypt Provisioning Certificate \u00b6 This is the password that is used to encrypt the provisioning certificate .pfx file that is discussed above. RPS uses this password to decrypt the provisioning certificate so that it can use the certificate components and the private key to activate Intel\u00ae AMT devices. RPS fetches the password from Vault and will use it when it is needed to decrypt a provisioning certificate. Device configuration information sent to Intel\u00ae AMT device \u00b6 Intel\u00ae AMT firmware uses configuration information to establish trust and then activate the Intel\u00ae AMT device. The information contains the hashed remote admin password and MEBX password. Protect this information while it is being used by RPS and while in transit to the Intel\u00ae AMT device. Ensure that a secure (TLS-encrypted) WebSocket is used when RPS is communicating with the client device. This will protect data in transit. The configuration information uses nonces to prevent replay of this data. MPS CIRA Login Credentials \u00b6 To connect to the MPS over a CIRA connection, the Intel\u00ae AMT device needs to provide the correct login credentials for MPS . These credentials are specified as part of the AMT Profile created in RPS . When a device is configured by RPS , the MPS CIRA credentials will be sent to MPS using the Devices POST API call where MPS will then store the credentials. These credentials are verfied by the MPS when the CIRA connection is established. Best Known Security Methods \u00b6 1 Enable TLS on network connections \u00b6 There are two potential places where TLS could be enable to protect the security assets: * WebSocket connection between RPS and Intel\u00ae AMT client (recommended) * Connection between RPS and Vault - If communication between RPS and Vault is outside a secure container environment (not recommended deployment, see item 2 below) Securing these communication routes will help prevent security assets being exposed through network based attacks intercepting messages between components. It is recommended that the most modern version of TLS be used when encrypting communication. 2 Secure and isolate execution environment \u00b6 RPS holds several of the described security assets in memory during execution. In order to protect these assets while in the memory of RPS , it is recommended that RPS be run in a secure execution environment such as a dedicated container. Deploying into a secure container environment eases the burden of individually securing the assets while in memory or in transit between Open AMT Cloud Toolkit services. Running MPS , RPS , API Gateway, MPS Router, Vault, and Database all within the same secure container instance will help ensure that the communication between these services remains secure. 3 Utilize a Hashicorp Vault implementation to store security assets \u00b6 Utilizing Hashicorp Vault to store security assets either created by or used by RPS will greatly increase the security of these assets. Not only does Vault encrypt the data at rest, but it also manages access to the data itself. As the Vault owner, you decide who gets access to the security assets stored there, not RPS .","title":"Security Information"},{"location":"Microservices/RPS/securityRPS/#rps-security-considerations","text":"The microservice Remote Provision Service ( RPS ) plays a component role in a larger set of services that makes up the device management software suite. In this role, RPS uses and creates secrets that are required to be able to successfully activate and use Intel\u00ae AMT . There are six key assets that must be protected: Remote admin password for Intel\u00ae AMT MEBX password for Intel\u00ae AMT Provisioning Certificate for each supported domain Password used to encrypt each Provisioning Certificate Device configuration information sent to Intel\u00ae AMT device MPS CIRA login credentials In addition to the above assets, there are best practices that are recommended to help secure these assets as they are used within the system. The following sections will cover each asset and the recommended practices to use to protect the assets.","title":"RPS Security Considerations"},{"location":"Microservices/RPS/securityRPS/#security-assets","text":"","title":"Security Assets"},{"location":"Microservices/RPS/securityRPS/#remote-admin-password-for-intel-amt","text":"This password is what is configured in the Intel\u00ae AMT firmware that allows a remote user to remotely control the Intel\u00ae AMT device (power actions, remote desktop, remote terminal, etc). When RPS activates an Intel\u00ae AMT device, it sets this password in the Intel\u00ae AMT firmware. This password can either be statically set or can be randomly generated based on the profile defined by the user. It is highly recommended to use randomly generated passwords as this will make each Intel\u00ae AMT device more secure by using unique passwords per device. In a default docker or Kubernetes deployment, RPS will save the Remote Admin Password to the deployed Vault instance.","title":"Remote Admin Password for Intel&reg; AMT"},{"location":"Microservices/RPS/securityRPS/#mebx-password-for-intel-amt","text":"The Management Engine BIOS Extension (MEBX) password is the password that protects the pre-boot menu option that provides access to Intel\u00ae AMT settings. To use this password a user needs to have physical access to the device. It is highly recommended to change this password from the factory default settings upon receiving a new Intel\u00ae AMT device. A RPS profile provides an option for either specifying a static password that is used for all devices configured with a given profile or a randomly generated password can be assigned uniquely per device. The MEBX password set in each device is saved in Vault. While a randomly generated password is more secure, in this case there is risk that if the Vault database is lost, access to the Intel\u00ae AMT device could be very difficult to recover. It is recommended to use the high availability and backup options provided by the Vault solution to ensure that these secrets are not lost.","title":"MEBX Password for Intel&reg; AMT"},{"location":"Microservices/RPS/securityRPS/#provisioning-certificate-for-each-supported-domain","text":"This certificate is unique per owned domain where RPS needs to provision Intel\u00ae AMT devices. This certificate must be derived from a root certificate whose hash matches one of the trusted provisioning root certificate hashes that is listed in the Intel\u00ae AMT device firmware. Generally, the provisioning certificate is purchased from a trusted certificate authority (VeriSign, GoDaddy, Comodo, etc). The full list of supported CAs based on Intel\u00ae AMT version are listed here . This certificate must contain the leaf certificate, root certificate, and all of the intermediate certificates to form a complete certificate chain. Additionally, the certificate file must also include the private key for the certificate (.pfx format). The leaf certificate for the provisioning certificate must match the domain suffix that the Intel\u00ae AMT device is connected as specified by DHCP option 15 or the Trusted DNS suffix in the Management Engine BIOS Extensions (MEBX). Matching this is one of the ways in which the Intel\u00ae AMT firmware establishes trust with RPS . The provisioning certificate is provided by the user when defining an Intel\u00ae AMT profile. RPS fetches the Provisioning Certificate from Vault when it is needed to activate an Intel\u00ae AMT device. If users have provisioning certificates, they will need to understand which profile to use when configuring an Intel\u00ae AMT device based on the network to which the device is currently connected.","title":"Provisioning Certificate for each supported domain"},{"location":"Microservices/RPS/securityRPS/#password-used-to-encrypt-provisioning-certificate","text":"This is the password that is used to encrypt the provisioning certificate .pfx file that is discussed above. RPS uses this password to decrypt the provisioning certificate so that it can use the certificate components and the private key to activate Intel\u00ae AMT devices. RPS fetches the password from Vault and will use it when it is needed to decrypt a provisioning certificate.","title":"Password used to encrypt Provisioning Certificate"},{"location":"Microservices/RPS/securityRPS/#device-configuration-information-sent-to-intel-amt-device","text":"Intel\u00ae AMT firmware uses configuration information to establish trust and then activate the Intel\u00ae AMT device. The information contains the hashed remote admin password and MEBX password. Protect this information while it is being used by RPS and while in transit to the Intel\u00ae AMT device. Ensure that a secure (TLS-encrypted) WebSocket is used when RPS is communicating with the client device. This will protect data in transit. The configuration information uses nonces to prevent replay of this data.","title":"Device configuration information sent to Intel\u00ae AMT device"},{"location":"Microservices/RPS/securityRPS/#mps-cira-login-credentials","text":"To connect to the MPS over a CIRA connection, the Intel\u00ae AMT device needs to provide the correct login credentials for MPS . These credentials are specified as part of the AMT Profile created in RPS . When a device is configured by RPS , the MPS CIRA credentials will be sent to MPS using the Devices POST API call where MPS will then store the credentials. These credentials are verfied by the MPS when the CIRA connection is established.","title":"MPS CIRA Login Credentials"},{"location":"Microservices/RPS/securityRPS/#best-known-security-methods","text":"","title":"Best Known Security Methods"},{"location":"Microservices/RPS/securityRPS/#1-enable-tls-on-network-connections","text":"There are two potential places where TLS could be enable to protect the security assets: * WebSocket connection between RPS and Intel\u00ae AMT client (recommended) * Connection between RPS and Vault - If communication between RPS and Vault is outside a secure container environment (not recommended deployment, see item 2 below) Securing these communication routes will help prevent security assets being exposed through network based attacks intercepting messages between components. It is recommended that the most modern version of TLS be used when encrypting communication.","title":"1 Enable TLS on network connections"},{"location":"Microservices/RPS/securityRPS/#2-secure-and-isolate-execution-environment","text":"RPS holds several of the described security assets in memory during execution. In order to protect these assets while in the memory of RPS , it is recommended that RPS be run in a secure execution environment such as a dedicated container. Deploying into a secure container environment eases the burden of individually securing the assets while in memory or in transit between Open AMT Cloud Toolkit services. Running MPS , RPS , API Gateway, MPS Router, Vault, and Database all within the same secure container instance will help ensure that the communication between these services remains secure.","title":"2 Secure and isolate execution environment"},{"location":"Microservices/RPS/securityRPS/#3-utilize-a-hashicorp-vault-implementation-to-store-security-assets","text":"Utilizing Hashicorp Vault to store security assets either created by or used by RPS will greatly increase the security of these assets. Not only does Vault encrypt the data at rest, but it also manages access to the data itself. As the Vault owner, you decide who gets access to the security assets stored there, not RPS .","title":"3 Utilize a Hashicorp Vault implementation to store security assets"},{"location":"Scaling/overview/","text":"Scaling Overview \u00b6 Scaling functionality in MPS enables Open AMT Cloud Toolkit to support a greater number of managed devices. The toolkit offers various methods for deploying scaling, including Kubernetes (K8s), Azure Kubernetes Service ( AKS ), and Docker Swarm . In addition, administrators can use kuberctl to manage the AKS . Figure 1: High-level Architecture of Scaling Implementation Figure 1 illustrates the basic high-level software flow: Managed devices use CIRA to connect and call home to instances of the MPS in the cloud. RPCs connect to an available instance of the MPS Server with WSS calls. These calls are funneled through Kong* API Gateway, which supports a variety of APIs. Kong manages load balancing, logging, authentication and more. The Kong* API Gateway handles requests from client apps, such as the Sample Web UI included in Open AMT Cloud Toolkit , sending them along to an available RPS . The MPS Router chooses an available instance of the MPS . The RPS microservices communicate with MPS microservices through the REST API. Vault is a tool used to secure, store, and tightly control access to secrets. Storing passwords used by MPS in Vault will increase the security of these assets. Docker in Swarm Mode \u00b6 If you're new to scaling, Docker in swarm mode is a great way to start developing a scaling proof of concept. Docker in swarm mode is a container orchestration tool, software used to deploy and manage large numbers of containers and services. In this mode, Docker enables the administrator to deploy and manage Docker nodes or worker nodes that are added to a Docker swarm instance. Administrator can then deploy a service to the swarm instance and expose ports to an external load balancer. Information To learn more about Docker in swarm mode, start with Swarm mode overview . Get Started with Docker Swarm Kubernetes \u00b6 Kubernetes is a container orchestration system that enables administrators to deploy and manage large numbers of containers and services. Warning The Kubernetes deployment section is not a tutorial for beginners. It intended for those who have prior knowledge of the service. To begin learning about K8s, start with Kubernetes . Get Started with Kubernetes Kubernetes (K8s) \u00b6 K8s is a container orchestration system that enables administrators to deploy and manage large numbers of containers and services. The instructions use kubectl, a command line tool for managing Kubernetes clusters. Warning The K8s deployment section is not a tutorial for beginners. It intended for those who have prior knowledge of the service. To begin learning about K8s, start with Kubernetes . Get Started with K8s Azure Kubernetes Service ( AKS ) \u00b6 AKS is a container orchestration system that enables administrators to deploy and manage large numbers of containers and services. Warning The AKS deployment section is not a tutorial for beginners. It intended for those who have prior knowledge of the service. To begin learning about AKS , start with Azure Kubernetes Service . Get Started with AKS","title":"Overview"},{"location":"Scaling/overview/#scaling-overview","text":"Scaling functionality in MPS enables Open AMT Cloud Toolkit to support a greater number of managed devices. The toolkit offers various methods for deploying scaling, including Kubernetes (K8s), Azure Kubernetes Service ( AKS ), and Docker Swarm . In addition, administrators can use kuberctl to manage the AKS . Figure 1: High-level Architecture of Scaling Implementation Figure 1 illustrates the basic high-level software flow: Managed devices use CIRA to connect and call home to instances of the MPS in the cloud. RPCs connect to an available instance of the MPS Server with WSS calls. These calls are funneled through Kong* API Gateway, which supports a variety of APIs. Kong manages load balancing, logging, authentication and more. The Kong* API Gateway handles requests from client apps, such as the Sample Web UI included in Open AMT Cloud Toolkit , sending them along to an available RPS . The MPS Router chooses an available instance of the MPS . The RPS microservices communicate with MPS microservices through the REST API. Vault is a tool used to secure, store, and tightly control access to secrets. Storing passwords used by MPS in Vault will increase the security of these assets.","title":"Scaling Overview"},{"location":"Scaling/overview/#docker-in-swarm-mode","text":"If you're new to scaling, Docker in swarm mode is a great way to start developing a scaling proof of concept. Docker in swarm mode is a container orchestration tool, software used to deploy and manage large numbers of containers and services. In this mode, Docker enables the administrator to deploy and manage Docker nodes or worker nodes that are added to a Docker swarm instance. Administrator can then deploy a service to the swarm instance and expose ports to an external load balancer. Information To learn more about Docker in swarm mode, start with Swarm mode overview . Get Started with Docker Swarm","title":"Docker in Swarm Mode"},{"location":"Scaling/overview/#kubernetes","text":"Kubernetes is a container orchestration system that enables administrators to deploy and manage large numbers of containers and services. Warning The Kubernetes deployment section is not a tutorial for beginners. It intended for those who have prior knowledge of the service. To begin learning about K8s, start with Kubernetes . Get Started with Kubernetes","title":"Kubernetes"},{"location":"Scaling/overview/#kubernetes-k8s","text":"K8s is a container orchestration system that enables administrators to deploy and manage large numbers of containers and services. The instructions use kubectl, a command line tool for managing Kubernetes clusters. Warning The K8s deployment section is not a tutorial for beginners. It intended for those who have prior knowledge of the service. To begin learning about K8s, start with Kubernetes . Get Started with K8s","title":"Kubernetes (K8s)"},{"location":"Scaling/overview/#azure-kubernetes-service-aks","text":"AKS is a container orchestration system that enables administrators to deploy and manage large numbers of containers and services. Warning The AKS deployment section is not a tutorial for beginners. It intended for those who have prior knowledge of the service. To begin learning about AKS , start with Azure Kubernetes Service . Get Started with AKS","title":"Azure Kubernetes Service (AKS)"},{"location":"Scaling/Docker%20Swarm/docker-swarm/","text":"Introduction \u00b6 This sample deployment demonstrates the use of Docker* in swarm mode. The following conditions apply: All images are built and tested with docker-compose. To learn more about building the images with docker-compose, refer to Express Setup . Push images to the registry to make them available for deployment on other systems. Run the commands below from the open-amt-cloud-toolkit install directory. Important Not for production use. Deploy the stack to the swarm \u00b6 Important - For Linux Before running the following commands on Linux, confirm that the user has been added to the docker group. For instructions, refer to Add docker group . Otherwise, prefix each command with sudo . Initialize a swarm. docker swarm init Copy docker compose config to temporary swarm.yml file. docker-compose -f .\\docker-compose.yml config > swarm.yml Set the network driver to overlay in the swarm.yml file. Linux sed -i \"s|driver: bridge|driver: overlay|g\" swarm.yml Windows ( Get-Content -Path './swarm.yml' ) -replace 'driver: bridge' , 'driver: overlay' | Set-Content -Path './swarm.yml' Important Open the swarm.yml file to check that driver: bridge was replaced with driver: overlay . If the result is incorrect or corrupted, delete the swarm.yml file, rerun Step 2, and manually replace the string. If you've run docker-compose previously, as in the instructions in Express Setup , run docker-compose down to stop the open-amt-cloud-toolkit services: docker-compose down -v Create the stack. docker stack deploy -c swarm.yml scalingdemo Check all of the services are running. docker stack services scalingdemo Success The table below is an example of a services list: ID NAME MODE REPLICAS IMAGE PORTS 6dye78yg66zp scalingdemo_db replicated 1/1 postgres:latest *:5432->5432/tcp nahbub6fxrvu scalingdemo_kong replicated 1/1 kong:2.3 :443->8443/tcp, :8001->8001/tcp nltp54asb8kz scalingdemo_mps replicated 1/1 mps:latest *:4433->4433/tcp uc9jsf5554cv scalingdemo_mpsrouter replicated 1/1 mpsrouter:latest ojtcs8qjxct3 scalingdemo_rps replicated 1/1 rps:latest wbk4of70do63 scalingdemo_vault replicated 1/1 vault:latest *:8200->8200/tcp pc143h8ml4ua scalingdemo_webui replicated 1/1 webui:latest Scale the mps service. docker service scale scalingdemo_mps=2 Success The table below is an example of a services list after scaling the mps: ID NAME MODE REPLICAS IMAGE PORTS 6dye78yg66zp scalingdemo_db replicated 1/1 postgres:latest *:5432->5432/tcp nahbub6fxrvu scalingdemo_kong replicated 1/1 kong:2.3 :443->8443/tcp, :8001->8001/tcp nltp54asb8kz scalingdemo_mps replicated 2/2 mps:latest *:4433->4433/tcp uc9jsf5554cv scalingdemo_mpsrouter replicated 1/1 mpsrouter:latest ojtcs8qjxct3 scalingdemo_rps replicated 1/1 rps:latest wbk4of70do63 scalingdemo_vault replicated 1/1 vault:latest *:8200->8200/tcp pc143h8ml4ua scalingdemo_webui replicated 1/1 webui:latest Remove the stack: docker stack rm scalingdemo","title":"Docker Swarm*"},{"location":"Scaling/Docker%20Swarm/docker-swarm/#introduction","text":"This sample deployment demonstrates the use of Docker* in swarm mode. The following conditions apply: All images are built and tested with docker-compose. To learn more about building the images with docker-compose, refer to Express Setup . Push images to the registry to make them available for deployment on other systems. Run the commands below from the open-amt-cloud-toolkit install directory. Important Not for production use.","title":"Introduction"},{"location":"Scaling/Docker%20Swarm/docker-swarm/#deploy-the-stack-to-the-swarm","text":"Important - For Linux Before running the following commands on Linux, confirm that the user has been added to the docker group. For instructions, refer to Add docker group . Otherwise, prefix each command with sudo . Initialize a swarm. docker swarm init Copy docker compose config to temporary swarm.yml file. docker-compose -f .\\docker-compose.yml config > swarm.yml Set the network driver to overlay in the swarm.yml file. Linux sed -i \"s|driver: bridge|driver: overlay|g\" swarm.yml Windows ( Get-Content -Path './swarm.yml' ) -replace 'driver: bridge' , 'driver: overlay' | Set-Content -Path './swarm.yml' Important Open the swarm.yml file to check that driver: bridge was replaced with driver: overlay . If the result is incorrect or corrupted, delete the swarm.yml file, rerun Step 2, and manually replace the string. If you've run docker-compose previously, as in the instructions in Express Setup , run docker-compose down to stop the open-amt-cloud-toolkit services: docker-compose down -v Create the stack. docker stack deploy -c swarm.yml scalingdemo Check all of the services are running. docker stack services scalingdemo Success The table below is an example of a services list: ID NAME MODE REPLICAS IMAGE PORTS 6dye78yg66zp scalingdemo_db replicated 1/1 postgres:latest *:5432->5432/tcp nahbub6fxrvu scalingdemo_kong replicated 1/1 kong:2.3 :443->8443/tcp, :8001->8001/tcp nltp54asb8kz scalingdemo_mps replicated 1/1 mps:latest *:4433->4433/tcp uc9jsf5554cv scalingdemo_mpsrouter replicated 1/1 mpsrouter:latest ojtcs8qjxct3 scalingdemo_rps replicated 1/1 rps:latest wbk4of70do63 scalingdemo_vault replicated 1/1 vault:latest *:8200->8200/tcp pc143h8ml4ua scalingdemo_webui replicated 1/1 webui:latest Scale the mps service. docker service scale scalingdemo_mps=2 Success The table below is an example of a services list after scaling the mps: ID NAME MODE REPLICAS IMAGE PORTS 6dye78yg66zp scalingdemo_db replicated 1/1 postgres:latest *:5432->5432/tcp nahbub6fxrvu scalingdemo_kong replicated 1/1 kong:2.3 :443->8443/tcp, :8001->8001/tcp nltp54asb8kz scalingdemo_mps replicated 2/2 mps:latest *:4433->4433/tcp uc9jsf5554cv scalingdemo_mpsrouter replicated 1/1 mpsrouter:latest ojtcs8qjxct3 scalingdemo_rps replicated 1/1 rps:latest wbk4of70do63 scalingdemo_vault replicated 1/1 vault:latest *:8200->8200/tcp pc143h8ml4ua scalingdemo_webui replicated 1/1 webui:latest Remove the stack: docker stack rm scalingdemo","title":"Deploy the stack to the swarm"},{"location":"Scaling/Kubernetes/kubernetes/","text":"Introduction \u00b6 Important Not for production use!! This guide explains how to deploy the Open AMT Cloud Toolkit services in kubernetes. Scaling functionality in MPS enables Open AMT Cloud Toolkit to support a greater number of managed devices. High level Design \u00b6 Figure 1: MPS Scaling Architecture \u00b6 Figure 1 presents the high-level architecture of MPS scaling mode. Per the figure, starting at the bottom: Devices connect to an available MPS Server through the load balancer. The REST API requests are routed to an available Web Server, a component of MPS running in scale mode, through a load balancer. The Web Server determines which MPS Server to route the traffic to based on which MPS Server the device is connected to and sends that traffic through the MPS Proxy connection. The MPS Server sends the traffic to the corresponding device. MPS Configuration \u00b6 To support running the service in a distributed environment, some configuration settings were added to MPS . These settings can be modified in open-amt-cloud-toolkit\\scripts\\kubernetes\\serversChart\\values.yaml . All the following settings have already been preset in the values.yaml file. Table 1: MPS configuration settings \u00b6 Component: Setting: Notes: consul distributed_kv_name name of key/value store used. distributed_kv_ip ip of key value store distributed_kv_port port used by key/value store redis redis_enable enable redis caching for web session redis_host redis host redis_port redis port redis_password password used to authenticate to redis general web_proxy_port port the web server used to communicate to MPS . network_adaptor network identifier used when device connects to MPS . Can be either an adaptor name such as eth0 or starting ip address such as 192.168 . startup_mode microservice run mode. standalone when running in non scaling mode or run components in mps and web for distributed mode. Get the Toolkit \u00b6 To clone the repositories: Open a Command Prompt or Terminal and navigate to a directory of your choice for development: git clone --recursive https://github.com/open-amt-cloud-toolkit/open-amt-cloud-toolkit Building the docker images \u00b6 Please build and push the following images from the following open-amt-cloud-toolkit repositories MPS , RPS , and sample-web-ui into a public repository. Please update \"docker.io/vprodemo\" to the desired public repository and \"mps\" to the corresponding repository name. docker build . -t docker.io/vprodemo/mps:latest docker push docker.io/vprodemo/mps:latest Prerequisite \u00b6 Install required software in Windows environment(in admin mode): Run \\open-amt-cloud-toolkit\\scripts\\kubernetes\\installchoco.bat to install the choco package manager Close and reopen command window Run \\open-amt-cloud-toolkit\\scripts\\kubernetes\\installpackages.bat to install the required packages Steps to Deploy \u00b6 Edit entries in the launch.bat file to fit deployment. Update section images in stack environmental variables in open-amt-cloud-toolkit\\scripts\\kubernetes\\serversChart\\values.yaml that correspond with desired images for launch. If containers are in a private container registry, a base64 auth token needs to be created and placed in open-amt-cloud-toolkit\\scripts\\kubernetes\\config.json Launch with command launch.bat [resourceGroupName] [replace the resourceGroupName with the desired resource group name for the deployment] Use the settings in the \\open-amt-cloud-toolkit\\scripts\\kubernetes\\.env file to update the values in \\open-amt-cloud-toolkit\\scripts\\kubernetes\\serversChart\\values.yaml From \\open-amt-cloud-toolkit\\scripts\\kubernetes run helm install openamtcloudstack ./serversChart to deploy the services into kubernetes. After deployment is complete use the command kubectl get pods to verify all pods have been launched successfully. Note Please restore values.yaml to its prelaunch condition before subsequent deployments","title":"Kubernetes"},{"location":"Scaling/Kubernetes/kubernetes/#introduction","text":"Important Not for production use!! This guide explains how to deploy the Open AMT Cloud Toolkit services in kubernetes. Scaling functionality in MPS enables Open AMT Cloud Toolkit to support a greater number of managed devices.","title":"Introduction"},{"location":"Scaling/Kubernetes/kubernetes/#high-level-design","text":"","title":"High level Design"},{"location":"Scaling/Kubernetes/kubernetes/#figure-1-mps-scaling-architecture","text":"Figure 1 presents the high-level architecture of MPS scaling mode. Per the figure, starting at the bottom: Devices connect to an available MPS Server through the load balancer. The REST API requests are routed to an available Web Server, a component of MPS running in scale mode, through a load balancer. The Web Server determines which MPS Server to route the traffic to based on which MPS Server the device is connected to and sends that traffic through the MPS Proxy connection. The MPS Server sends the traffic to the corresponding device.","title":"Figure 1: MPS Scaling Architecture"},{"location":"Scaling/Kubernetes/kubernetes/#mps-configuration","text":"To support running the service in a distributed environment, some configuration settings were added to MPS . These settings can be modified in open-amt-cloud-toolkit\\scripts\\kubernetes\\serversChart\\values.yaml . All the following settings have already been preset in the values.yaml file.","title":"MPS Configuration"},{"location":"Scaling/Kubernetes/kubernetes/#table-1-mps-configuration-settings","text":"Component: Setting: Notes: consul distributed_kv_name name of key/value store used. distributed_kv_ip ip of key value store distributed_kv_port port used by key/value store redis redis_enable enable redis caching for web session redis_host redis host redis_port redis port redis_password password used to authenticate to redis general web_proxy_port port the web server used to communicate to MPS . network_adaptor network identifier used when device connects to MPS . Can be either an adaptor name such as eth0 or starting ip address such as 192.168 . startup_mode microservice run mode. standalone when running in non scaling mode or run components in mps and web for distributed mode.","title":"Table 1: MPS configuration settings"},{"location":"Scaling/Kubernetes/kubernetes/#get-the-toolkit","text":"To clone the repositories: Open a Command Prompt or Terminal and navigate to a directory of your choice for development: git clone --recursive https://github.com/open-amt-cloud-toolkit/open-amt-cloud-toolkit","title":"Get the Toolkit"},{"location":"Scaling/Kubernetes/kubernetes/#building-the-docker-images","text":"Please build and push the following images from the following open-amt-cloud-toolkit repositories MPS , RPS , and sample-web-ui into a public repository. Please update \"docker.io/vprodemo\" to the desired public repository and \"mps\" to the corresponding repository name. docker build . -t docker.io/vprodemo/mps:latest docker push docker.io/vprodemo/mps:latest","title":"Building the docker images"},{"location":"Scaling/Kubernetes/kubernetes/#prerequisite","text":"Install required software in Windows environment(in admin mode): Run \\open-amt-cloud-toolkit\\scripts\\kubernetes\\installchoco.bat to install the choco package manager Close and reopen command window Run \\open-amt-cloud-toolkit\\scripts\\kubernetes\\installpackages.bat to install the required packages","title":"Prerequisite"},{"location":"Scaling/Kubernetes/kubernetes/#steps-to-deploy","text":"Edit entries in the launch.bat file to fit deployment. Update section images in stack environmental variables in open-amt-cloud-toolkit\\scripts\\kubernetes\\serversChart\\values.yaml that correspond with desired images for launch. If containers are in a private container registry, a base64 auth token needs to be created and placed in open-amt-cloud-toolkit\\scripts\\kubernetes\\config.json Launch with command launch.bat [resourceGroupName] [replace the resourceGroupName with the desired resource group name for the deployment] Use the settings in the \\open-amt-cloud-toolkit\\scripts\\kubernetes\\.env file to update the values in \\open-amt-cloud-toolkit\\scripts\\kubernetes\\serversChart\\values.yaml From \\open-amt-cloud-toolkit\\scripts\\kubernetes run helm install openamtcloudstack ./serversChart to deploy the services into kubernetes. After deployment is complete use the command kubectl get pods to verify all pods have been launched successfully. Note Please restore values.yaml to its prelaunch condition before subsequent deployments","title":"Steps to Deploy"},{"location":"Topics/guids/","text":"GUIDs in Intel\u00ae AMT \u00b6 Each Intel\u00ae AMT device has a Global Unique Identifier (GUID) assigned to it by default. This GUID will be used as the reference to each device record. Typically, device GUIDs are required to perform power actions and other device-specific manageability features. There are a number of ways to obtain the GUID on the Intel\u00ae AMT device: Sample Web UI of the Open AMT Cloud Toolkit Devices API Method Via Sample Web UI \u00b6 Login to your Sample Web UI . Navigate to the Devices tab. Your AMT device's GUID is listed in the 2nd column. Via API Method \u00b6 A device's GUID can also be found via the AllDevices or ConnectedDevices MPS methods. Users can follow the Construct a Rest API Call tutorial on constructing and running the ConnectedDevices method as an example. Example ConnectedDevices Output: [{ \"host\" : \"d12428be-9fa1-4226-9784-54b2038beab6\" , \"amtuser\" : \"admin\" , \"mpsuser\" : \"standalone\" , \"conn\" : 1 , \"name\" : \"d12428be-9fa1-4226-9784-54b2038beab6\" }]","title":"GUIDs in Intel\u00ae AMT"},{"location":"Topics/guids/#guids-in-intel-amt","text":"Each Intel\u00ae AMT device has a Global Unique Identifier (GUID) assigned to it by default. This GUID will be used as the reference to each device record. Typically, device GUIDs are required to perform power actions and other device-specific manageability features. There are a number of ways to obtain the GUID on the Intel\u00ae AMT device: Sample Web UI of the Open AMT Cloud Toolkit Devices API Method","title":"GUIDs in Intel\u00ae AMT"},{"location":"Topics/guids/#via-sample-web-ui","text":"Login to your Sample Web UI . Navigate to the Devices tab. Your AMT device's GUID is listed in the 2nd column.","title":"Via Sample Web UI"},{"location":"Topics/guids/#via-api-method","text":"A device's GUID can also be found via the AllDevices or ConnectedDevices MPS methods. Users can follow the Construct a Rest API Call tutorial on constructing and running the ConnectedDevices method as an example. Example ConnectedDevices Output: [{ \"host\" : \"d12428be-9fa1-4226-9784-54b2038beab6\" , \"amtuser\" : \"admin\" , \"mpsuser\" : \"standalone\" , \"conn\" : 1 , \"name\" : \"d12428be-9fa1-4226-9784-54b2038beab6\" }]","title":"Via API Method"},{"location":"Topics/logging/","text":"Logging \u00b6 Introduction \u00b6 Microservices logging uses the Winston logging format. Log levels for both MPS and RPS microservices are controlled by the environmental variables MPS_LOG_LEVEL and RPS_LOG_LEVEL respectively. Logging levels are listed in the table below by increasing level of detail: error , warn , info , verbose , debug , and silly . Log levels \u00b6 Log level Description error only critical errors such as exceptions; 500 level api responses warn unexpected issue which don't affect service operation info service startup and shutdown messages (default level for MPS and RPS services) verbose database query messages; device heartbeat; 200 level api responses debug level useful for diagnosing issues with the services; 400 level api responses silly all logs","title":"Logging"},{"location":"Topics/logging/#logging","text":"","title":"Logging"},{"location":"Topics/logging/#introduction","text":"Microservices logging uses the Winston logging format. Log levels for both MPS and RPS microservices are controlled by the environmental variables MPS_LOG_LEVEL and RPS_LOG_LEVEL respectively. Logging levels are listed in the table below by increasing level of detail: error , warn , info , verbose , debug , and silly .","title":"Introduction"},{"location":"Topics/logging/#log-levels","text":"Log level Description error only critical errors such as exceptions; 500 level api responses warn unexpected issue which don't affect service operation info service startup and shutdown messages (default level for MPS and RPS services) verbose database query messages; device heartbeat; 200 level api responses debug level useful for diagnosing issues with the services; 400 level api responses silly all logs","title":"Log levels"},{"location":"Topics/mqtt/","text":"Event Monitoring with MQTT ( MQTT Eventing) \u00b6 Open AMT Cloud Toolkit supports Eventing using Message Queuing Telemetry Transport ( MQTT ), an IoT publish-and-subscribe network protocol. With MQTT Eventing, administrators can subscribe to specific topics, categories of events, for server event monitoring. This eliminates the need to query or poll MPS to determine network events, such as a device's activation or deactivation. Administrators can subscribe to events and respond proactively. Important Currently, the implementation publishes all MPS REST API call events to the MQTT Broker. Figure 1: MQTT Eventing Examples An Open AMT Cloud Toolkit sends JSON events to a Mosquitto* broker deployed as a Docker container. Administrators subscribe to the broker. As shown in Figure 1, proactive notifications are published in the MQTT Broker container. What You'll Need \u00b6 Obtain MQTT Explorer: Choose the MQTT tool of your choice. In the example, below we use is MQTT Explorer. Go to the Microsoft Store. See other supported OS installation packages . Type MQTT-Explorer in Search . Choose Get and then Install . Set Up MQTT Support \u00b6 To enable support: In a text editor or IDE of choice, open the .env file to edit. Update the field MPS_MQTT_ADDRESS with mqtt://mosquitto:8883 . The mqtt: prefix indicates an MQTT broker is being used. Kong* will now route event messages to port 8883. Save and close the file. Rebuild the MPS image and start the container. If your stack was deployed locally using Docker: docker-compose up -d --build mps Open MQTT Explorer to see the events: Choose + Connections to create a new connection. Add a Name (suggested: MPS ). Verify Validate certificate and Encryption (tls) are disabled . Choose the mqtt:// option from the dropdown protocol . In the Host field, add the IP address of the system where Kong is installed. In the Port field, add 8883. Choose Connect. Example In the Sample Web UI , click on a managed device from Devices list or make an API call to see an event appear in MQTT Explorer.","title":"Viewing MQTT Events"},{"location":"Topics/mqtt/#event-monitoring-with-mqtt-mqtt-eventing","text":"Open AMT Cloud Toolkit supports Eventing using Message Queuing Telemetry Transport ( MQTT ), an IoT publish-and-subscribe network protocol. With MQTT Eventing, administrators can subscribe to specific topics, categories of events, for server event monitoring. This eliminates the need to query or poll MPS to determine network events, such as a device's activation or deactivation. Administrators can subscribe to events and respond proactively. Important Currently, the implementation publishes all MPS REST API call events to the MQTT Broker. Figure 1: MQTT Eventing Examples An Open AMT Cloud Toolkit sends JSON events to a Mosquitto* broker deployed as a Docker container. Administrators subscribe to the broker. As shown in Figure 1, proactive notifications are published in the MQTT Broker container.","title":"Event Monitoring with MQTT (MQTT Eventing)"},{"location":"Topics/mqtt/#what-youll-need","text":"Obtain MQTT Explorer: Choose the MQTT tool of your choice. In the example, below we use is MQTT Explorer. Go to the Microsoft Store. See other supported OS installation packages . Type MQTT-Explorer in Search . Choose Get and then Install .","title":"What You'll Need"},{"location":"Topics/mqtt/#set-up-mqtt-support","text":"To enable support: In a text editor or IDE of choice, open the .env file to edit. Update the field MPS_MQTT_ADDRESS with mqtt://mosquitto:8883 . The mqtt: prefix indicates an MQTT broker is being used. Kong* will now route event messages to port 8883. Save and close the file. Rebuild the MPS image and start the container. If your stack was deployed locally using Docker: docker-compose up -d --build mps Open MQTT Explorer to see the events: Choose + Connections to create a new connection. Add a Name (suggested: MPS ). Verify Validate certificate and Encryption (tls) are disabled . Choose the mqtt:// option from the dropdown protocol . In the Host field, add the IP address of the system where Kong is installed. In the Port field, add 8883. Choose Connect. Example In the Sample Web UI , click on a managed device from Devices list or make an API call to see an event appear in MQTT Explorer.","title":"Set Up MQTT Support"},{"location":"Topics/powerstates/","text":"Actions are specified by number. Use the PowerCapabilities method to return the actions available for a specific device. Use the PowerState method to obtain the current power state. Possible actions are listed in the following table: Action # Resulting Action 2 Power up/on 4 Sleep 5 Power cycle 7 Hibernate 8 Power down/off 10 Reset 12 Soft power down/off 14 Soft reset 100 Power up to BIOS settings 101 Reset to BIOS settings 104 Reset to secure erase 200 Reset to IDE-R floppy disc 201 Power on to IDE-R floppy disc 202 Reset to IDE-R CD-ROM 203 Power on to IDE-R CD-ROM 400 Reset to PXE 401 Power on to PXE Consider the current state of the system when implementing a possible action. For example: Reset to BIOS implies that the current system state is on or powered up. Power up to BIOS implies that current system state is off or powered down. Hibernate implies that the current system state is powered up. If the system is already powered up, choosing to Power Up to BIOS will not have any effect on the system. A better choice is Reset to BIOS.","title":"AMT Power States"},{"location":"Topics/proxies/","text":"Proxies \u00b6 MPS \u00b6 RPS \u00b6 RPC \u00b6","title":"Proxies"},{"location":"Topics/proxies/#proxies","text":"","title":"Proxies"},{"location":"Topics/proxies/#mps","text":"","title":"MPS"},{"location":"Topics/proxies/#rps","text":"","title":"RPS"},{"location":"Topics/proxies/#rpc","text":"","title":"RPC"},{"location":"Topics/staticIP/","text":"Static and Dynamic IP Addresses \u00b6 Create Static IPs and Certificates \u00b6 Open Command Prompt as an Administrator. Change directory to the ..\\scripts\\kubernetes folder within the MPS repository that was downloaded and unzipped. cd [path-to-MPS_MicroService-repo-folder]\\scripts\\kubernetes In this directory, run the following .bat script to create the required IPs and Certificates for MPS and RPS. Provide a new password of your choice for your private keys and save and/or remember it. createipsandcerts.bat [resource-group-name] [aks-cluster-name][your-private-keys-password] Copy and save the outputted MPS Static IP Address, RPS Static IP Address, and Node Resource Group from the script. C:\\quickstart\\mps\\scripts\\kubernetes>\"MPS IP ADDRESS\" 13.87.225.246 C:\\quickstart\\mps\\scripts\\kubernetes>\"RPS IP ADDRESS\" 13.87.226.61 C:\\quickstart\\mps\\scripts\\kubernetes>\"Node Resource Group\" C_matt-rg_matt-aks_westus Creating kubectl secrets with name \"mpscerts\" and keys rootCA_mps.key rootCA_mps.crt mps_cert.key mps_cert.crt secret/mpscerts created Creating kubectl secrets with name \"rpscerts\" and keys rootCA_rps.key rootCA_rps.crt rps_cert.key rps_cert.crt secret/rpscerts created At this point, all of your cert key names are stored in your Kubernetes secret store. When building the stack, we will pull them down.","title":"Static and Dynamic IP Addresses"},{"location":"Topics/staticIP/#static-and-dynamic-ip-addresses","text":"","title":"Static and Dynamic IP Addresses"},{"location":"Topics/staticIP/#create-static-ips-and-certificates","text":"Open Command Prompt as an Administrator. Change directory to the ..\\scripts\\kubernetes folder within the MPS repository that was downloaded and unzipped. cd [path-to-MPS_MicroService-repo-folder]\\scripts\\kubernetes In this directory, run the following .bat script to create the required IPs and Certificates for MPS and RPS. Provide a new password of your choice for your private keys and save and/or remember it. createipsandcerts.bat [resource-group-name] [aks-cluster-name][your-private-keys-password] Copy and save the outputted MPS Static IP Address, RPS Static IP Address, and Node Resource Group from the script. C:\\quickstart\\mps\\scripts\\kubernetes>\"MPS IP ADDRESS\" 13.87.225.246 C:\\quickstart\\mps\\scripts\\kubernetes>\"RPS IP ADDRESS\" 13.87.226.61 C:\\quickstart\\mps\\scripts\\kubernetes>\"Node Resource Group\" C_matt-rg_matt-aks_westus Creating kubectl secrets with name \"mpscerts\" and keys rootCA_mps.key rootCA_mps.crt mps_cert.key mps_cert.crt secret/mpscerts created Creating kubectl secrets with name \"rpscerts\" and keys rootCA_rps.key rootCA_rps.crt rps_cert.key rps_cert.crt secret/rpscerts created At this point, all of your cert key names are stored in your Kubernetes secret store. When building the stack, we will pull them down.","title":"Create Static IPs and Certificates"},{"location":"Topics/MEBX/dnsSuffix/","text":"Manageability Engine BIOS Extensions (MEBX) \u00b6 Intel\u00ae MEBX allows for configuration of the Intel Manageability Engine (ME) platform. Through this interface, you can provision AMT and customize a variety of settings manually. Set a DNS Suffix through MEBX \u00b6 If DHCP option15 is not set, the following needs to be set manually through MEBX if you want to re-activate the device remotely at a later time. 1. Restart or power on the device 2. While the device is booting up, press Ctrl+P to reach the MEBX login screen Important In the example above, Ctrl+P reaches the MEBX login screen. BIOS screen activation may vary among manufacturers. Check your system documentation. 3. Enter the AMT password Note If it is the first time entering MEBX and the device has not been provisioned previously, the default password is admin . It will prompt you to create a new password. 4. Select \u2018Remote Setup and Configuration\u2019 5. Select \u2018TLS PKI\u2019 6. Select \u2018PKI DNS Suffix\u2019 7. Provide a DNS suffix name and press enter 8. Press Esc three times to reach the main menu 9. Select \u2018MEBX Exit\u2019, and then press 'y' to confirm the exit","title":"DNS Suffix"},{"location":"Topics/MEBX/dnsSuffix/#manageability-engine-bios-extensions-mebx","text":"Intel\u00ae MEBX allows for configuration of the Intel Manageability Engine (ME) platform. Through this interface, you can provision AMT and customize a variety of settings manually.","title":"Manageability Engine BIOS Extensions (MEBX)"},{"location":"Topics/MEBX/dnsSuffix/#set-a-dns-suffix-through-mebx","text":"If DHCP option15 is not set, the following needs to be set manually through MEBX if you want to re-activate the device remotely at a later time. 1. Restart or power on the device 2. While the device is booting up, press Ctrl+P to reach the MEBX login screen Important In the example above, Ctrl+P reaches the MEBX login screen. BIOS screen activation may vary among manufacturers. Check your system documentation. 3. Enter the AMT password Note If it is the first time entering MEBX and the device has not been provisioned previously, the default password is admin . It will prompt you to create a new password. 4. Select \u2018Remote Setup and Configuration\u2019 5. Select \u2018TLS PKI\u2019 6. Select \u2018PKI DNS Suffix\u2019 7. Provide a DNS suffix name and press enter 8. Press Esc three times to reach the main menu 9. Select \u2018MEBX Exit\u2019, and then press 'y' to confirm the exit","title":"Set a DNS Suffix through MEBX"},{"location":"Topics/MEBX/unprovision/","text":"Manageability Engine BIOS Extensions (MEBX) \u00b6 Intel\u00ae MEBX allows for configuration of the Intel Manageability Engine (ME) platform. Through this interface, you can provision AMT and customize a variety of settings manually. Unprovision an AMT Device Through MEBX \u00b6 1. Restart or power on the device 2. While the device is booting up, press Ctrl+P to reach the MEBX login screen Important In the example above, Ctrl+P reaches the MEBX login screen. BIOS screen activation may vary among manufacturers. Check your system documentation. 3. Enter the AMT password Note If it is the first time entering MEBX, the default password is admin . It will prompt you to create a new password. 4. Select \u2018Intel AMT configuration\u2019 5. Select \u2018Unconfigure Network access\u2019 6. Select \u2018Full unprovision\u2019, and then press 'y' to continue 7. It takes 30 seconds to a minute to unprovision the device. While it is unprovisioning, the up/down arrow keys will not work.","title":"Unprovisioning"},{"location":"Topics/MEBX/unprovision/#manageability-engine-bios-extensions-mebx","text":"Intel\u00ae MEBX allows for configuration of the Intel Manageability Engine (ME) platform. Through this interface, you can provision AMT and customize a variety of settings manually.","title":"Manageability Engine BIOS Extensions (MEBX)"},{"location":"Topics/MEBX/unprovision/#unprovision-an-amt-device-through-mebx","text":"1. Restart or power on the device 2. While the device is booting up, press Ctrl+P to reach the MEBX login screen Important In the example above, Ctrl+P reaches the MEBX login screen. BIOS screen activation may vary among manufacturers. Check your system documentation. 3. Enter the AMT password Note If it is the first time entering MEBX, the default password is admin . It will prompt you to create a new password. 4. Select \u2018Intel AMT configuration\u2019 5. Select \u2018Unconfigure Network access\u2019 6. Select \u2018Full unprovision\u2019, and then press 'y' to continue 7. It takes 30 seconds to a minute to unprovision the device. While it is unprovisioning, the up/down arrow keys will not work.","title":"Unprovision an AMT Device Through MEBX"},{"location":"Tutorials/addDatabase/","text":"RPS has the option to output device configuration information to a database so that other software components with access to this database can lookup and use the AMT credentials stored there. Since there are many database options available, RPS takes a flexible approach that allows a developer to implement a simple module in RPS that will allow RPS to then send data to the database implementation of choice. The following example uses MongoDB as the example database, but the same concepts could be used for other database implementations. Create a file called AmtDeviceMongoDbRepository.ts in the \\RPS_MicroServer\\src\\repositories folder This module will need to implement the MongoDB types from mongodb and ILogger, AMTDeviceDTO, and IAMTDeviceWriter from RPS. Below is an example of how this could be implemented: // we imported all types from mongodb driver, to use in code import { MongoClient , Client , Collection , InsertOneWriteOpResult } from 'mongodb' ; import { ILogger } from '../interfaces/ILogger' ; import { AMTDeviceDTO } from './dto/AmtDeviceDTO' ; import { IAMTDeviceWriter } from './interfaces/IAMTDeviceWriter' ; // that class only can be extended export class AmtDeviceMongoDbRepository implements IAMTDeviceWriter { private collection : Collection ; private client : Client ; private connectionString : string ; private databaseName : string ; private collectionName : string ; private logger : ILogger ; constructor ( logger : ILogger , connectionString : string , databaseName : string , collectionName : string ) { this . connectionString = connectionString ; this . databaseName = databaseName ; this . collectionName = collectionName ; this . logger = logger ; } async connect () { let connection = await MongoClient . connect ( this . connectionString , { useNewUrlParser : true }); let database = connection . db ( this . databaseName ); this . collection = database . collection ( this . collectionName ); } disconnect () { if ( this . client ) { this . client . disconnect (); } } public async insert ( device : AMTDeviceDTO ) : Promise < boolean > { try { if ( ! this . collection ) { await this . connect (); } let result : InsertOneWriteOpResult = await this . collection . insertOne ( device ); return !! result . result . ok ; } catch ( error ) { this . logger . error ( `exception inserting record: ${ JSON . stringify ( error ) } ` ); return false ; } } } Edit the file index.ts in \\RPS_MicroServer\\src\\ and import the implementation of database module. For example: import { AmtDeviceMongoDbRepository } from './repositories/AmtDeviceMongoDbRepository' ; Edit the file index.ts in \\RPS_MicroServer\\src\\ and set the amtDeviceWriter object to an instance of the repository (under configurator.isAMTDeviceWriterEnabled() located in line 35). For example: amtDeviceWriter = new AmtDeviceMongoDbRepository ( Logger ( \"AmtDeviceMongoDbRepository\" ), configurator . DbConfig . connectionString , configurator . DbConfig . databaseName configurator . DbConfig . collectionName ); Edit the file package.json and add \"mongodb\": \"^3.3.12\" under dev dependencies. Edit app.config.dev.json database info DbConfig: Configure the Database \u00b6 The DbConfig section configures how RPS connects to a database, which we're not doing for this exercise. Set DbEnabled to false , if it isn't already. Option Description DbEnabled Set to true to enable database integration. To use GenerateRandomPassword for an Intel\u00ae AMT profile, DbEnabled must be set to true. connectionString Specifies how RPS should connect to the database. If DbEnabled is set to true , this is required. databaseName Specifies the name of the database that RPS should use. If DbEnabled is set to true , this is required. collectionName Specifies the collection in the database that RPS should use. If DbEnabled is set to true , this is required.","title":"addDatabase"},{"location":"Tutorials/addDatabase/#dbconfig-configure-the-database","text":"The DbConfig section configures how RPS connects to a database, which we're not doing for this exercise. Set DbEnabled to false , if it isn't already. Option Description DbEnabled Set to true to enable database integration. To use GenerateRandomPassword for an Intel\u00ae AMT profile, DbEnabled must be set to true. connectionString Specifies how RPS should connect to the database. If DbEnabled is set to true , this is required. databaseName Specifies the name of the database that RPS should use. If DbEnabled is set to true , this is required. collectionName Specifies the collection in the database that RPS should use. If DbEnabled is set to true , this is required.","title":"DbConfig: Configure the Database"},{"location":"Tutorials/addMqttEvents/","text":"RPS and MPS both have the ability to publish event messages through an MQTT Broker. The following will demonstrate how to add, remove or edit the events published by the server. For information on the process of subscribing to these events, see MQTT Eventing Support . There are three main components that can be manipulated within the MQTT event flow: individual events throughout MPS / RPS , the MqttProvider class and the MQTT Broker. Individual Events \u00b6 Adding Events \u00b6 Events can be added anywhere with RPS and MPS using the publishEvent method as long as the MqttProvider class is imported. Here is an example of how an implementation might look. import { MqttProvider } from '../../utils/mqttProvider' MqttProvider . publishEvent ( 'success' , [ 'Example' ], 'Hello World' , guid ) The publishEvent method takes the parameters (message type, array of methods associated with the message, message to be sent, and optionally the guid of the device) and creates a message to be published by the event broker. Note See MqttProvider Class section for how to change the parameters and behavior of the publishEvent method. Editing / Deleting Events \u00b6 A number of default events have been added to RPS and MPS , such as API calls and action events. If any of these events are deemed to be lacking or unnecessary they can simply be edited or deleted. Event pubishing works independently from the inner workings of RPS and MPS and thus will function normally with the addition, adaptation or deletion of any individual events. MqttProvider Class \u00b6 Connecting \u00b6 This class handles the interactions with the MQTT Broker. A connection is established in the respective index.ts files of RPS and MPS with the following code. const mqtt : MqttProvider = new MqttProvider ( config ) mqtt . connectBroker () The connectBroker method creates the connection between a client (stored in the class) and the mosquitto docker container which acts as the MQTT Broker. Then the instance of the class that was just created and connected is stored as a static object within the class, allowing for the methods in this class to be accessed easily with a simple import rather than passing the instance around MPS or RPS . The config parameter contains the respective config types of MPS and RPS but MqttProvider is really only looking for the MQTT_ADDRESS environment variable so it knows where to connect to. Important The MQTT_ADDRESS environment variables for MPS and RPS are left blank in the .env.template file. This corresponds to the OFF state. To turn event logging with mosquitto ON give the address of the MQTT Broker mqtt://mosquitto:8883 to the MPS_MQTT_ADDRESS and RPS_MQTT_ADDRESS environment variables. Usage \u00b6 Currently the core functionality of this system is focused around the publishEvent method. This is the developers way of creating server events that will be sent to the MQTT Broker and then published to subscribers. The function simply takes information about an event the developer wants to publish, organizes it, adds a timestamp and sends it to the MQTT Broker. This setup can be expanded upon by changing the parameters and the elements within OpenAMTEvent (the interface used to organize the message) or by adding new methods altogether. One common change might be to the handling of topics. Topics are how subscribers choose what information they would like to receive and are organized in a directory-like structure. For instance, if a message has the topic cars/ford then subscribers of # , cars or cars/ford will receive the message while subscribers of trucks or cars/ferrari will not. The method used to send a message to the MQTT Broker is publish , and the first argument of this method is the topic. Currently, this is hardcoded with a default value but a developer could add a parameter, tie the topic to existing parameters or create different publishEvent methods that correspond to different topics. MQTT Broker \u00b6 The Broker for MQTT messages is the docker container named mosquitto and it runs the eclipse-mosquitto:latest image. Changes to the functionality of the Broker can be made through mosquitto.conf . Most of the Broker setup has been left in its default state but more information about customizing the broker can be found here .","title":"Adding/Editing Events"},{"location":"Tutorials/addMqttEvents/#individual-events","text":"","title":"Individual Events"},{"location":"Tutorials/addMqttEvents/#adding-events","text":"Events can be added anywhere with RPS and MPS using the publishEvent method as long as the MqttProvider class is imported. Here is an example of how an implementation might look. import { MqttProvider } from '../../utils/mqttProvider' MqttProvider . publishEvent ( 'success' , [ 'Example' ], 'Hello World' , guid ) The publishEvent method takes the parameters (message type, array of methods associated with the message, message to be sent, and optionally the guid of the device) and creates a message to be published by the event broker. Note See MqttProvider Class section for how to change the parameters and behavior of the publishEvent method.","title":"Adding Events"},{"location":"Tutorials/addMqttEvents/#editing-deleting-events","text":"A number of default events have been added to RPS and MPS , such as API calls and action events. If any of these events are deemed to be lacking or unnecessary they can simply be edited or deleted. Event pubishing works independently from the inner workings of RPS and MPS and thus will function normally with the addition, adaptation or deletion of any individual events.","title":"Editing / Deleting Events"},{"location":"Tutorials/addMqttEvents/#mqttprovider-class","text":"","title":"MqttProvider Class"},{"location":"Tutorials/addMqttEvents/#connecting","text":"This class handles the interactions with the MQTT Broker. A connection is established in the respective index.ts files of RPS and MPS with the following code. const mqtt : MqttProvider = new MqttProvider ( config ) mqtt . connectBroker () The connectBroker method creates the connection between a client (stored in the class) and the mosquitto docker container which acts as the MQTT Broker. Then the instance of the class that was just created and connected is stored as a static object within the class, allowing for the methods in this class to be accessed easily with a simple import rather than passing the instance around MPS or RPS . The config parameter contains the respective config types of MPS and RPS but MqttProvider is really only looking for the MQTT_ADDRESS environment variable so it knows where to connect to. Important The MQTT_ADDRESS environment variables for MPS and RPS are left blank in the .env.template file. This corresponds to the OFF state. To turn event logging with mosquitto ON give the address of the MQTT Broker mqtt://mosquitto:8883 to the MPS_MQTT_ADDRESS and RPS_MQTT_ADDRESS environment variables.","title":"Connecting"},{"location":"Tutorials/addMqttEvents/#usage","text":"Currently the core functionality of this system is focused around the publishEvent method. This is the developers way of creating server events that will be sent to the MQTT Broker and then published to subscribers. The function simply takes information about an event the developer wants to publish, organizes it, adds a timestamp and sends it to the MQTT Broker. This setup can be expanded upon by changing the parameters and the elements within OpenAMTEvent (the interface used to organize the message) or by adding new methods altogether. One common change might be to the handling of topics. Topics are how subscribers choose what information they would like to receive and are organized in a directory-like structure. For instance, if a message has the topic cars/ford then subscribers of # , cars or cars/ford will receive the message while subscribers of trucks or cars/ferrari will not. The method used to send a message to the MQTT Broker is publish , and the first argument of this method is the topic. Currently, this is hardcoded with a default value but a developer could add a parameter, tie the topic to existing parameters or create different publishEvent methods that correspond to different topics.","title":"Usage"},{"location":"Tutorials/addMqttEvents/#mqtt-broker","text":"The Broker for MQTT messages is the docker container named mosquitto and it runs the eclipse-mosquitto:latest image. Changes to the functionality of the Broker can be made through mosquitto.conf . Most of the Broker setup has been left in its default state but more information about customizing the broker can be found here .","title":"MQTT Broker"},{"location":"Tutorials/addVault/","text":"Install Vault \u00b6 Create a folder in a directory of your choice, and browse to it using a Command Prompt or terminal window (as Administrator, if on Windows). Clone the following Vault-helm repository and install it. git clone https://github.com/hashicorp/vault-helm.git cd vault-helm git checkout v0.2.1 helm install vault . Periodically, check the status of the vault pod until it is in the Running state. Copy and save the Vault Pod's name. Usually, the Vault pod is named 'vault-0'. The Vault Pod's name is shown in the first column of the kubectl get pods command. kubectl get pods An example of the pod status is below: NAME READY STATUS RESTARTS AGE vault-0 0/1 Running 0 114s Initialize the vault using the following command: kubectl exec -it [vault-pod-name] -- vault operator init -n 1 -t 1 On completion, the output will display the Unseal Key and Initial Root Token. Copy and save both values for future use. These values will be used to unseal and enable the Vault as well as create the necessary secrets. Unseal Key 1: MG+pLyiasq11B/o7hEbctkrTIpGaVDqja3SWJzSLgs0= Initial Root Token: s.Wvxni2SudRB0R91fLOaGFS6h Vault initialized with 1 key shares and a key threshold of 1. Please securely distribute the key shares printed above. When the Vault is re-sealed, restarted, or stopped, you must supply at least 1 of these keys to unseal it before it can start servicing requests. Unseal Vault \u00b6 Unseal the Vault using your Unseal Key 1 in your Command Prompt or terminal window. kubectl exec -it [vault-pod-name] -- vault operator unseal [unseal-key-1-from-init-command] Example Output: Key Value --- ----- Seal Type shamir Initialized true Sealed false Total Shares 1 Threshold 1 Version 1.2.4 Cluster Name vault-cluster-9a51d062 Cluster ID 3a25afe3-ad48-e8bf-1afa-c924f046c746 HA Enabled false Enable Vault at a Path \u00b6 For this example, we are going to use a key/value secrets engine. Enable it using the following commands: Log in to Vault using your initial root token from initializing Vault in Step 3.i.5 kubectl exec -it [vault-pod-name] -- vault login [your-initial-root-token] Then, enable the 'kv' secrets engine. kubectl exec -it [vault-pod-name] -- vault secrets enable -version=2 kv","title":"addVault"},{"location":"Tutorials/addVault/#install-vault","text":"Create a folder in a directory of your choice, and browse to it using a Command Prompt or terminal window (as Administrator, if on Windows). Clone the following Vault-helm repository and install it. git clone https://github.com/hashicorp/vault-helm.git cd vault-helm git checkout v0.2.1 helm install vault . Periodically, check the status of the vault pod until it is in the Running state. Copy and save the Vault Pod's name. Usually, the Vault pod is named 'vault-0'. The Vault Pod's name is shown in the first column of the kubectl get pods command. kubectl get pods An example of the pod status is below: NAME READY STATUS RESTARTS AGE vault-0 0/1 Running 0 114s Initialize the vault using the following command: kubectl exec -it [vault-pod-name] -- vault operator init -n 1 -t 1 On completion, the output will display the Unseal Key and Initial Root Token. Copy and save both values for future use. These values will be used to unseal and enable the Vault as well as create the necessary secrets. Unseal Key 1: MG+pLyiasq11B/o7hEbctkrTIpGaVDqja3SWJzSLgs0= Initial Root Token: s.Wvxni2SudRB0R91fLOaGFS6h Vault initialized with 1 key shares and a key threshold of 1. Please securely distribute the key shares printed above. When the Vault is re-sealed, restarted, or stopped, you must supply at least 1 of these keys to unseal it before it can start servicing requests.","title":"Install Vault"},{"location":"Tutorials/addVault/#unseal-vault","text":"Unseal the Vault using your Unseal Key 1 in your Command Prompt or terminal window. kubectl exec -it [vault-pod-name] -- vault operator unseal [unseal-key-1-from-init-command] Example Output: Key Value --- ----- Seal Type shamir Initialized true Sealed false Total Shares 1 Threshold 1 Version 1.2.4 Cluster Name vault-cluster-9a51d062 Cluster ID 3a25afe3-ad48-e8bf-1afa-c924f046c746 HA Enabled false","title":"Unseal Vault"},{"location":"Tutorials/addVault/#enable-vault-at-a-path","text":"For this example, we are going to use a key/value secrets engine. Enable it using the following commands: Log in to Vault using your initial root token from initializing Vault in Step 3.i.5 kubectl exec -it [vault-pod-name] -- vault login [your-initial-root-token] Then, enable the 'kv' secrets engine. kubectl exec -it [vault-pod-name] -- vault secrets enable -version=2 kv","title":"Enable Vault at a Path"},{"location":"Tutorials/apiTutorial/","text":"This tutorial demonstrates how to generate a JWT token for Authorization and construct a API call for Getting Devices using Node.js. This method will retrieve information about all devices, including device GUIDs. Figure 1: API Call to Get All Devices Important Successfully deploy the Management Presence Server ( MPS ) and Remote Provisioning Server ( RPS ) and connect an Intel\u00ae vPro device to MPS before constructing the API call. Start here * to install microservices locally with Docker . What You'll Need \u00b6 Hardware A minimum network configuration must include: A Development system with Windows\u00ae 10 or Ubuntu 18.04 or newer An Activated and Configured Intel\u00ae vPro device as the managed device Software on the Development System MPS RPS Node.js LTS 12.x.x or newer Visual Studio Code or any other IDE What You'll Do \u00b6 The following sections describe how to: Generate a new JWT for Authorization Construct an API Call to MPS for Devices View Device GUIDs Generate a JWT \u00b6 Create a New File \u00b6 Note - MPS API Authorize Method See the Authorize Method in the API Documentation for the structure and other requirements of the Authorize API call used in the following to generate a JWT. Navigate to a file directory of your choice. Create and open a new JavaScript file with a name of your choice. In this guide, we will refer to it as generateJWT.js*. Copy and paste the example code below. Update the values of the username , password , and hostname keys. Example POST - generateJWT.js const https = require ( 'https' ) process . env [ 'NODE_TLS_REJECT_UNAUTHORIZED' ] = 0 //For testing withself-signed certs, remove for production let data = JSON . stringify ({ 'username' : 'standalone' , //Replace with MPS_WEB_ADMIN_USER from .env file or mpsweb stored secret 'password' : 'G@ppm0ym' //Replace with MPS_WEB_ADMIN_PASSWORD from .env file or mpsweb stored secret }) const options = { hostname : 'localhost' , //Replace 'localhost' with IP Address or FQDN path : '/mps/login/api/v1/authorize' , method : 'POST' , headers : { 'Content-Type' : 'application/json' } } const req = https . request ( options , ( res ) => { res . setEncoding ( 'utf8' ) res . on ( 'data' , d => { console . log ( d ) }) }) req . on ( 'error' , ( e ) => { console . error ( e ) }) // Write data to request body req . write ( data ) req . end () Execute the REST API \u00b6 Open a Terminal or Command Prompt to execute the call. Navigate to the directory you saved the generateJWT.js file. Run the code snippet using node. node generateJWT.js Example Example Response: { \"token\" : \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiI5RW1SSlRiSWlJYjRiSWVTc21nY1dJanJSNkh5RVRxYyIsImV4cCI6MTYyMDE2OTg2NH0.GUib9sq0RWRLqJ7JpNNlj2AluuROLICCfdZaQzyWy90\" } Construct API Call for Devices \u00b6 Note - MPS API GetDevices Method See the GetDevices Method in the API Documentation for the structure and other requirements of the GetDevices API call used in the following to generate a JWT. Create and open a new JavaScript file with a name of your choice. In this guide we will refer to it as myDevices.js*. Copy and paste the example code below. Update the value of the hostname key to the IP Address or FQDN. Replace <Your-JWT-Token> with the JWT you generated from the Authorize API Call. Example GET - myDevices.js const https = require ( 'https' ) process . env [ 'NODE_TLS_REJECT_UNAUTHORIZED' ] = 0 //For testing with self-signed certs, remove for production const options = { hostname : 'localhost' , //Replace 'localhost' with IP Address or FQDN path : '/mps/api/v1/devices' , method : 'GET' , headers : { 'Authorization' : 'Bearer <Your-JWT-Token>' //Replace <Your-JWT-Token> with your generated JWT Token } } const req = https . request ( options , ( res ) => { res . setEncoding ( 'utf8' ) res . on ( 'data' , d => { console . log ( d ) }) }) req . on ( 'error' , ( e ) => { console . error ( e ) }) req . end () Run the code snippet using node. node myDevices.js Important This is one way to retrieve a device's GUID in the host field. For amt path methods (i.e., Power Actions , Audit Logs, etc), the device GUID is required as part of the GET path. Save this value if you want to try other MPS methods. Other ways to retrieve a GUID can be found here . Example Example Terminal Output: [{ \"connectionStatus\" : 1 , \"hostname\" : \"DESKTOP-R2225SQ\" , \"guid\" : \"d92b3be1-b04f-49de-b806-54b203054e9d\" , \"metadata\" : { \"guid\" : \"d92b3be1-b04f-49de-b806-54b203054e9d\" , \"hostname\" : \"DESKTOP-R2225SQ\" , \"tags\" : []}}] Example JSON Pretty Print: [ { \"connectionStatus\" : 1 , \"hostname\" : \"DESKTOP-R2225SQ\" , \"guid\" : \"d92b3be1-b04f-49de-b806-54b203054e9d\" , \"metadata\" : { \"guid\" : \"d92b3be1-b04f-49de-b806-54b203054e9d\" , \"hostname\" : \"DESKTOP-R2225SQ\" , \"tags\" : [] } } ] Other Methods \u00b6 The sample POST and GET code snippets above can be adapted for other MPS and RPS methods. To test other methods, see: MPS Methods to manage a device: MPS API Docs RPS Methods for server configuration and provisioning: RPS API Docs Modify the tutorial POST and GET templates to implement other MPS REST APIs by changing these values: path method payload (stored in the variable 'data', if POST method) Explore the UI Toolkit \u00b6 In addition to REST API calls, the Open AMT Cloud Toolkit provides a reference implementation console. Add manageability features to the console with prebuilt React components, such as Keyboard, Video, and Mouse ( KVM ). Get Started with the UI Toolkit","title":"REST API Call"},{"location":"Tutorials/apiTutorial/#what-youll-need","text":"Hardware A minimum network configuration must include: A Development system with Windows\u00ae 10 or Ubuntu 18.04 or newer An Activated and Configured Intel\u00ae vPro device as the managed device Software on the Development System MPS RPS Node.js LTS 12.x.x or newer Visual Studio Code or any other IDE","title":"What You'll Need"},{"location":"Tutorials/apiTutorial/#what-youll-do","text":"The following sections describe how to: Generate a new JWT for Authorization Construct an API Call to MPS for Devices View Device GUIDs","title":"What You'll Do"},{"location":"Tutorials/apiTutorial/#generate-a-jwt","text":"","title":"Generate a JWT"},{"location":"Tutorials/apiTutorial/#create-a-new-file","text":"Note - MPS API Authorize Method See the Authorize Method in the API Documentation for the structure and other requirements of the Authorize API call used in the following to generate a JWT. Navigate to a file directory of your choice. Create and open a new JavaScript file with a name of your choice. In this guide, we will refer to it as generateJWT.js*. Copy and paste the example code below. Update the values of the username , password , and hostname keys. Example POST - generateJWT.js const https = require ( 'https' ) process . env [ 'NODE_TLS_REJECT_UNAUTHORIZED' ] = 0 //For testing withself-signed certs, remove for production let data = JSON . stringify ({ 'username' : 'standalone' , //Replace with MPS_WEB_ADMIN_USER from .env file or mpsweb stored secret 'password' : 'G@ppm0ym' //Replace with MPS_WEB_ADMIN_PASSWORD from .env file or mpsweb stored secret }) const options = { hostname : 'localhost' , //Replace 'localhost' with IP Address or FQDN path : '/mps/login/api/v1/authorize' , method : 'POST' , headers : { 'Content-Type' : 'application/json' } } const req = https . request ( options , ( res ) => { res . setEncoding ( 'utf8' ) res . on ( 'data' , d => { console . log ( d ) }) }) req . on ( 'error' , ( e ) => { console . error ( e ) }) // Write data to request body req . write ( data ) req . end ()","title":"Create a New File"},{"location":"Tutorials/apiTutorial/#execute-the-rest-api","text":"Open a Terminal or Command Prompt to execute the call. Navigate to the directory you saved the generateJWT.js file. Run the code snippet using node. node generateJWT.js Example Example Response: { \"token\" : \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiI5RW1SSlRiSWlJYjRiSWVTc21nY1dJanJSNkh5RVRxYyIsImV4cCI6MTYyMDE2OTg2NH0.GUib9sq0RWRLqJ7JpNNlj2AluuROLICCfdZaQzyWy90\" }","title":"Execute the REST API"},{"location":"Tutorials/apiTutorial/#construct-api-call-for-devices","text":"Note - MPS API GetDevices Method See the GetDevices Method in the API Documentation for the structure and other requirements of the GetDevices API call used in the following to generate a JWT. Create and open a new JavaScript file with a name of your choice. In this guide we will refer to it as myDevices.js*. Copy and paste the example code below. Update the value of the hostname key to the IP Address or FQDN. Replace <Your-JWT-Token> with the JWT you generated from the Authorize API Call. Example GET - myDevices.js const https = require ( 'https' ) process . env [ 'NODE_TLS_REJECT_UNAUTHORIZED' ] = 0 //For testing with self-signed certs, remove for production const options = { hostname : 'localhost' , //Replace 'localhost' with IP Address or FQDN path : '/mps/api/v1/devices' , method : 'GET' , headers : { 'Authorization' : 'Bearer <Your-JWT-Token>' //Replace <Your-JWT-Token> with your generated JWT Token } } const req = https . request ( options , ( res ) => { res . setEncoding ( 'utf8' ) res . on ( 'data' , d => { console . log ( d ) }) }) req . on ( 'error' , ( e ) => { console . error ( e ) }) req . end () Run the code snippet using node. node myDevices.js Important This is one way to retrieve a device's GUID in the host field. For amt path methods (i.e., Power Actions , Audit Logs, etc), the device GUID is required as part of the GET path. Save this value if you want to try other MPS methods. Other ways to retrieve a GUID can be found here . Example Example Terminal Output: [{ \"connectionStatus\" : 1 , \"hostname\" : \"DESKTOP-R2225SQ\" , \"guid\" : \"d92b3be1-b04f-49de-b806-54b203054e9d\" , \"metadata\" : { \"guid\" : \"d92b3be1-b04f-49de-b806-54b203054e9d\" , \"hostname\" : \"DESKTOP-R2225SQ\" , \"tags\" : []}}] Example JSON Pretty Print: [ { \"connectionStatus\" : 1 , \"hostname\" : \"DESKTOP-R2225SQ\" , \"guid\" : \"d92b3be1-b04f-49de-b806-54b203054e9d\" , \"metadata\" : { \"guid\" : \"d92b3be1-b04f-49de-b806-54b203054e9d\" , \"hostname\" : \"DESKTOP-R2225SQ\" , \"tags\" : [] } } ]","title":"Construct API Call for Devices"},{"location":"Tutorials/apiTutorial/#other-methods","text":"The sample POST and GET code snippets above can be adapted for other MPS and RPS methods. To test other methods, see: MPS Methods to manage a device: MPS API Docs RPS Methods for server configuration and provisioning: RPS API Docs Modify the tutorial POST and GET templates to implement other MPS REST APIs by changing these values: path method payload (stored in the variable 'data', if POST method)","title":"Other Methods"},{"location":"Tutorials/apiTutorial/#explore-the-ui-toolkit","text":"In addition to REST API calls, the Open AMT Cloud Toolkit provides a reference implementation console. Add manageability features to the console with prebuilt React components, such as Keyboard, Video, and Mouse ( KVM ). Get Started with the UI Toolkit","title":"Explore the UI Toolkit"},{"location":"Tutorials/uitoolkit/","text":"Add MPS UI Toolkit Controls to a WebUI \u00b6 The UI Toolkit allows developers to add manageability features to a console with prebuilt React components. The code snippets simplify the task of adding complex manageability UI controls, such as the Keyboard, Video, Mouse ( KVM ). A sample web application, based on React.js, is provided for test and development. The tutorial outlines how to add various controls to the sample React web application provided. Developers can use the sample code below as a springboard for developing their own consoles. What You'll Need \u00b6 Hardware \u00b6 Configure a network that includes: A development system running Windows\u00ae 10 or Ubuntu* 18.04 or newer At least one Intel vPro\u00ae Platform to manage Software \u00b6 MPS , the Management Presence Server RPS , the Remote Provisioning Server Intel\u00ae vPro device, configured and connected to MPS Note For instructions to setup the MPS and RPS servers to connect a managed device, see the Get Started Guide The development system requires the following software: git Visual Studio Code or any other IDE Node.js* LTS 12.x.x or newer What You'll Do \u00b6 Follow the steps in these sections sequentially: Create a new React app Add UI controls to the React app Create a New React App \u00b6 The React app can be created in any preferred development directory. The MPS can continue to run while creating and running the app. In a Terminal or Command Prompt, go to your preferred development directory. Run the following commands to create sample React app named my-app . npx create-react-app my-app 3. Change to the my-app directory: cd my-app Add UI Toolkit \u00b6 Run the following command to add the UI Toolkit and install the required dependencies: npm install @open-amt-cloud-toolkit/ui-toolkit-react@1.5.0 Run the following commands to start the web UI locally: npm start By default, React apps run on port 3000 . If port 3000 is already used by the MPS server or any other application, you'll be prompted to use another port. If this happens, enter 'Y'. Success Figure 2: React reports successful deployment. Note - Using Chromium Browser and Refreshing By default, React launches in your machine's default browser. However for best experience, navigate to the page using a Chromium based web browser. When you make changes, you do not need to stop the application and restart. It will update and refresh automatically as you make code changes. Add a Sample Control \u00b6 The following sections outline how to add controls. To use the code snippets provided, replace what is in the App.js file with the provided code snippet. Refresh the web browser after adding a control if it does not update automatically after a few seconds. Add Keyboard, Video, Mouse ( KVM ) Redirection \u00b6 The code snippet below adds KVM control to the React application. Open ./my-app/src/App.js in a text editor or IDE of choice, such as Visual Studio Code or Notepad. Delete the current code and replace with the code snippet below. Change the following values: Field Value deviceId Replace the example deviceId value with the GUID of the Intel\u00ae AMT device. See How to Find GUIDs in Intel\u00ae AMT . mpsServer Replace the localhost with the IP Address or FQDN of your Development Device or MPS Server. When using KONG, /mps/ws/relay must be appeneded to the IP or FQDN. authToken Provide valid JWT. See instructions on Generating a JWT by using an Authorize API call . import React from \"react\" ; import \"./App.css\" ; import { KVM } from \"@open-amt-cloud-toolkit/ui-toolkit/reactjs/KVM\" ; function App () { return ( < div className = \"App\" > < KVM deviceId = \"038d0240-045c-05f4-7706-980700080009\" //Replace with AMT Device GUID mpsServer = \"https://localhost/mps/ws/relay\" //Replace 'localhost' with Development System or MPS Server IP Address mouseDebounceTime = \"200\" authToken = \"\" // Replace with a valid JWT token from 'Authorize' API Method canvasHeight = \"100%\" canvasWidth = \"100%\" >< /KVM> < /div> ); } export default App ; Save and close the file. If the React app hasn't updated automatically, refresh the page. You are now able to remotely control your Intel\u00ae AMT device using Keyboard, Video, Mouse control. You will see the errors in the following scenarios: Compilation errors if the ui-toolkit was not downloaded and installed to your react app. MPS / RPS server not running, appropriate controls will fail to work. MPS server running and device not connected. If your browser is IE/Edge, there might be compatibility issues. Incorrect or invalid JWT for authToken, see instructions on Generating a JWT by using an Authorize API call . Example authToken Format { \"token\" : \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiI5RW1SSlRiSWlJYjRiSWVTc21nY1dJanJSNkh5RVRxYyIsImV4cCI6MTYyMDE2OTg2NH0.GUib9sq0RWRLqJ7JpNNlj2AluuROLICCfdZaQzyWy90\" } Next Steps \u00b6 Try Other Controls \u00b6 Try out other React controls such as Serial Over LAN . Customize and Create Bundles \u00b6 Try out creating and customizing React bundles for things such as Serial Over LAN or KVM here . License Note \u00b6 If you are distributing the FortAwesome Icons, please provide attribution to the source per the CC-by 4.0 license obligations.","title":"UI Toolkit KVM Module"},{"location":"Tutorials/uitoolkit/#add-mps-ui-toolkit-controls-to-a-webui","text":"The UI Toolkit allows developers to add manageability features to a console with prebuilt React components. The code snippets simplify the task of adding complex manageability UI controls, such as the Keyboard, Video, Mouse ( KVM ). A sample web application, based on React.js, is provided for test and development. The tutorial outlines how to add various controls to the sample React web application provided. Developers can use the sample code below as a springboard for developing their own consoles.","title":"Add MPS UI Toolkit Controls to a WebUI"},{"location":"Tutorials/uitoolkit/#what-youll-need","text":"","title":"What You'll Need"},{"location":"Tutorials/uitoolkit/#hardware","text":"Configure a network that includes: A development system running Windows\u00ae 10 or Ubuntu* 18.04 or newer At least one Intel vPro\u00ae Platform to manage","title":"Hardware"},{"location":"Tutorials/uitoolkit/#software","text":"MPS , the Management Presence Server RPS , the Remote Provisioning Server Intel\u00ae vPro device, configured and connected to MPS Note For instructions to setup the MPS and RPS servers to connect a managed device, see the Get Started Guide The development system requires the following software: git Visual Studio Code or any other IDE Node.js* LTS 12.x.x or newer","title":"Software"},{"location":"Tutorials/uitoolkit/#what-youll-do","text":"Follow the steps in these sections sequentially: Create a new React app Add UI controls to the React app","title":"What You'll Do"},{"location":"Tutorials/uitoolkit/#create-a-new-react-app","text":"The React app can be created in any preferred development directory. The MPS can continue to run while creating and running the app. In a Terminal or Command Prompt, go to your preferred development directory. Run the following commands to create sample React app named my-app . npx create-react-app my-app 3. Change to the my-app directory: cd my-app","title":"Create a New React App"},{"location":"Tutorials/uitoolkit/#add-ui-toolkit","text":"Run the following command to add the UI Toolkit and install the required dependencies: npm install @open-amt-cloud-toolkit/ui-toolkit-react@1.5.0 Run the following commands to start the web UI locally: npm start By default, React apps run on port 3000 . If port 3000 is already used by the MPS server or any other application, you'll be prompted to use another port. If this happens, enter 'Y'. Success Figure 2: React reports successful deployment. Note - Using Chromium Browser and Refreshing By default, React launches in your machine's default browser. However for best experience, navigate to the page using a Chromium based web browser. When you make changes, you do not need to stop the application and restart. It will update and refresh automatically as you make code changes.","title":"Add UI Toolkit"},{"location":"Tutorials/uitoolkit/#add-a-sample-control","text":"The following sections outline how to add controls. To use the code snippets provided, replace what is in the App.js file with the provided code snippet. Refresh the web browser after adding a control if it does not update automatically after a few seconds.","title":"Add a Sample Control"},{"location":"Tutorials/uitoolkit/#add-keyboard-video-mouse-kvm-redirection","text":"The code snippet below adds KVM control to the React application. Open ./my-app/src/App.js in a text editor or IDE of choice, such as Visual Studio Code or Notepad. Delete the current code and replace with the code snippet below. Change the following values: Field Value deviceId Replace the example deviceId value with the GUID of the Intel\u00ae AMT device. See How to Find GUIDs in Intel\u00ae AMT . mpsServer Replace the localhost with the IP Address or FQDN of your Development Device or MPS Server. When using KONG, /mps/ws/relay must be appeneded to the IP or FQDN. authToken Provide valid JWT. See instructions on Generating a JWT by using an Authorize API call . import React from \"react\" ; import \"./App.css\" ; import { KVM } from \"@open-amt-cloud-toolkit/ui-toolkit/reactjs/KVM\" ; function App () { return ( < div className = \"App\" > < KVM deviceId = \"038d0240-045c-05f4-7706-980700080009\" //Replace with AMT Device GUID mpsServer = \"https://localhost/mps/ws/relay\" //Replace 'localhost' with Development System or MPS Server IP Address mouseDebounceTime = \"200\" authToken = \"\" // Replace with a valid JWT token from 'Authorize' API Method canvasHeight = \"100%\" canvasWidth = \"100%\" >< /KVM> < /div> ); } export default App ; Save and close the file. If the React app hasn't updated automatically, refresh the page. You are now able to remotely control your Intel\u00ae AMT device using Keyboard, Video, Mouse control. You will see the errors in the following scenarios: Compilation errors if the ui-toolkit was not downloaded and installed to your react app. MPS / RPS server not running, appropriate controls will fail to work. MPS server running and device not connected. If your browser is IE/Edge, there might be compatibility issues. Incorrect or invalid JWT for authToken, see instructions on Generating a JWT by using an Authorize API call . Example authToken Format { \"token\" : \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiI5RW1SSlRiSWlJYjRiSWVTc21nY1dJanJSNkh5RVRxYyIsImV4cCI6MTYyMDE2OTg2NH0.GUib9sq0RWRLqJ7JpNNlj2AluuROLICCfdZaQzyWy90\" }","title":"Add Keyboard, Video, Mouse (KVM) Redirection"},{"location":"Tutorials/uitoolkit/#next-steps","text":"","title":"Next Steps"},{"location":"Tutorials/uitoolkit/#try-other-controls","text":"Try out other React controls such as Serial Over LAN .","title":"Try Other Controls"},{"location":"Tutorials/uitoolkit/#customize-and-create-bundles","text":"Try out creating and customizing React bundles for things such as Serial Over LAN or KVM here .","title":"Customize and Create Bundles"},{"location":"Tutorials/uitoolkit/#license-note","text":"If you are distributing the FortAwesome Icons, please provide attribution to the source per the CC-by 4.0 license obligations.","title":"License Note"},{"location":"UIToolkit/Webpack-Configuration/","text":"To use Webpack *, understand its Core Concepts: Entry: The entry point such as /src/index.js , which is the default for Webpack 4 is what Webpack will use to start building out/resolving its dependencies. Output: The output property, such as ./dist , the default for Webpack 4, tells Webpack where to output the bundles it creates and how to name them. Loaders: Because Webpack only understands native Javascript code, these loaders enable Webpack to process different types of imported files and convert them into valid modules when it encounters a specific type of file. Loaders have two properties in the configuration file: The test property identifies the file or files that should be transformed The use property indicates the loader that can be used to do the transforming Plugins: The plugins enable the extension of Webpack capabilities to perform a wider range of tasks like bundle optimization, asset management, and injection of environment variables. Install Webpack \u00b6 Install both webpack and webpack cli as dev dependencies: npm i webpack webpack-cli -D webpack-dev-server . Configure Webpack for the Development Environment \u00b6 To configure: Create a Webpack config file webpack.config.dev.js in the root of the project folder. Add the development environment to the webpack.config.dev.js file:** const path = require ( 'path' ); module . exports = { mode : \"development\" , entry : './src/reactjs/components/KVM/index.tsx' , // entry points can be multiple } Add Typescript \u00b6 The example code below resolves the file extensions, .tsx, .ts and .js. Files with the extensions .tsx or .ts are processed by awesome-typescript-loader. To add Typescript support: Install the Typescript dependency, awesome-typescript-loader: npm i awesome-typescript-loader -D 2. Add the configuration to the webpack.config.dev.js file: Example: const path = require ( 'path' ); module . exports = { .... resolve : { extensions : [ \".tsx\" , \".ts\" , \".js\" ] }, module : { rules : [ { test : /\\.tsx?$/ , loader : 'awesome-typescript-loader' } ] } } Add Styles \u00b6 To Add Styles support: Use npm to install css-loader and sass-loader: npm i style-loader css-loader sass-loader -D Add the configuration to the webpack.config.dev.js file: module . exports = { .... module : { rules : [ ... { test : /\\.(sc|sa|c)ss$/ , use : [ 'style-loader' , 'css-loader' , 'sass-loader' ], } ] } } Add HTML \u00b6 To add HTML support: Use the Webpack plugin html-webpack-plugin, which helps simplify the creation of HTML files to help serve our Webpack bundles: npm i html-webpack-plugin -D. Add the configuration to the webpack.config.dev.js file: const path = require ( 'path' ); const HtmlWebpackPlugin = require ( 'html-webpack-plugin' ); module . exports = { .... plugins : [ new HtmlWebpackPlugin ({ filename : \"kvm.htm\" , template : \"./src/sample/sampleKVM.htm\" , inject : true , chunks : [ \"kvm\" ], }), ] } Development Server \u00b6 Set up a development server using the webpack-dev-server. This server opens a default browser upon npm start and provide us with live reloading. npm i webpack-dev-server --D Update Package.json \u00b6 Add webpack-dev-server to the Package.json file: \"scripts\" : { \"start\" : \"webpack-dev-server --config webpack.config.dev.js\" } Example Sample usage: Open command prompt. Run npm start command. Configure Webpack for Production Environment \u00b6 To add production environment support: Create a Webpack config file webpack.config.prod.js in the root of our project folder. Add the configuration to the webpack.config.prod.js file: const path = require ( 'path' ); module . exports = { mode : \"production\" , entry : './src/reactjs/components/KVM/index.tsx' , // entry points can be multiple output : { filename : \"[name].min.js\" , path : path . resolve ( __dirname , \"./dist\" ) }, .... } 3. Update Package.json: \"scripts\" : { \"build\" : \"webpack --config webpack.config.prod.js\" , } Example Sample usage: Open command prompt. Run npm run build. Configure Webpack for External Environment \u00b6 Create a Webpack config file webpack.config.externals.js in the root of our project folder. Add webpack-node-externals: Install webpack-node-externals dependencies: npm install webpack-node-externals -D The webpack-node-externals library creates an externals function that ignores node_modules when bundling in Webpack . Add the following to webpack.config.externals.js : const path = require ( \"path\" ); //No ES6 in webpack config const nodeExternals = require ( 'webpack-node-externals' ); module . exports = { .... externals : [ nodeExternals ()], }; 3. Update Package.json: \"scripts\" : { \"build-ext\" : \"webpack --config webpack.config.externals.js\" , } Example Sample usage: Open command prompt. Run npm run build-ext command.","title":"Webpack Configuration"},{"location":"UIToolkit/Webpack-Configuration/#install-webpack","text":"Install both webpack and webpack cli as dev dependencies: npm i webpack webpack-cli -D webpack-dev-server .","title":"Install Webpack"},{"location":"UIToolkit/Webpack-Configuration/#configure-webpack-for-the-development-environment","text":"To configure: Create a Webpack config file webpack.config.dev.js in the root of the project folder. Add the development environment to the webpack.config.dev.js file:** const path = require ( 'path' ); module . exports = { mode : \"development\" , entry : './src/reactjs/components/KVM/index.tsx' , // entry points can be multiple }","title":"Configure Webpack for the Development Environment"},{"location":"UIToolkit/Webpack-Configuration/#add-typescript","text":"The example code below resolves the file extensions, .tsx, .ts and .js. Files with the extensions .tsx or .ts are processed by awesome-typescript-loader. To add Typescript support: Install the Typescript dependency, awesome-typescript-loader: npm i awesome-typescript-loader -D 2. Add the configuration to the webpack.config.dev.js file: Example: const path = require ( 'path' ); module . exports = { .... resolve : { extensions : [ \".tsx\" , \".ts\" , \".js\" ] }, module : { rules : [ { test : /\\.tsx?$/ , loader : 'awesome-typescript-loader' } ] } }","title":"Add Typescript"},{"location":"UIToolkit/Webpack-Configuration/#add-styles","text":"To Add Styles support: Use npm to install css-loader and sass-loader: npm i style-loader css-loader sass-loader -D Add the configuration to the webpack.config.dev.js file: module . exports = { .... module : { rules : [ ... { test : /\\.(sc|sa|c)ss$/ , use : [ 'style-loader' , 'css-loader' , 'sass-loader' ], } ] } }","title":"Add Styles"},{"location":"UIToolkit/Webpack-Configuration/#add-html","text":"To add HTML support: Use the Webpack plugin html-webpack-plugin, which helps simplify the creation of HTML files to help serve our Webpack bundles: npm i html-webpack-plugin -D. Add the configuration to the webpack.config.dev.js file: const path = require ( 'path' ); const HtmlWebpackPlugin = require ( 'html-webpack-plugin' ); module . exports = { .... plugins : [ new HtmlWebpackPlugin ({ filename : \"kvm.htm\" , template : \"./src/sample/sampleKVM.htm\" , inject : true , chunks : [ \"kvm\" ], }), ] }","title":"Add HTML"},{"location":"UIToolkit/Webpack-Configuration/#development-server","text":"Set up a development server using the webpack-dev-server. This server opens a default browser upon npm start and provide us with live reloading. npm i webpack-dev-server --D","title":"Development Server"},{"location":"UIToolkit/Webpack-Configuration/#update-packagejson","text":"Add webpack-dev-server to the Package.json file: \"scripts\" : { \"start\" : \"webpack-dev-server --config webpack.config.dev.js\" } Example Sample usage: Open command prompt. Run npm start command.","title":"Update Package.json"},{"location":"UIToolkit/Webpack-Configuration/#configure-webpack-for-production-environment","text":"To add production environment support: Create a Webpack config file webpack.config.prod.js in the root of our project folder. Add the configuration to the webpack.config.prod.js file: const path = require ( 'path' ); module . exports = { mode : \"production\" , entry : './src/reactjs/components/KVM/index.tsx' , // entry points can be multiple output : { filename : \"[name].min.js\" , path : path . resolve ( __dirname , \"./dist\" ) }, .... } 3. Update Package.json: \"scripts\" : { \"build\" : \"webpack --config webpack.config.prod.js\" , } Example Sample usage: Open command prompt. Run npm run build.","title":"Configure Webpack for Production Environment"},{"location":"UIToolkit/Webpack-Configuration/#configure-webpack-for-external-environment","text":"Create a Webpack config file webpack.config.externals.js in the root of our project folder. Add webpack-node-externals: Install webpack-node-externals dependencies: npm install webpack-node-externals -D The webpack-node-externals library creates an externals function that ignores node_modules when bundling in Webpack . Add the following to webpack.config.externals.js : const path = require ( \"path\" ); //No ES6 in webpack config const nodeExternals = require ( 'webpack-node-externals' ); module . exports = { .... externals : [ nodeExternals ()], }; 3. Update Package.json: \"scripts\" : { \"build-ext\" : \"webpack --config webpack.config.externals.js\" , } Example Sample usage: Open command prompt. Run npm run build-ext command.","title":"Configure Webpack for External Environment"},{"location":"UIToolkit/localization/","text":"Localize Strings \u00b6 Create a new directory in the ui-toolkit/public/locales/ directory. The directory name must match one of the codes listed . Copy the translation.json file in the public/locales/en/ directory to the new language directory. Customize the required fields in the translation.json file. Example To support Kannada language: Create a new directory kn in /public/locales/ Copy translation.json from /locales/en/ to /locales/kn/ directory Update key-values in /kn/translation.json according to Kannada language Open the i18n.ts file in the ui-toolkit directory. Modify the file to import the newly added public/locales/Language/translation.json file and update the 'resources' constant to include the new translation. Example To support Kannada language: Create new import statement as 'translationKN' Edit resources constant to include new translation import translationEN from './public/locales/en/translation.json' import translationKN from './public/locales/kn/translation.json'; const resources = { en: { translations: translationEN }, kn: { translations: translationKN } }; Rebuild and generate a new bundle before testing the changes. Language can be changed in the browser under language section of the browser settings. English is the default if no customized translation file provided for the language. Get Localized Strings for Web Consoles with Localization Enabled \u00b6 If your web console already has localization enabled, make sure to add the translations of the UI-controls into your web console's translations file.","title":"Localization"},{"location":"UIToolkit/localization/#localize-strings","text":"Create a new directory in the ui-toolkit/public/locales/ directory. The directory name must match one of the codes listed . Copy the translation.json file in the public/locales/en/ directory to the new language directory. Customize the required fields in the translation.json file. Example To support Kannada language: Create a new directory kn in /public/locales/ Copy translation.json from /locales/en/ to /locales/kn/ directory Update key-values in /kn/translation.json according to Kannada language Open the i18n.ts file in the ui-toolkit directory. Modify the file to import the newly added public/locales/Language/translation.json file and update the 'resources' constant to include the new translation. Example To support Kannada language: Create new import statement as 'translationKN' Edit resources constant to include new translation import translationEN from './public/locales/en/translation.json' import translationKN from './public/locales/kn/translation.json'; const resources = { en: { translations: translationEN }, kn: { translations: translationKN } }; Rebuild and generate a new bundle before testing the changes. Language can be changed in the browser under language section of the browser settings. English is the default if no customized translation file provided for the language.","title":"Localize Strings"},{"location":"UIToolkit/localization/#get-localized-strings-for-web-consoles-with-localization-enabled","text":"If your web console already has localization enabled, make sure to add the translations of the UI-controls into your web console's translations file.","title":"Get Localized Strings for Web Consoles with Localization Enabled"},{"location":"UIToolkit/Bundles/SerialOverLAN/","text":"Quickstart - Bundle Serial Over LAN ( SOL ) Control \u00b6 Use these instructions to: Run the SOL control in development environment Create a bundle for SOL control Add bundle to a sample HTML file Prerequisites \u00b6 In order to deploy and make changes, the following tools and application have to be installed on your development system: Git Visual Studio Code or any other IDE Node.js Chrome* Browser MPS Server with an AMT Device Connected Download and Install UI Toolkit \u00b6 Open a Terminal (Linux) or Command Prompt (Windows) and navigate to a directory of your choice for development. Clone the UI-Toolkit Repository: git clone https://github.com/open-amt-cloud-toolkit/ui-toolkit --branch v1.5.0 Change to the ui-toolkit directory: cd ui_toolkit Install the dependencies: npm install Run in Development Environment \u00b6 To add and test new changes before bundling the control, use a webpack dev server. Start the server: npm start Open a Chrome* browser and navigate to the following link to see changes: http://localhost:8080/sol.htm?deviceId=[AMT-Device-GUID]&mpsServer=https://[MPS-Server-IP-Address]:3000 Note By default, the webpack dev server runs on port 8080. If port 8080 is already in use, webpack automatically runs on the next immediate available port. Create Bundle \u00b6 To bundle, navigate to the ui-toolkit directory in a Terminal (Linux) or Command Prompt (Windows). Remove or rename the existing sol.min.js in the ui-toolkit/dist/ directory before building: Build the bundle: npm run build A new kvm.core.min.js will be created in the ui-toolkit/dist/ directory. Note To bundle the Serial-Over-LAN control without node_modules, run the following build command instead. npm run built-ext The bundle generated using the build-ext command can be used in react apps as an independent control Add to Sample HTML Page \u00b6 Add the following code snippet to sampleSOL.htm in the ui-toolkit/src/sample/ directory using an editor of your choice: <body> <div id= \"sol\" ></div> <script src= \"../../dist/sol.min.js\" crossorigin ></script> </body> In a Terminal (Linux) or Command Prompt (Windows), navigate to the ui-toolkit directory: Serve the HTML page. npx serve Open a new Chrome* browser and navigate to the following URL: http://localhost:5000/src/sample/sampleSOL.htm?deviceId=[AMT-Device-GUID]&mpsServer=https://[MPS-Server-IP-Address]:3000 Errors may occur in the following scenarios: UI-toolkit was not downloaded and installed into your react app MPS Server is not running MPS Server is running but the device is not connected","title":"Serial Over LAN"},{"location":"UIToolkit/Bundles/SerialOverLAN/#quickstart-bundle-serial-over-lan-sol-control","text":"Use these instructions to: Run the SOL control in development environment Create a bundle for SOL control Add bundle to a sample HTML file","title":"Quickstart  - Bundle Serial Over LAN (SOL) Control"},{"location":"UIToolkit/Bundles/SerialOverLAN/#prerequisites","text":"In order to deploy and make changes, the following tools and application have to be installed on your development system: Git Visual Studio Code or any other IDE Node.js Chrome* Browser MPS Server with an AMT Device Connected","title":"Prerequisites"},{"location":"UIToolkit/Bundles/SerialOverLAN/#download-and-install-ui-toolkit","text":"Open a Terminal (Linux) or Command Prompt (Windows) and navigate to a directory of your choice for development. Clone the UI-Toolkit Repository: git clone https://github.com/open-amt-cloud-toolkit/ui-toolkit --branch v1.5.0 Change to the ui-toolkit directory: cd ui_toolkit Install the dependencies: npm install","title":"Download and Install UI Toolkit"},{"location":"UIToolkit/Bundles/SerialOverLAN/#run-in-development-environment","text":"To add and test new changes before bundling the control, use a webpack dev server. Start the server: npm start Open a Chrome* browser and navigate to the following link to see changes: http://localhost:8080/sol.htm?deviceId=[AMT-Device-GUID]&mpsServer=https://[MPS-Server-IP-Address]:3000 Note By default, the webpack dev server runs on port 8080. If port 8080 is already in use, webpack automatically runs on the next immediate available port.","title":"Run in Development Environment"},{"location":"UIToolkit/Bundles/SerialOverLAN/#create-bundle","text":"To bundle, navigate to the ui-toolkit directory in a Terminal (Linux) or Command Prompt (Windows). Remove or rename the existing sol.min.js in the ui-toolkit/dist/ directory before building: Build the bundle: npm run build A new kvm.core.min.js will be created in the ui-toolkit/dist/ directory. Note To bundle the Serial-Over-LAN control without node_modules, run the following build command instead. npm run built-ext The bundle generated using the build-ext command can be used in react apps as an independent control","title":"Create Bundle"},{"location":"UIToolkit/Bundles/SerialOverLAN/#add-to-sample-html-page","text":"Add the following code snippet to sampleSOL.htm in the ui-toolkit/src/sample/ directory using an editor of your choice: <body> <div id= \"sol\" ></div> <script src= \"../../dist/sol.min.js\" crossorigin ></script> </body> In a Terminal (Linux) or Command Prompt (Windows), navigate to the ui-toolkit directory: Serve the HTML page. npx serve Open a new Chrome* browser and navigate to the following URL: http://localhost:5000/src/sample/sampleSOL.htm?deviceId=[AMT-Device-GUID]&mpsServer=https://[MPS-Server-IP-Address]:3000 Errors may occur in the following scenarios: UI-toolkit was not downloaded and installed into your react app MPS Server is not running MPS Server is running but the device is not connected","title":"Add to Sample HTML Page"},{"location":"UIToolkit/Bundles/kvm/","text":"Quickstart - Bundle Keyboard Video Mouse ( KVM ) Control \u00b6 Use these instructions to: Run the KVM control in development environment Create a bundle for KVM control Add bundle to a sample HTML file Prerequisites \u00b6 In order to deploy and make changes, the following tools and application has to be installed on your development machine: Git Visual Studio Code or any other IDE Node.js Chrome* Browser MPS Server with an AMT Device Connected Download and Install UI Toolkit \u00b6 Open a Terminal (Linux) or Command Prompt (Windows) and navigate to a directory of your choice for development. Clone the UI Toolkit Repository: git clone https://github.com/open-amt-cloud-toolkit/ui-toolkit --branch v1.5.0 Change to the ui-toolkit directory: cd ui_toolkit Install the dependencies: npm install Run in Development Environment \u00b6 To add and test new changes before bundling the control, use a webpack dev server: Start the server: npm start Open a Chrome* browser and navigate to the following link to see changes: http://localhost:8080/kvm.htm?deviceId=[AMT-Device-GUID]&mpsServer=https://[MPS-Server-IP-Address]:3000 Note By default, the webpack dev server runs on port 8080. If port 8080 is already in use, webpack automatically runs on the next immediate available port. Create Bundle \u00b6 To bundle, navigate to the ui-toolkit directory in a Terminal (Linux) or Command Prompt (Windows). Remove or rename the existing kvm.min.js in the ui-toolkit/dist/ directory before building. Build the bundle: npm run build A new kvm.min.js will be created in the ui-toolkit/dist/ directory. Note To bundle the KVM control without node_modules, run the following build command instead. npm run built-ext The bundle generated using the build-ext command can be used in react apps as an independent control Add to Sample HTML Page \u00b6 Add the following code snippet to sampleKVM.htm in the ui-toolkit/src/reactjs/sample/ directory using an editor of your choice: <body> <div id=\"kvm\"></div> <script src=\"../../dist/kvm.min.js\" crossorigin></script> </body> In a Terminal (Linux) or Command Prompt (Windows), navigate to the ui-toolkit directory. Serve the HTML page: npx serve Open a new Chrome* browser and navigate to the following URL: http://localhost:5000/src/sample/sampleKVM.htm?deviceId=[AMT-Device-GUID]&mpsServer=https://[MPS-Server-IP-Address]:3000 Errors may occur in the following scenarios: UI-toolkit was not downloaded and installed into your react app MPS Server is not running MPS Server is running but the device is not connected","title":"Keyboard, Video, Mouse"},{"location":"UIToolkit/Bundles/kvm/#quickstart-bundle-keyboard-video-mouse-kvm-control","text":"Use these instructions to: Run the KVM control in development environment Create a bundle for KVM control Add bundle to a sample HTML file","title":"Quickstart - Bundle Keyboard Video Mouse (KVM) Control"},{"location":"UIToolkit/Bundles/kvm/#prerequisites","text":"In order to deploy and make changes, the following tools and application has to be installed on your development machine: Git Visual Studio Code or any other IDE Node.js Chrome* Browser MPS Server with an AMT Device Connected","title":"Prerequisites"},{"location":"UIToolkit/Bundles/kvm/#download-and-install-ui-toolkit","text":"Open a Terminal (Linux) or Command Prompt (Windows) and navigate to a directory of your choice for development. Clone the UI Toolkit Repository: git clone https://github.com/open-amt-cloud-toolkit/ui-toolkit --branch v1.5.0 Change to the ui-toolkit directory: cd ui_toolkit Install the dependencies: npm install","title":"Download and Install UI Toolkit"},{"location":"UIToolkit/Bundles/kvm/#run-in-development-environment","text":"To add and test new changes before bundling the control, use a webpack dev server: Start the server: npm start Open a Chrome* browser and navigate to the following link to see changes: http://localhost:8080/kvm.htm?deviceId=[AMT-Device-GUID]&mpsServer=https://[MPS-Server-IP-Address]:3000 Note By default, the webpack dev server runs on port 8080. If port 8080 is already in use, webpack automatically runs on the next immediate available port.","title":"Run in Development Environment"},{"location":"UIToolkit/Bundles/kvm/#create-bundle","text":"To bundle, navigate to the ui-toolkit directory in a Terminal (Linux) or Command Prompt (Windows). Remove or rename the existing kvm.min.js in the ui-toolkit/dist/ directory before building. Build the bundle: npm run build A new kvm.min.js will be created in the ui-toolkit/dist/ directory. Note To bundle the KVM control without node_modules, run the following build command instead. npm run built-ext The bundle generated using the build-ext command can be used in react apps as an independent control","title":"Create Bundle"},{"location":"UIToolkit/Bundles/kvm/#add-to-sample-html-page","text":"Add the following code snippet to sampleKVM.htm in the ui-toolkit/src/reactjs/sample/ directory using an editor of your choice: <body> <div id=\"kvm\"></div> <script src=\"../../dist/kvm.min.js\" crossorigin></script> </body> In a Terminal (Linux) or Command Prompt (Windows), navigate to the ui-toolkit directory. Serve the HTML page: npx serve Open a new Chrome* browser and navigate to the following URL: http://localhost:5000/src/sample/sampleKVM.htm?deviceId=[AMT-Device-GUID]&mpsServer=https://[MPS-Server-IP-Address]:3000 Errors may occur in the following scenarios: UI-toolkit was not downloaded and installed into your react app MPS Server is not running MPS Server is running but the device is not connected","title":"Add to Sample HTML Page"},{"location":"UIToolkit/Controls/kvmControl/","text":"Not sure how to implement Keyboard, Video Mouse ( KVM )? View the UI Toolkit KVM Module Tutorial for a step-by-step walkthrough prerequisites and instructions for implementing a React Control using the UI Toolkit . Add KVM Control \u00b6 Use the following code snippet to add the KVM control to the React Application. Open src/App.js and add the code shown below: Note Change deviceId value to your device GUID, mpsServer value to your MPS server address, and pass in a valid JWT for authToken . import React from \"react\" ; import \"./App.css\" ; import { KVM } from \"@open-amt-cloud-toolkit/ui-toolkit/reactjs/KVM\" ; function App () { return ( < div className = \"App\" > < KVM deviceId = \"038d0240-045c-05f4-7706-980700080009\" //Replace with AMT Device GUID mpsServer = \"https://localhost/mps/ws/relay\" //Replace 'localhost' with Development System or MPS Server IP Address mouseDebounceTime = \"200\" authToken = \"\" // Replace with a valid JWT provided during login of MPS canvasHeight = \"100%\" canvasWidth = \"100%\" >< /KVM> < /div> ); } export default App ;","title":"Keyboard, Video, Mouse"},{"location":"UIToolkit/Controls/kvmControl/#add-kvm-control","text":"Use the following code snippet to add the KVM control to the React Application. Open src/App.js and add the code shown below: Note Change deviceId value to your device GUID, mpsServer value to your MPS server address, and pass in a valid JWT for authToken . import React from \"react\" ; import \"./App.css\" ; import { KVM } from \"@open-amt-cloud-toolkit/ui-toolkit/reactjs/KVM\" ; function App () { return ( < div className = \"App\" > < KVM deviceId = \"038d0240-045c-05f4-7706-980700080009\" //Replace with AMT Device GUID mpsServer = \"https://localhost/mps/ws/relay\" //Replace 'localhost' with Development System or MPS Server IP Address mouseDebounceTime = \"200\" authToken = \"\" // Replace with a valid JWT provided during login of MPS canvasHeight = \"100%\" canvasWidth = \"100%\" >< /KVM> < /div> ); } export default App ;","title":"Add KVM Control"},{"location":"UIToolkit/Controls/serialOverLANControl/","text":"Not sure how to implement Serial Over LAN ( SOL )? View the UI Toolkit KVM Module Tutorial for a step-by-step walkthrough of the prerequisites and instructions for implementing a React Control using the UI Toolkit . Add Serial Over LAN ( SOL ) Control \u00b6 Use the following code snippet to add the SOL control to the React Application. Open src/App.js and add the code shown below: Note Change deviceId value to your device GUID, mpsServer value to your MPS server address, and pass in a valid JWT for authToken . import React from \"react\" ; import { Sol } from \"@open-amt-cloud-toolkit/ui-toolkit/reactjs/SerialOverLAN\" ; function App () { return ( < div > < Sol deviceId = \"038d0240-045c-05f4-7706-980700080009\" //Replace with AMT Device GUID mpsServer = \"https://localhost/mps/ws\" //Replace 'localhost' with Development System or MPS Server IP Address authToken = \"\" > // Replace with a valid JWT provided during login of MPS < /Sol> < /div> ); } \u200b export default App ;","title":"Serial Over LAN"},{"location":"UIToolkit/Controls/serialOverLANControl/#add-serial-over-lan-sol-control","text":"Use the following code snippet to add the SOL control to the React Application. Open src/App.js and add the code shown below: Note Change deviceId value to your device GUID, mpsServer value to your MPS server address, and pass in a valid JWT for authToken . import React from \"react\" ; import { Sol } from \"@open-amt-cloud-toolkit/ui-toolkit/reactjs/SerialOverLAN\" ; function App () { return ( < div > < Sol deviceId = \"038d0240-045c-05f4-7706-980700080009\" //Replace with AMT Device GUID mpsServer = \"https://localhost/mps/ws\" //Replace 'localhost' with Development System or MPS Server IP Address authToken = \"\" > // Replace with a valid JWT provided during login of MPS < /Sol> < /div> ); } \u200b export default App ;","title":"Add Serial Over LAN (SOL) Control"}]}